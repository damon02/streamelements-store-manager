(this["webpackJsonponscreen-sounds"]=this["webpackJsonponscreen-sounds"]||[]).push([[0],{106:function(e,t,n){},119:function(e,t,n){},195:function(e,t,n){},196:function(e,t,n){},197:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(21),i=n.n(r),o=n(26),s=n(8),l=n(3),u=n(10),d=n.n(u),b=n(16),j=n(19),v=n(4),f=n(30),m=n(216),h=n(219),p=(n(106),n(1)),O=function(e){var t=e.user,n=(e.loading,e.logout),a=e.allItems,r=c.useState(!1),i=Object(v.a)(r,2),o=i[0],s=i[1],u=null===t||void 0===t?void 0:t.displayName,d=Object(f.useSpring)({opacity:o?1:0,transform:o?"translateY(0%) translateX(0%) scale(1)":"translateY(-100%) translateX(50%) scale(0)",config:{duration:250,easing:m.a}});return Object(p.jsxs)("div",{className:"header-app",children:[Object(p.jsx)("div",{className:"title",children:Object(p.jsx)("h1",{children:"StreamElements Sounds editor"})}),Object(p.jsx)("div",{className:"buttons",children:Object(p.jsxs)("div",{className:"button-user".concat(o?" active":""),role:"button",onKeyPress:function(e){return"enter"===e.key?s(!o):{}},onClick:function(){return s(!o)},tabIndex:0,children:[Object(p.jsx)("div",{className:"user-image",style:{backgroundImage:"url(".concat(null===t||void 0===t?void 0:t.avatar,")")}}),Object(p.jsx)("div",{className:"name",children:u||Object(p.jsx)("i",{className:"fas fa-spin fa-spinner"})}),Object(p.jsx)("div",{className:"triangle",children:Object(p.jsx)("i",{className:"fas fa-caret-down"})})]})}),Object(p.jsxs)(f.animated.div,{className:"user-menu",style:Object(l.a)({},d),children:[Object(p.jsx)("button",{className:"button-menu",type:"button",onClick:function(){return function(){var e="Command;Name;Description;Cost;Date added\n".concat(a.filter((function(e){return e.enabled})).map((function(e){var t;return"".concat(null===(t=e.bot)||void 0===t?void 0:t.identifier,";").concat(e.name||"<empty name>",";").concat(e.description||"<empty description>",";").concat(e.cost||0,";").concat(e.createdAt?Object(h.a)(new Date(e.createdAt),"dd-MM-yyyy HH:mm:ss"):"<empty createdAt>",";")})).join("\n"));navigator.clipboard.writeText(e),s(!1)}()},children:"Copy all items to clipboard"}),Object(p.jsx)("button",{className:"button-menu danger",type:"button",onClick:function(){return n()},children:"Log out"})]})]})},x=n(34);function g(e){var t=Object(c.useRef)();return Object(c.useEffect)((function(){t.current=e}),[e]),t.current}var y=function(e){var t,n,a,r,i,o,l,u,d,b,j,f=e.item,m=(e.setItem,Object(s.h)()),O=c.useState(!1),y=Object(v.a)(O,2),N=y[0],w=y[1],C=g(null===(t=f.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src),k="waveform-".concat(f._id),S=c.useRef(null),I=c.useState(!1),E=Object(v.a)(I,2),T=E[0],M=E[1],D=c.useState(0),A=Object(v.a)(D,2),P=(A[0],A[1]),_=c.useState(!1),F=Object(v.a)(_,2),R=F[0],U=F[1],J=c.useCallback((function(e){var t,n,c,a;(S.current=e,S.current&&(null===(t=f.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src))&&(S.current.load(null===(c=f.alert)||void 0===c||null===(a=c.audio)||void 0===a?void 0:a.src),S.current.on("play",(function(){M(!0)})),S.current.on("pause",(function(){M(!1)})),S.current.on("finish",(function(){M(!1)})),S.current.on("seek",(function(){P(S.current.getCurrentTime())})),S.current.on("audioprocess",(function(){P(S.current.getCurrentTime())})),U(!0))}),[null===(a=f.alert)||void 0===a||null===(r=a.audio)||void 0===r?void 0:r.src]),V=c.useCallback((function(){S.current.playPause()}),[]);return c.useEffect((function(){var e,t,n,c,a,r;R&&C!==(null===(e=f.alert)||void 0===e||null===(t=e.audio)||void 0===t?void 0:t.src)&&(null===(n=f.alert)||void 0===n||null===(c=n.audio)||void 0===c?void 0:c.src)&&S.current.load(null===(a=f.alert)||void 0===a||null===(r=a.audio)||void 0===r?void 0:r.src)}),[null===(i=f.alert)||void 0===i||null===(o=i.audio)||void 0===o?void 0:o.src,C,R]),c.useEffect((function(){var e,t;S.current&&S.current.setVolume(null===(e=f.alert)||void 0===e||null===(t=e.audio)||void 0===t?void 0:t.volume)}),[null===(l=f.alert)||void 0===l||null===(u=l.audio)||void 0===u?void 0:u.volume]),c.useEffect((function(){N&&setTimeout((function(){return w(!1)}),1e3)}),[N]),Object(p.jsxs)("tr",{className:"item".concat(f.enabled?"":" disabled"),onClick:function(){return m("item/".concat(f._id))},children:[Object(p.jsx)("td",{className:"play",children:Object(p.jsx)("div",{className:"inline-button",role:"button",tabIndex:0,onKeyPress:function(e){var t,n;(e.preventDefault(),e.stopPropagation(),"ENTER"===e.key)&&((null===(t=f.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src)&&V())},onClick:function(e){var t,n;e.preventDefault(),e.stopPropagation(),(null===(t=f.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src)&&V()},children:Object(p.jsx)("i",{className:T?"fas fa-pause":"fas fa-play"})})}),Object(p.jsx)("td",{className:"copy-clipboard",children:Object(p.jsx)("div",{className:"inline-button".concat(N?" active":""),role:"button",tabIndex:0,onKeyPress:function(e){var t;e.preventDefault(),e.stopPropagation(),navigator.clipboard.writeText("!sound ".concat(null===(t=f.bot)||void 0===t?void 0:t.identifier)||!1),w(!0)},onClick:function(e){var t;e.preventDefault(),e.stopPropagation(),navigator.clipboard.writeText("!sound ".concat(null===(t=f.bot)||void 0===t?void 0:t.identifier)||!1),w(!0)},children:N?Object(p.jsx)("i",{className:"fas fa-clipboard-check"}):Object(p.jsx)("i",{className:"far fa-clipboard"})})}),Object(p.jsx)("td",{className:"sound-name",children:Object(p.jsxs)("div",{className:"name-split",children:[Object(p.jsx)("div",{className:"name",children:null===(d=f.bot)||void 0===d?void 0:d.identifier}),Object(p.jsxs)("div",{className:"description",children:[f.name," - ",f.description]})]})}),Object(p.jsx)("td",{className:"cost center",children:f.cost}),Object(p.jsxs)("td",{className:"volume center",children:[Math.round(100*((null===(b=f.alert)||void 0===b||null===(j=b.audio)||void 0===j?void 0:j.volume)||0)),"%"]}),Object(p.jsx)("td",{className:"duration center",children:f.duration?"".concat(Math.round(10*f.duration)/10,"s"):Object(p.jsx)("i",{className:"fas fa-question"})}),Object(p.jsx)("td",{className:"waveform",children:Object(p.jsx)(x.WaveSurfer,{onMount:J,ref:S,children:Object(p.jsx)(x.WaveForm,{id:k,container:k,p:!0,cursorColor:"#ff000000",waveColor:"#BDBABD",progressColor:"#9a64ff",height:35,barWidth:1,barHeight:3,cursorWidth:1,hideScrollbar:!0})})}),Object(p.jsx)("td",{className:"check center enabled",children:Object(p.jsx)("i",{className:f.enabled?"fas fa-check":"fas fa-times"})}),Object(p.jsx)("td",{className:"check center subs-only",children:Object(p.jsx)("i",{className:f.subscriberOnly?"fas fa-check":"fas fa-times"})}),Object(p.jsx)("td",{className:"dateCreated center",children:f.createdAt&&Object(h.a)(new Date(f.createdAt),"dd-MM-yyyy HH:mm:ss")})]},f._id)},N=c.memo(y);var w=function(e){return"onscreensounds-".concat(e)};function C(e,t){try{var n=localStorage[w(e)];return void 0!==n?JSON.parse(n):t}catch(c){return console.error(c),t}}function k(e,t){try{localStorage[w(e)]=JSON.stringify(t)}catch(n){console.error(n)}}function S(e,t,n){var a=Object(c.useState)((function(){try{var c=window.sessionStorage.getItem(w(e));if(n&&window.sessionStorage.removeItem(w(e)),"undefined"===c&&!0!==n)return;return c&&!0!==n?JSON.parse(c):t}catch(a){return console.error(a),t}})),r=Object(v.a)(a,2),i=r[0],o=r[1];return[i,function(t){try{var n=t instanceof Function?t(i):t;o(n),window.sessionStorage.setItem(w(e),JSON.stringify(n))}catch(c){console.error(c)}}]}n(119);var I=function(e){var t=e.allItems,n=e.items,a=e.setItems,r=e.sort,i=e.setSort,o=e.resetFilters,l=Object(s.h)(),u=function(){var e=Object(c.useState)({width:void 0,height:void 0}),t=Object(v.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){function e(){a({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}().height,d=g(n.length),j=function(e){var c=(e-174-(n.length!==t.length?20:0))/40;return Math.floor(c)}(function(e,t){var n=Object(c.useState)(e),a=Object(v.a)(n,2),r=a[0],i=a[1];return Object(c.useEffect)((function(){var n=setTimeout((function(){i(e)}),t);return function(){clearTimeout(n)}}),[e,t]),r}(u,100)||980),f=S("page",1),m=Object(v.a)(f,2),h=m[0],O=m[1],x=Math.ceil(n.length/j),y=c.useState(!1),w=Object(v.a)(y,2),C=w[0],k=w[1];return c.useEffect((function(){C||d===n.length||O(1)}),[d,n.length,O,C]),Object(p.jsxs)("div",{className:"list-wrapper",children:[Object(p.jsxs)("table",{className:"item-list",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{className:"table-header",children:[Object(p.jsx)("th",{className:"play"}),Object(p.jsx)("th",{className:"copy-clipboard"}),Object(p.jsxs)("th",{className:"sound-name clickable",onClick:function(){return I("soundName")},children:["Sound name",Object(p.jsx)("i",{className:"fas fa-sort".concat("soundName"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(p.jsxs)("th",{className:"cost center clickable",onClick:function(){return I("cost")},children:["Cost",Object(p.jsx)("i",{className:"fas fa-sort".concat("cost"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(p.jsxs)("th",{className:"volume center clickable",onClick:function(){return I("volume")},children:["Volume",Object(p.jsx)("i",{className:"fas fa-sort".concat("volume"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(p.jsxs)("th",{className:"duration center clickable",onClick:function(){return I("duration")},children:["Duration",Object(p.jsx)("i",{className:"fas fa-sort".concat("duration"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(p.jsx)("th",{className:"waveform"}),Object(p.jsxs)("th",{className:"check center enabled clickable",onClick:function(){return I("enabled")},children:["Enabled",Object(p.jsx)("i",{className:"fas fa-sort".concat("enabled"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(p.jsxs)("th",{className:"check center subs-only clickable",onClick:function(){return I("subsOnly")},children:["Subs only"," ",Object(p.jsx)("i",{className:"fas fa-sort".concat("subsOnly"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(p.jsxs)("th",{className:"age center clickable",onClick:function(){return I("dateCreated")},children:["Date created",Object(p.jsx)("i",{className:"fas fa-sort".concat("dateCreated"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]})]})}),Object(p.jsx)("tbody",{children:(C?n:n.slice((h-1)*j,h*j)).map((function(e){return Object(p.jsx)(N,{item:e,setItem:E},e._id)}))})]}),Object(p.jsxs)("div",{className:"page-controller-wrapper",children:[n.length!==t.length&&Object(p.jsx)("div",{className:"filtered-warning",onClick:function(){return o()},onKeyPress:function(){return o()},tabIndex:0,role:"button",children:"Results are filtered, click here to clear filters"}),Object(p.jsx)("div",{className:"page-controller",children:C?Object(p.jsx)("button",{className:"button secondary showAll",type:"button",onClick:function(){return k(!1)},children:"Turn on pagination"}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"buttons-pages",children:[Object(p.jsx)("button",{className:"button primary small",type:"button",onClick:function(){return O(1)},disabled:1===h,children:Object(p.jsx)("i",{className:"icon fas fa-angle-double-left"})}),Object(p.jsxs)("button",{className:"button previous",type:"button",onClick:function(){return T("previous")},disabled:1===h,children:[Object(p.jsx)("i",{className:"icon fas fa-angle-left"}),"Previous page"]}),Object(p.jsxs)("div",{className:"page-summary",children:[Object(p.jsxs)("div",{className:"page-number",children:["Page ",h," of"," ",n.length<j?1:Math.ceil(n.length/j)]}),Object(p.jsxs)("div",{className:"amount-per-page",children:[n.length," results"]})]}),Object(p.jsxs)("button",{className:"button next",type:"button",onClick:function(){return T("next")},disabled:h===x,children:[Object(p.jsx)("i",{className:"icon fas fa-angle-right"}),"Next page"]}),Object(p.jsx)("button",{className:"button primary small",type:"button",onClick:function(){return O(x)},disabled:h===x,children:Object(p.jsx)("i",{className:"icon fas fa-angle-double-right"})})]}),Object(p.jsx)("button",{className:"button secondary small showAll",type:"button",onClick:function(){return k(!0)},children:"Show all"}),Object(p.jsxs)("button",{className:"button primary small with-icon-margin showAll",type:"button",onClick:function(){return l("item/new")},children:[Object(p.jsx)("i",{className:"icon fas fa-plus"}),"Add new sound"]})]})})]})]});function I(e){i({sort:e,order:r.sort===e&&"asc"===r.order?"desc":"asc"})}function E(e){var n=t.findIndex((function(t){return t._id===e._id}));if(n){var c=Object(b.a)(t);c[n]=e,a(c)}}function T(e){O("previous"===e?h-1:h+1)}};function E(e,t,n){var a=Object(c.useState)((function(){try{var c=window.localStorage.getItem(w(e));if(n&&window.localStorage.removeItem(w(e)),"undefined"===c&&!0!==n)return;return c&&!0!==n?JSON.parse(c):t}catch(a){return console.error(a),t}})),r=Object(v.a)(a,2),i=r[0],o=r[1];return[i,function(t){try{var n=t instanceof Function?t(i):t;o(n),window.localStorage.setItem(w(e),JSON.stringify(n))}catch(c){console.error(c)}}]}var T=n(94),M=(n(93),n(66)),D=n.n(M);function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";return Object(T.a)(e,(function(e){return e.sort((function(e,c){var a="asc"===n?-1:1,r="asc"===n?1:-1,i=D()(e,t),o=D()(c,t);return i&&o?i<o?a:i>o?r:0:i?-1:1}))}))}function P(e){return 0===Object.keys(e).length?"":"?".concat(Object.keys(e).reduce((function(t,n){var c=e[n];return(c||0===c||!1===c)&&t.push("".concat(n,"=").concat(encodeURIComponent(c))),t}),[]).join("&"))}n(195);var _=function(e){var t=e.query,n=e.setQuery,c=e.minVolume,a=e.setMinVolume,r=e.maxVolume,i=e.setMaxVolume,o=e.minCost,s=e.setMinCost,l=e.maxCost,u=e.setMaxCost,d=e.minSeconds,b=e.setMinSeconds,j=e.maxSeconds,v=e.setMaxSeconds;return Object(p.jsxs)("div",{className:"filter-header",children:[Object(p.jsxs)("div",{className:"filter-item",children:[Object(p.jsx)("h3",{children:"Search"}),Object(p.jsx)("input",{placeholder:"Search by sound name",value:t,onChange:function(e){return n(e.target.value)}})]}),Object(p.jsxs)("div",{className:"filter-item",children:[Object(p.jsx)("h3",{children:"Cost"}),Object(p.jsxs)("div",{className:"flex",children:[Object(p.jsx)("input",{className:(o||0)<(l||0)?"warn":"",type:"number",value:o||void 0,placeholder:"Min",min:0,max:9999999999,onChange:function(e){return s(parseInt(e.target.value,10))}}),Object(p.jsx)("input",{className:(o||0)<(l||0)?"warn":"",type:"number",value:l||void 0,placeholder:"Max",min:1,max:1e9,onChange:function(e){return u(parseInt(e.target.value,10))}})]})]}),Object(p.jsxs)("div",{className:"filter-item",children:[Object(p.jsx)("h3",{children:"Volume"}),Object(p.jsxs)("div",{className:"flex",children:[Object(p.jsx)("input",{className:(c||0)<(r||0)?"warn":"",type:"number",value:c||void 0,placeholder:"Min",min:0,max:99,onChange:function(e){return a(parseInt(e.target.value,10))}}),Object(p.jsx)("input",{className:(c||0)<(r||0)?"warn":"",type:"number",value:r||void 0,placeholder:"Max",min:1,max:100,onChange:function(e){return i(parseInt(e.target.value,10))}})]})]}),Object(p.jsxs)("div",{className:"filter-item",children:[Object(p.jsx)("h3",{children:"Duration"}),Object(p.jsxs)("div",{className:"flex",children:[Object(p.jsx)("input",{className:(d||0)<(j||0)?"warn":"",type:"number",value:d||void 0,placeholder:"Min",min:0,max:9999999999,onChange:function(e){return b(parseInt(e.target.value,10))}}),Object(p.jsx)("input",{className:(d||0)<(j||0)?"warn":"",type:"number",value:j||void 0,placeholder:"Max",min:1,max:1e9,onChange:function(e){return v(parseInt(e.target.value,10))}})]})]})]})},F=function(e){var t=e.items,n=(e.setItems,e.children),a=E("query",""),r=Object(v.a)(a,2),i=r[0],o=r[1],s=E("minVolume",void 0),l=Object(v.a)(s,2),u=l[0],d=l[1],b=E("maxVolume",void 0),j=Object(v.a)(b,2),f=j[0],m=j[1],h=E("minCost",void 0),O=Object(v.a)(h,2),x=O[0],g=O[1],y=E("maxCost",void 0),N=Object(v.a)(y,2),w=N[0],C=N[1],k=E("minSeconds",void 0),S=Object(v.a)(k,2),I=S[0],T=S[1],M=E("maxSeconds",void 0),D=Object(v.a)(M,2),P=D[0],F=D[1],R=E("sort",{sort:"dateCreated",order:"desc"}),U=Object(v.a)(R,2),J=U[0],V=U[1],L=c.useState(t),W=Object(v.a)(L,2),H=W[0],q=W[1],z=c.useCallback((function(e,t){return A(e.filter((function(e){var t,n,c,a,r,o;return(-1!==e.name.toUpperCase().indexOf(i.toUpperCase())||e.description.toUpperCase().includes(i.toUpperCase())||(null===(t=e.bot)||void 0===t||null===(n=t.identifier)||void 0===n?void 0:n.toUpperCase().includes(i.toUpperCase())))&&100*((null===(c=e.alert)||void 0===c||null===(a=c.audio)||void 0===a?void 0:a.volume)||0)>=(u||0)&&100*((null===(r=e.alert)||void 0===r||null===(o=r.audio)||void 0===o?void 0:o.volume)||0)<=(f||100)&&(e.cost||0)>=(x||0)&&(e.cost||0)<=(w||1e8)&&(e.duration||0)>=(I||0)&&(e.duration||0)<=(P||1e8)})),function(e){switch(e){case"soundName":return"bot.identifier";case"volume":return"alert.audio.volume";case"dateCreated":return"createdAt";case"duration":return"duration";default:return e}}(t.sort),t.order)}),[i,u,f,x,w,I,P]);c.useEffect((function(){q(z(t,J))}),[t,z,J]);var B=_({query:i,setQuery:o,minVolume:u,setMinVolume:d,maxVolume:f,setMaxVolume:m,minCost:x,setMinCost:g,maxCost:w,setMaxCost:C,minSeconds:I,setMinSeconds:T,maxSeconds:P,setMaxSeconds:F});return Object(p.jsx)(p.Fragment,{children:n(B,H,J,V,(function(){o(""),d(void 0),m(void 0),g(void 0),C(void 0),T(void 0),F(void 0)}))})},R="https://api.streamelements.com/kappa";function U(e,t){return fetch(e,t).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}))}var J=function(e){return{getCurrentUserChannel:function(){var t={method:"GET",headers:{Authorization:e}};return U("".concat(R,"/v2/users/current"),t)},getMeDetails:function(){var t={method:"GET",headers:{Authorization:e}};return U("".concat(R,"/v2/channels/me"),t)},getChannelItems:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,c=arguments.length>2?arguments[2]:void 0,a={method:"GET",headers:{Authorization:e}},r=P({limit:n,offset:c});return U("".concat(R,"/v2/store/").concat(t,"/items").concat(r),a)},saveChannelItem:function(t,n){var c={method:"PUT",headers:{Authorization:e,"Content-Type":"application/json"},body:JSON.stringify(n)};return U("".concat(R,"/v2/store/").concat(t,"/items/").concat(n._id),c)},createChannelItem:function(t,n){var c={method:"POST",headers:{Authorization:e,"Content-Type":"application/json"},body:JSON.stringify(n)};return U("".concat(R,"/v2/store/").concat(t,"/items"),c)},deleteChannelItem:function(t,n){var c={method:"DELETE",headers:{Authorization:e}};return fetch("".concat(R,"/v2/store/").concat(t,"/items/").concat(n),c).then((function(){}))},getUploadedItems:function(t,n,c){var a={method:"GET",headers:{Authorization:e}},r=P({limit:n,offset:c,type:"audio"});return U("".concat(R,"/v2/uploads/").concat(t).concat(r),a)},uploadFile:function(t,n,c){var a=new FormData;a.append("file",n,c);var r={method:"POST",headers:{Authorization:e},body:a};return U("".concat(R,"/v2/uploads/").concat(t),r)}}},V=a.a.createContext(null);function L(e){var t=e.children,n=a.a.useState(),c=Object(v.a)(n,2),r=c[0],i=c[1],o=E("StreamElementsJWT",null),s=Object(v.a)(o,2),l=s[0],u={user:r,setUser:i,token:l,setToken:s[1],APIService:l?J("Bearer ".concat(l)):null};return Object(p.jsx)(V.Provider,{value:u,children:t})}function W(){return a.a.useContext(V)}n(196);var H=function(){var e=W(),t=e.user,n=e.setUser,a=e.APIService,r=e.setToken,i=Object(c.useState)([]),o=Object(v.a)(i,2),u=o[0],f=o[1],m=Object(c.useState)([]),h=Object(v.a)(m,2),x=h[0],g=h[1],y=Object(c.useState)(!1),N=Object(v.a)(y,2),w=N[0],S=N[1],E=Object(c.useCallback)((function(){return D.apply(this,arguments)}),[a,n]),T=Object(c.useCallback)((function(e){return A.apply(this,arguments)}),[a]),M=Object(c.useCallback)((function(e){return P.apply(this,arguments)}),[a]);return Object(c.useEffect)((function(){E()}),[]),Object(c.useEffect)((function(){(null===t||void 0===t?void 0:t._id)?(T(t._id),M(t._id)):f([])}),[null===t||void 0===t?void 0:t._id,T,M]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"home",children:[Object(p.jsx)(O,{allItems:u,user:t,loading:w,logout:function(){return r(null)}}),Object(p.jsx)("div",{className:"content",children:Object(p.jsx)(F,{items:u,setItems:f,children:function(e,t,n,c,a){return Object(p.jsxs)(p.Fragment,{children:[e,Object(p.jsx)(I,{items:t,setItems:f,allItems:u,sort:n,setSort:c,resetFilters:a})]})}})})]}),Object(p.jsx)(s.b,{context:{items:u,files:x,setItem:function(e){var t=u.findIndex((function(t){return t._id===e._id}));if(t){var n=Object(b.a)(u);n[t]=e,f(n)}else f([].concat(Object(b.a)(u),[e]))},setFile:function(e){var t=x.findIndex((function(t){return t._id===e._id}));if(t){var n=Object(b.a)(x);n[t]=e,g(n)}else g([].concat(Object(b.a)(x),[e]))},reloadItems:function(){(null===t||void 0===t?void 0:t._id)&&(T(t._id),M(t._id))}}})]});function D(){return(D=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=15;break}return e.prev=1,S(!0),e.next=5,null===a||void 0===a?void 0:a.getMeDetails();case 5:t=e.sent,n(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:return e.prev=12,S(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})))).apply(this,arguments)}function A(){return A=Object(j.a)(d.a.mark((function e(t){var n,c,r,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=22;break}return e.prev=1,S(!0),e.next=5,null===a||void 0===a?void 0:a.getChannelItems(t);case 5:return n=e.sent,c=n,r="DURATIONS-".concat(t),i=C(r,[]),e.next=11,Promise.all(c.map(function(){var e=Object(j.a)(d.a.mark((function e(t){var n,c,a,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=null===(n=i.find((function(e){var n,c;return e.url===(null===(n=t.alert)||void 0===n||null===(c=n.audio)||void 0===c?void 0:c.src)})))||void 0===n?void 0:n.duration)){e.next=3;break}return e.abrupt("return",Object(l.a)(Object(l.a)({},t),{},{duration:r}));case 3:return e.next=5,_((null===(c=t.alert)||void 0===c||null===(a=c.audio)||void 0===a?void 0:a.src)||"");case 5:return o=e.sent,e.abrupt("return",Object(l.a)(Object(l.a)({},t),{},{duration:o||void 0}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:o=e.sent,k(r,o.map((function(e){var t,n,c,a;return(null===(t=e.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src)?{url:null===(c=e.alert)||void 0===c||null===(a=c.audio)||void 0===a?void 0:a.src,duration:e.duration}:void 0})).filter((function(e){return e}))),f(o),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.error(e.t0);case 19:return e.prev=19,S(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,16,19,22]])}))),A.apply(this,arguments)}function P(){return(P=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!t){e.next=15;break}return e.prev=1,S(!0),e.next=5,null===a||void 0===a?void 0:a.getUploadedItems(t,void 0);case 5:n=e.sent,g(n.uploads),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:return e.prev=12,S(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})))).apply(this,arguments)}function _(e){return R.apply(this,arguments)}function R(){return(R=Object(j.a)(d.a.mark((function e(t){var n,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return n=new AudioContext,e.next=4,fetch(t,{method:"GET"}).then((function(e){return e.arrayBuffer()}));case 4:return c=e.sent,e.next=7,n.decodeAudioData(c,(function(e){return e}));case 7:return a=e.sent,e.abrupt("return",a.duration);case 9:return e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},q=n(95),z=(n(197),function(){var e=W(),t=e.token,n=e.setToken,a=Object(s.h)(),r=Object(c.useState)(""),i=Object(v.a)(r,2),o=i[0],l=i[1];return Object(c.useEffect)((function(){t&&a("/")}),[]),Object(p.jsxs)("div",{className:"login-page",children:[Object(p.jsx)("h1",{className:"page-title",children:"StreamElements Sounds editor"}),Object(p.jsxs)("div",{className:"login-block",children:[Object(p.jsxs)("div",{className:"info-box warning",children:[Object(p.jsxs)("div",{className:"header",children:[Object(p.jsx)("i",{className:"fas fa-info-circle"}),Object(p.jsx)("span",{children:"Information"})]}),Object(p.jsxs)("div",{className:"content",children:[Object(p.jsx)("p",{children:"To manage sounds the tool needs your JWT (JSON web token)."}),Object(p.jsx)("p",{children:"You can find this by logging into StreamElements, clicking your image in the top right, then your username and lastly Channel Settings."}),Object(p.jsx)("p",{children:'Then toggle the "Show secrets" button, and copy the JWT in full inside the input field.'})]}),Object(p.jsx)("div",{className:"footer",children:Object(p.jsx)("span",{children:"Do not share this token!"})})]}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(o),l(""),a("/")},children:[Object(p.jsx)("input",{type:"password",value:o,onChange:function(e){return l(e.target.value)},placeholder:"JWT (JSON web token)"}),Object(p.jsxs)("div",{className:"buttons",children:[Object(p.jsx)("button",{type:"submit",children:"Login"}),Object(p.jsxs)("button",{className:"secondary",type:"button",onClick:function(){return window.open("https://streamelements.com/dashboard/account/channels","_blank")},children:[Object(p.jsx)("i",{className:"icon fas fa-external-link-square-alt"}),"StreamElements Channel Settings"]})]})]})]}),Object(p.jsxs)("div",{className:"copy",children:[Object(p.jsx)("div",{className:"who",children:"\xa9 damon02 - 2021"}),Object(p.jsxs)("div",{className:"version",children:["v",q.version]})]})]})}),B=n(217),K=n(218),G=n(99),Q=function(e){var t=e.id,n=e.label,c=e.additionalLabel,a=e.type,r=e.subtitle,i=e.value,o=e.onChange,s=e.placeholder,l=e.allowsMin;return Object(p.jsxs)("div",{className:"item-wrapper",id:t,children:[(n||c)&&Object(p.jsxs)("label",{children:[n,c]}),"input large"===a?Object(p.jsx)("input",{className:"input large",value:i,onChange:function(e){return o(e.target.value)},placeholder:s}):"textarea"===a?Object(p.jsx)("textarea",{value:i,onChange:function(e){return o(e.target.value)},placeholder:s}):"input number"===a?Object(p.jsx)("input",{value:i,type:"number",onChange:function(e){var t=e.target.value?parseInt(e.target.value,10):0;o(t>999999999?999999999:!l&&t<0?0:t)},placeholder:s,min:l||0,max:999999999}):Object(p.jsx)("input",{value:i,onChange:function(e){return o(e.target.value)},placeholder:s}),r&&Object(p.jsx)("label",{className:"subtitle",children:r})]})};function Y(e,t){Object(c.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}var X=function(e){var t=e.item,n=e.selectedFile,a=e.handleOnClick,r=c.useState(!1),i=Object(v.a)(r,2),o=i[0],s=i[1];return Object(p.jsxs)("tr",{className:"file-row".concat((null===n||void 0===n?void 0:n._id)===t._id?" active":""),onClick:function(){return a(t)},children:[Object(p.jsx)("td",{className:"play",children:Object(p.jsx)("div",{className:"play-button",role:"button",tabIndex:0,onKeyPress:function(e){e.preventDefault(),e.stopPropagation(),"ENTER"===e.key&&t.url&&l(t.url)},onClick:function(e){e.preventDefault(),e.stopPropagation(),t.url&&l(t.url)},children:Object(p.jsx)("i",{className:o?"fas fa-pause":"fas fa-play"})})}),Object(p.jsx)("td",{className:"sound-name",children:t.name}),Object(p.jsxs)("td",{className:"dateCreated center",children:[Object(p.jsx)("div",{children:t.createdAt&&Object(h.a)(new Date(t.createdAt),"dd-MM-yyyy")}),Object(p.jsx)("div",{children:t.createdAt&&Object(h.a)(new Date(t.createdAt),"HH:mm:ss")})]})]},t._id);function l(e){return u.apply(this,arguments)}function u(){return u=Object(j.a)(d.a.mark((function e(t){var n,c,a,r=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:1,(c=new Audio(t)).volume=n,s(!0),e.prev=4,e.next=7,c.play();case 7:a=c.duration,setTimeout((function(){return s(!1)}),1e3*a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),u.apply(this,arguments)}},Z=c.memo(X),$=function(e){var t=e.files,n=e.selectedFile,r=e.setSelectedFile,i=e.fileInputRef,o=e.item,s=e.volume,l=Object(c.useState)(!1),u=Object(v.a)(l,2),d=u[0],b=u[1],j=Object(c.useState)(0),f=Object(v.a)(j,2),m=f[0],h=f[1],O=Object(c.useState)(!1),g=Object(v.a)(O,2),y=g[0],N=g[1],w=Object(c.useState)(""),C=Object(v.a)(w,2),k=C[0],S=C[1],I=Object(c.useState)(null),E=Object(v.a)(I,2),T=E[0],M=E[1],D=a.a.useRef(null),P=a.a.useCallback((function(e){D.current=e,D.current&&"new"!==n&&(null===n||void 0===n?void 0:n.url)&&(D.current.load(null===n||void 0===n?void 0:n.url),D.current.on("play",(function(){b(!0)})),D.current.on("pause",(function(){b(!1)})),D.current.on("finish",(function(){b(!1)})),D.current.on("seek",(function(){h(D.current.getCurrentTime())})),D.current.on("audioprocess",(function(){h(D.current.getCurrentTime())})))}),[n]),_=a.a.useRef(null);Y(_,(function(){return N(!1)}));var F=a.a.useCallback((function(){D.current.playPause()}),[]);return Object(c.useEffect)((function(){D.current&&D.current.setVolume(s)}),[s]),Object(c.useEffect)((function(){D.current&&"new"!==n&&(null===n||void 0===n?void 0:n.url)&&D.current.load(null===n||void 0===n?void 0:n.url)}),[n]),Object(c.useEffect)((function(){k&&0!==k.length||M(null);var e=t.filter((function(e){return e.name.toUpperCase().includes(k.toUpperCase())}));M(A(e,"dateCreated"))}),[k,t]),n&&"new"!==n?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"item-wrapper file",children:[Object(p.jsx)("button",{className:"button small secondary",type:"button",onClick:function(){return r(void 0)},children:Object(p.jsx)("i",{className:"icon fas fa-times"})}),Object(p.jsxs)("div",{className:"file-tag",children:[Object(p.jsx)("button",{className:"play-button",type:"button",onClick:function(e){var t,n;e.preventDefault(),e.stopPropagation(),(null===o||void 0===o||null===(t=o.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src)&&F()},children:d?Object(p.jsx)("i",{className:"fas fa-pause"}):Object(p.jsx)("i",{className:"fas fa-play"})}),Object(p.jsxs)("div",{className:"detail-rows",children:[Object(p.jsxs)("div",{className:"name",children:[Object(p.jsx)("i",{className:"icon fas fa-file-audio"}),Object(p.jsx)("span",{className:"subtitle",children:null===n||void 0===n?void 0:n.name})]}),Object(p.jsxs)("div",{className:"duration",children:[Object(p.jsx)("i",{className:"icon fas fa-music"}),(null===o||void 0===o?void 0:o.duration)?"".concat(0!==m&&Math.round(10*m)/10!==Math.round(10*(null===o||void 0===o?void 0:o.duration))/10?"".concat(Math.round(10*m)/10,"s / "):"").concat(Math.round(10*o.duration)/10,"s"):Object(p.jsx)("i",{className:"fas fa-spin fa-spinner"})]})]}),n&&Object(p.jsx)("div",{className:"waveform",children:Object(p.jsx)(x.WaveSurfer,{onMount:P,ref:D,children:Object(p.jsx)(x.WaveForm,{id:"waveform-".concat(null===n||void 0===n?void 0:n._id),container:"waveform-".concat(null===n||void 0===n?void 0:n._id),p:!0,cursorColor:"#ff000000",waveColor:"#BDBABD",progressColor:"#FFFFFF",height:35,barWidth:1,barHeight:3,cursorWidth:1,hideScrollbar:!0})})})]}),Object(p.jsx)("button",{className:"button secondary",type:"button",onClick:function(){return N(!y)},children:y?"Hide files":"Show files"})]}),y&&Object(p.jsxs)("div",{className:"file-list",ref:_,children:[Object(p.jsxs)("div",{className:"search-header",children:[Object(p.jsx)("input",{placeholder:"Search by sound name",value:k,onChange:function(e){return S(e.target.value)}}),(null===T||void 0===T?void 0:T.length)?"".concat(T.length," results"):"Showing all ".concat(t.length," files")]}),(T||t).map((function(e){return Object(p.jsx)(Z,{item:e,selectedFile:n,handleOnClick:function(e){return r(e)}},e._id)}))]})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"item-wrapper file",children:[Object(p.jsx)("div",{className:"file-tag drop",children:Object(p.jsx)("input",{type:"file",id:"sound",name:"sound",accept:"audio/mp3,audio/aac,audio/wav,audio/ogg",ref:i,onChange:function(){return r("new")}})}),Object(p.jsx)("button",{className:"button secondary",type:"button",onClick:function(){return N(!y)},children:y?"Hide files":"Show files"})]}),y&&Object(p.jsxs)("div",{className:"file-list",children:[Object(p.jsxs)("div",{className:"search-header",children:[Object(p.jsx)("input",{placeholder:"Search by sound name",value:k,onChange:function(e){return S(e.target.value)}}),(null===T||void 0===T?void 0:T.length)?"".concat(T.length," results"):"Showing all ".concat(t.length," files")]}),(T||t).map((function(e){return Object(p.jsx)(Z,{item:e,selectedFile:"new"===n?void 0:n,handleOnClick:function(e){return r(e)}},e._id)}))]})]})};n(210),n(211);var ee=function(e){var t=e.api,n=e.channelId,r=e.itemId,i=e.showPrompt,o=e.setShowPrompt,s=e.onDelete,u=Object(c.useState)(!1),b=Object(v.a)(u,2),h=b[0],O=b[1],x=Object(c.useState)(),g=Object(v.a)(x,2),y=g[0],N=g[1],w=Object(f.useSpring)({opacity:i?1:0,transform:i?"scale(1)":"scale(0)",config:{duration:250,easing:m.a}}),C=a.a.useRef(null);return Y(C,(function(){return o(!1)})),Object(p.jsx)(f.animated.div,{className:"delete-background",style:Object(l.a)({},w),children:Object(p.jsxs)(f.animated.div,{className:"delete-inner",style:Object(l.a)({},w),ref:C,children:[y&&Object(p.jsx)("div",{className:"error",children:y}),Object(p.jsx)("div",{className:"are-you-sure",children:"Are you sure you want to delete this sound?"}),Object(p.jsxs)("div",{className:"buttons",children:[Object(p.jsx)("button",{className:"button-menu danger",type:"button",disabled:h,onClick:function(){return function(){return k.apply(this,arguments)}()},children:h?Object(p.jsx)("i",{className:"fas fa-spin fa-circle-notch"}):"Delete sound"}),Object(p.jsx)("button",{className:"button-menu secondary",type:"button",onClick:function(){return o(!1)},children:"No"})]})]})});function k(){return(k=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&r){e.next=3;break}return N("Channel ID or Item ID is missing"),e.abrupt("return");case 3:return e.prev=3,O(!0),N(void 0),e.next=8,null===t||void 0===t?void 0:t.deleteChannelItem(n,r);case 8:s(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0),N("An unknown error occurred while trying to communicate to StreamElements :(");case 15:return e.prev=15,O(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,11,15,18]])})))).apply(this,arguments)}},te=function(){var e,t,n,r,i,o,u,b,f=Object(s.h)(),m=W(),h=m.APIService,O=m.user,x=Object(s.j)().itemId,g=Object(s.i)(),y=g.items,N=g.files,w=g.setItem,C=g.reloadItems,k=Object(c.useState)(!1),I=Object(v.a)(k,2),E=I[0],T=I[1],M=Object(c.useState)(!1),D=Object(v.a)(M,2),A=D[0],P=D[1],_=y.find((function(e){return e._id===x})),F=(null===_||void 0===_?void 0:_._id)||"new",R=S("enabled-".concat(F),void 0===(null===_||void 0===_?void 0:_.enabled)||_.enabled),U=Object(v.a)(R,2),J=U[0],V=U[1],L=S("name-".concat(F),(null===_||void 0===_?void 0:_.name)||""),H=Object(v.a)(L,2),q=H[0],z=H[1],X=S("description-".concat(F),(null===_||void 0===_?void 0:_.description)||""),Z=Object(v.a)(X,2),te=Z[0],ne=Z[1],ce=S("cost-".concat(F),(null===_||void 0===_?void 0:_.cost)||10),ae=Object(v.a)(ce,2),re=ae[0],ie=ae[1],oe=S("quantity-".concat(F),(null===_||void 0===_?void 0:_.quantity.total)||-1),se=Object(v.a)(oe,2),le=se[0],ue=se[1],de=S("globalCooldown-".concat(F),(null===_||void 0===_||null===(e=_.cooldown)||void 0===e?void 0:e.global)||0),be=Object(v.a)(de,2),je=be[0],ve=be[1],fe=S("userCooldown-".concat(F),(null===_||void 0===_||null===(t=_.cooldown)||void 0===t?void 0:t.user)||10),me=Object(v.a)(fe,2),he=me[0],pe=me[1],Oe=S("categoryCooldownName-".concat(F),(null===_||void 0===_?void 0:_.categoryName)||""),xe=Object(v.a)(Oe,2),ge=xe[0],ye=xe[1],Ne=S("categoryCooldownTime-".concat(F),(null===_||void 0===_||null===(n=_.cooldown)||void 0===n?void 0:n.category)||0),we=Object(v.a)(Ne,2),Ce=we[0],ke=we[1],Se=S("volume-".concat(F),(null===_||void 0===_||null===(r=_.alert)||void 0===r||null===(i=r.audio)||void 0===i?void 0:i.volume)||1),Ie=Object(v.a)(Se,2),Ee=Ie[0],Te=Ie[1],Me=S("command-".concat(F),(null===_||void 0===_||null===(o=_.bot)||void 0===o?void 0:o.identifier)||""),De=Object(v.a)(Me,2),Ae=De[0],Pe=De[1],_e=Object(c.useState)(),Fe=Object(v.a)(_e,2),Re=Fe[0],Ue=Fe[1],Je=Object(c.useRef)(null),Ve=S("redeemables-".concat(F),{website:!1,extension:!1,bot:!0,confirmation:!0}),Le=Object(v.a)(Ve,2),We=Le[0],He=Le[1],qe=a.a.useRef(null);Y(qe,A?function(){return{}}:Be),Object(c.useEffect)((function(){var e,t,n,c,a,r,i;_&&(V(_.enabled),z(_.name),ne(_.description),ie(_.cost),ue(_.quantity.total),ve((null===(e=_.cooldown)||void 0===e?void 0:e.global)||0),pe((null===(t=_.cooldown)||void 0===t?void 0:t.user)||0),ye((null===_||void 0===_?void 0:_.categoryName)||""),ke((null===_||void 0===_||null===(n=_.cooldown)||void 0===n?void 0:n.category)||0),Te((null===_||void 0===_||null===(c=_.alert)||void 0===c||null===(a=c.audio)||void 0===a?void 0:a.volume)||1),He({website:(null===_||void 0===_?void 0:_.sources.includes("website"))||!1,extension:(null===_||void 0===_?void 0:_.sources.includes("extension"))||!1,bot:(null===_||void 0===_?void 0:_.sources.includes("bot"))||!0,confirmation:(null===_||void 0===_||null===(r=_.bot)||void 0===r?void 0:r.sendResponse)||!0}),Pe((null===(i=_.bot)||void 0===i?void 0:i.identifier)||""))}),[_]),Object(c.useEffect)((function(){var e=N.find((function(e){var t,n;return e.url===(null===_||void 0===_||null===(t=_.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src)}));Ue(e)}),[N,_]);var ze=function(){var e,t,n,c,a,r;return"new"!==Re&&(null===Re||void 0===Re?void 0:Re.url)!==(null===_||void 0===_||null===(e=_.alert)||void 0===e||null===(t=e.audio)||void 0===t?void 0:t.src)||J!==(null===_||void 0===_?void 0:_.enabled)&&void 0!==(null===_||void 0===_?void 0:_.enabled)||q!==(null===_||void 0===_?void 0:_.name)||te!==(null===_||void 0===_?void 0:_.description)||re!==(null===_||void 0===_?void 0:_.cost)||le!==(null===_||void 0===_?void 0:_.quantity.total)||je!==(null===(n=_.cooldown)||void 0===n?void 0:n.global)||he!==_.cooldown.user||ge!==_.categoryName||Ce!==_.cooldown.category||Ee!==(null===(c=_.alert)||void 0===c||null===(a=c.audio)||void 0===a?void 0:a.volume)||Ae!==(null===(r=_.bot)||void 0===r?void 0:r.identifier)}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ee,{api:h,channelId:null===O||void 0===O?void 0:O._id,itemId:F,showPrompt:A,setShowPrompt:P,onDelete:function(){return Be()}}),Object(p.jsx)("div",{className:"item-details-wrapper",children:Object(p.jsxs)("div",{className:"floating-block",ref:qe,children:[Object(p.jsxs)("div",{className:"content left",children:[Object(p.jsx)(Q,{label:"Item name",type:"input large",subtitle:"This will be presented to the chat",value:q,onChange:function(e){return z(e)}}),Object(p.jsxs)("div",{className:"item-wrapper checkbox",onClick:function(){return V(!J)},onKeyPress:function(){return V(!J)},tabIndex:0,role:"button",children:[Object(p.jsx)("input",{type:"checkbox",checked:J,onClick:function(){return V(!J)}}),Object(p.jsx)("label",{children:"Enabled"})]}),Object(p.jsx)(Q,{label:"Description",type:"textarea",subtitle:"Only visible in StreamElements.",value:te,onChange:function(e){return ne(e)}}),Object(p.jsxs)("div",{className:"flex",children:[Object(p.jsx)(Q,{label:"Item cost",type:"input number",subtitle:"Cost of this item in points",value:re,onChange:function(e){return ie(e)}}),Object(p.jsx)(Q,{label:"Quantity",type:"input number",subtitle:"-1 for unlimited amount",value:le,allowsMin:-1,onChange:function(e){return ue(e)}})]}),Object(p.jsxs)("div",{className:"flex",children:[Object(p.jsx)(Q,{label:"Global cooldown",type:"input number",subtitle:"In seconds, (".concat(je?Object(B.a)(Object(K.a)({start:0,end:1e3*(je||.01)}),{format:["years","days","hours","minutes","seconds"]}):"?",")"),value:je,onChange:function(e){return ve(e)}}),Object(p.jsx)(Q,{label:"User cooldown",type:"input number",subtitle:"In seconds, (".concat(he?Object(B.a)(Object(K.a)({start:0,end:1e3*(he||0)}),{format:["years","days","hours","minutes","seconds"]}):"?",")"),value:he,onChange:function(e){return pe(e)}})]}),Object(p.jsxs)("div",{className:"flex item-wrapper",children:[Object(p.jsx)("label",{children:"Category cooldown"}),Object(p.jsx)("label",{className:"toptitle",children:"A user is blocked from purchasing items from the same category during the cool down period."}),Object(p.jsxs)("div",{className:"flex",children:[Object(p.jsx)(Q,{type:"input",placeholder:"Name",value:ge,onChange:function(e){return ye(e)}}),Object(p.jsx)(Q,{type:"input number",placeholder:"Time in seconds",value:Ce,onChange:function(e){return ke(e)},subtitle:"In seconds, (".concat(Ce?Object(B.a)(Object(K.a)({start:0,end:1e3*(Ce||0)}),{format:["years","days","hours","minutes","seconds"]}):"?",")")})]})]})]}),Object(p.jsxs)("div",{className:"content right",children:[Object(p.jsx)($,{files:N,item:_,selectedFile:Re,setSelectedFile:Ue,volume:Ee,fileInputRef:Je}),Object(p.jsxs)("div",{className:"item-wrapper volume",children:[Object(p.jsxs)("label",{children:["Volume (",Math.round(100*(Ee||0)),"%)"]}),Object(p.jsx)(G.a,{value:Ee,onChange:function(e){return Te(e)},min:0,max:1,step:.01,handleStyle:{height:24,width:24,marginTop:-7,backgroundColor:"#6441a5",borderColor:"#9a64ff"},railStyle:{backgroundColor:"#282a36",height:10},trackStyle:{backgroundColor:"#9a64ff",height:10}})]}),Object(p.jsxs)("div",{className:"item-wrapper checkbox",onClick:function(){return He(Object(l.a)(Object(l.a)({},We),{},{website:!We.website}))},onKeyPress:function(){return He(Object(l.a)(Object(l.a)({},We),{},{website:!We.website}))},tabIndex:0,role:"button",children:[Object(p.jsx)("input",{type:"checkbox",checked:We.website,onClick:function(){return He(Object(l.a)(Object(l.a)({},We),{},{website:!We.website}))}}),Object(p.jsx)("label",{children:"Redeemable via website"})]}),Object(p.jsxs)("div",{className:"item-wrapper checkbox",onClick:function(){return He(Object(l.a)(Object(l.a)({},We),{},{extension:!We.extension}))},onKeyPress:function(){return He(Object(l.a)(Object(l.a)({},We),{},{extension:!We.extension}))},tabIndex:0,role:"button",children:[Object(p.jsx)("input",{type:"checkbox",checked:We.extension,onClick:function(){return He(Object(l.a)(Object(l.a)({},We),{},{extension:!We.extension}))}}),Object(p.jsx)("label",{children:"Redeemable via extension"})]}),Object(p.jsxs)("div",{className:"item-wrapper checkbox",onClick:function(){return He(Object(l.a)(Object(l.a)({},We),{},{bot:!We.bot}))},onKeyPress:function(){return He(Object(l.a)(Object(l.a)({},We),{},{bot:!We.bot}))},tabIndex:0,role:"button",children:[Object(p.jsx)("input",{type:"checkbox",checked:We.bot,onClick:function(){return He(Object(l.a)(Object(l.a)({},We),{},{bot:!We.bot}))}}),Object(p.jsx)("label",{children:"Redeemable via chat"})]}),Object(p.jsxs)("div",{className:"item-wrapper checkbox",onClick:function(){return He(Object(l.a)(Object(l.a)({},We),{},{confirmation:!We.confirmation}))},onKeyPress:function(){return He(Object(l.a)(Object(l.a)({},We),{},{confirmation:!We.confirmation}))},tabIndex:0,role:"button",children:[Object(p.jsx)("input",{type:"checkbox",checked:We.confirmation,onClick:function(){return He(Object(l.a)(Object(l.a)({},We),{},{confirmation:!We.confirmation}))}}),Object(p.jsx)("label",{children:"Send confirmation when redeeming via chat"})]}),Object(p.jsx)(Q,{type:"input",value:Ae,onChange:function(e){return Pe(e)},label:"Item chat command",subtitle:'To play, type "!sound '.concat(Ae,'" in the chat')}),Object(p.jsxs)("div",{className:"buttons",children:[(null===_||void 0===_||null===(u=_.alert)||void 0===u||null===(b=u.audio)||void 0===b?void 0:b.src)&&Object(p.jsx)("button",{className:"button secondary",type:"button",disabled:E,onClick:function(){return Be()},children:"Cancel changes"}),"new"===F?Object(p.jsx)("button",{className:"button primary",type:"button",disabled:void 0===Re,onClick:function(){return Ke()},children:E?Object(p.jsx)("i",{className:"fas fa-spin fa-spinner"}):"Upload new sound"}):Object(p.jsx)("button",{className:"button primary",type:"button",disabled:!ze,onClick:function(){return Ke()},children:E?Object(p.jsx)("i",{className:"fas fa-spin fa-spinner"}):"Change sound"})]}),"new"!==F&&Object(p.jsx)("div",{className:"buttons",children:Object(p.jsx)("button",{className:"button danger",type:"button",onClick:function(){return P(!0)},children:"Delete sound"})})]})]})})]});function Be(){f("/")}function Ke(){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(j.a)(d.a.mark((function e(){var t,n,c,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===Je||void 0===Je||null===(t=Je.current)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0],!(O&&h&&r)){e.next=12;break}return e.prev=2,e.next=5,h.uploadFile(O._id,r);case 5:Qe(e.sent),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:if((null===_||void 0===_||null===(c=_.alert)||void 0===c||null===(a=c.audio)||void 0===a?void 0:a.src)||!Re||"new"===Re){e.next=17;break}return e.next=15,Qe(Re);case 15:e.next=19;break;case 17:return e.next=19,Xe();case 19:"new"===F&&et(),C();case 21:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Qe(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(j.a)(d.a.mark((function e(t){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(O&&h&&t)){e.next=17;break}return e.prev=1,T(!0),n=$e(void 0,t),e.next=6,h.createChannelItem(O._id,Object(l.a)(Object(l.a)({},n),{},{accessCodes:{keys:[],mode:"multi"},accessLevel:100,allowMessages:!1}));case 6:c=e.sent,w(c),Be(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:return e.prev=14,T(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function Xe(){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(O&&h&&_)){e.next=17;break}return e.prev=1,T(!0),t=$e(_),e.next=6,null===h||void 0===h?void 0:h.saveChannelItem(O._id,t);case 6:n=e.sent,w(n),Be(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:return e.prev=14,T(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function $e(e,t){var n=Object(l.a)(Object(l.a)({},e),{},{name:q,description:te,cost:re,quantity:{total:le},cooldown:Object(l.a)(Object(l.a)({},null===e||void 0===e?void 0:e.cooldown),{},{category:Ce,global:je,user:he}),categoryName:ge,sources:[We.bot?"bot":void 0,We.extension?"extension":void 0,We.website?"website":void 0].filter((function(e){return e})),alert:Object(l.a)(Object(l.a)({},null===e||void 0===e?void 0:e.alert),{},{enabled:!0,graphics:{duration:8,type:"image"},audio:{id:null===t||void 0===t?void 0:t._id,name:null===t||void 0===t?void 0:t.name,src:(null===t||void 0===t?void 0:t.url)?t.url:"new"!==Re?null===Re||void 0===Re?void 0:Re.url:void 0,type:"sound",volume:Ee}}),bot:{sendResponse:We.confirmation||!1,identifier:Ae},enabled:J,channel:null===O||void 0===O?void 0:O._id,subscriberOnly:!0,featured:(null===e||void 0===e?void 0:e.enabled)||!1,type:"effect",userInput:[],accessLevel:100});return delete n.duration,n}function et(){z(""),ne(""),ie(10),ue(-1),ve(0),pe(0),ye(""),ke(0),Te(1),He({website:!1,extension:!1,bot:!0,confirmation:!0}),Pe("")}},ne=function(e){var t=e.children,n=W(),c=Object(s.g)();return(null===n||void 0===n?void 0:n.token)?t:Object(p.jsx)(s.a,{to:"/login",state:{from:c}})};n(212);var ce=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)(s.e,{children:[Object(p.jsx)(s.c,{path:"/",element:Object(p.jsx)(ne,{children:Object(p.jsx)(H,{})}),children:Object(p.jsx)(s.c,{path:"item/",element:Object(p.jsx)(te,{}),children:Object(p.jsx)(s.c,{path:":itemId",element:Object(p.jsx)(te,{})})})}),Object(p.jsx)(s.c,{index:!1,path:"login",element:Object(p.jsx)(z,{})})]})})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,220)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};n(213),n(214);i.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(o.a,{children:Object(p.jsx)(L,{children:Object(p.jsx)(ce,{})})})}),document.getElementById("root")),ae()},95:function(e){e.exports=JSON.parse('{"name":"onscreen-sounds","version":"1.0.0","homepage":"https://damon02.github.io/streamelements-store-manager","private":true,"dependencies":{"@types/d3-ease":"3.0.0","d3-ease":"3.0.1","date-fns":"2.27.0","immer":"9.0.6","lodash":"4.17.21","node-sass":"6.0.1","rc-slider":"9.7.5","react":"17.0.2","react-dom":"17.0.2","react-router":"6.2.1","react-router-dom":"6.2.1","react-scripts":"4.0.3","react-spring":"9.3.0","typescript":"4.4.4","wavesurfer-react":"2.0.11","wavesurfer.js":"4.6.0","web-vitals":"1.1.2"},"devDependencies":{"@testing-library/jest-dom":"5.15.0","@testing-library/react":"11.2.7","@testing-library/user-event":"12.8.3","@types/date-fns":"2.6.0","@types/jest":"26.0.24","@types/lodash":"4.14.176","@types/node":"12.20.37","@types/react":"17.0.34","@types/react-dom":"17.0.11","eslint":"7.31.0","eslint-config-airbnb":"18.2.1","eslint-config-airbnb-typescript":"12.3.1","eslint-config-prettier":"8.3.0","eslint-config-react-app":"6.0.0","eslint-import-resolver-typescript":"2.4.0","eslint-loader":"4.0.2","eslint-plugin-deprecation":"1.2.1","eslint-plugin-import":"2.23.4","eslint-plugin-jest":"24.3.6","eslint-plugin-jsx-a11y":"6.4.1","eslint-plugin-prettier":"3.4.0","eslint-plugin-react":"7.24.0","eslint-plugin-react-hooks":"4.2.0","prettier":"2.3.1","prettier-eslint":"12.0.0","prettier-eslint-cli":"5.0.1"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","lint":"eslint --ext .js,.jsx,.ts,.tsx src --color && npm run prettier-check","prettier-check":"prettier --check --config ./.prettierrc \\"./src/**/*.ts\\" \\"./src/**/*.tsx\\"","prettier-format-all":"prettier --write --config ./.prettierrc \\"./src/**/*.ts\\" \\"./src/**/*.tsx\\""},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"pre-commit":["prettier-check"]}')}},[[215,1,2]]]);
//# sourceMappingURL=main.d87015f8.chunk.js.map