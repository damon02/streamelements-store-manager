(this["webpackJsonponscreen-sounds"]=this["webpackJsonponscreen-sounds"]||[]).push([[0],{105:function(e,t,n){},118:function(e,t,n){},194:function(e,t,n){},195:function(e,t,n){},196:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(20),s=n.n(r),i=n(26),o=n(8),l=n(3),u=n(16),d=n.n(u),b=n(15),j=n(21),m=n(4),f=n(64),v=n(215),h=(n(105),n(2)),p=function(e){var t=e.user,n=(e.loading,e.logout),a=c.useState(!1),r=Object(m.a)(a,2),s=r[0],i=r[1],o=null===t||void 0===t?void 0:t.displayName,u=Object(f.useSpring)({opacity:s?1:0,transform:s?"translateY(0%) translateX(0%) scale(1)":"translateY(-100%) translateX(50%) scale(0)",config:{duration:250,easing:v.a}});return Object(h.jsxs)("div",{className:"header-app",children:[Object(h.jsx)("div",{className:"title",children:Object(h.jsx)("h1",{children:"StreamElements Sounds editor"})}),Object(h.jsx)("div",{className:"buttons",children:Object(h.jsxs)("div",{className:"button-user".concat(s?" active":""),role:"button",onKeyPress:function(e){return"enter"===e.key?i(!s):{}},onClick:function(){return i(!s)},tabIndex:0,children:[Object(h.jsx)("div",{className:"user-image",style:{backgroundImage:"url(".concat(null===t||void 0===t?void 0:t.avatar,")")}}),Object(h.jsx)("div",{className:"name",children:o||Object(h.jsx)("i",{className:"fas fa-spin fa-spinner"})}),Object(h.jsx)("div",{className:"triangle",children:Object(h.jsx)("i",{className:"fas fa-caret-down"})})]})}),Object(h.jsx)(f.animated.div,{className:"user-menu",style:Object(l.a)({},u),children:Object(h.jsx)("button",{className:"button-menu danger",type:"button",onClick:function(){return n()},children:"Log out"})})]})},O=n(33),x=n(218),g=function(e){var t,n,a,r,s,i,l,u=e.item,d=(e.setItem,Object(o.h)()),b="waveform-".concat(u._id),j=c.useRef(null),f=c.useState(!1),v=Object(m.a)(f,2),p=v[0],g=v[1],y=c.useState(0),N=Object(m.a)(y,2),w=(N[0],N[1]),C=c.useCallback((function(e){var t,n,c,a;(j.current=e,j.current&&(null===(t=u.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src))&&(j.current.load(null===(c=u.alert)||void 0===c||null===(a=c.audio)||void 0===a?void 0:a.src),j.current.on("play",(function(){g(!0)})),j.current.on("pause",(function(){g(!1)})),j.current.on("finish",(function(){g(!1)})),j.current.on("seek",(function(){w(j.current.getCurrentTime())})),j.current.on("audioprocess",(function(){w(j.current.getCurrentTime())})))}),[null===(t=u.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src]),k=c.useCallback((function(){j.current.playPause()}),[]);return c.useEffect((function(){var e,t;j.current&&j.current.setVolume(null===(e=u.alert)||void 0===e||null===(t=e.audio)||void 0===t?void 0:t.volume)}),[null===(a=u.alert)||void 0===a||null===(r=a.audio)||void 0===r?void 0:r.volume]),Object(h.jsxs)("tr",{className:"item",onClick:function(){return d("item/".concat(u._id))},children:[Object(h.jsx)("td",{className:"play",children:Object(h.jsx)("div",{className:"play-button",role:"button",tabIndex:0,onKeyPress:function(e){var t,n;(e.preventDefault(),e.stopPropagation(),"ENTER"===e.key)&&((null===(t=u.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src)&&k())},onClick:function(e){var t,n;e.preventDefault(),e.stopPropagation(),(null===(t=u.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src)&&k()},children:Object(h.jsx)("i",{className:p?"fas fa-pause":"fas fa-play"})})}),Object(h.jsx)("td",{className:"sound-name",children:Object(h.jsxs)("div",{className:"name-split",children:[Object(h.jsx)("div",{className:"name",children:null===(s=u.bot)||void 0===s?void 0:s.identifier}),Object(h.jsxs)("div",{className:"description",children:[u.name," - ",u.description]})]})}),Object(h.jsx)("td",{className:"cost center",children:u.cost}),Object(h.jsxs)("td",{className:"volume center",children:[Math.round(100*((null===(i=u.alert)||void 0===i||null===(l=i.audio)||void 0===l?void 0:l.volume)||0)),"%"]}),Object(h.jsx)("td",{className:"duration center",children:u.duration?"".concat(Math.round(10*u.duration)/10,"s"):Object(h.jsx)("i",{className:"fas fa-question"})}),Object(h.jsx)("td",{className:"waveform",children:Object(h.jsx)(O.WaveSurfer,{onMount:C,ref:j,children:Object(h.jsx)(O.WaveForm,{id:b,container:b,p:!0,cursorColor:"#ff000000",waveColor:"#BDBABD",progressColor:"#9a64ff",height:35,barWidth:1,barHeight:3,cursorWidth:1,hideScrollbar:!0})})}),Object(h.jsx)("td",{className:"check center enabled",children:Object(h.jsx)("i",{className:u.enabled?"fas fa-check":"fas fa-times"})}),Object(h.jsx)("td",{className:"check center subs-only",children:Object(h.jsx)("i",{className:u.subscriberOnly?"fas fa-check":"fas fa-times"})}),Object(h.jsx)("td",{className:"dateCreated center",children:Object(x.a)(new Date(u.createdAt),"dd-MM-yyyy HH:mm:ss")})]},u._id)},y=c.memo(g);n(118);var N=function(e){var t=e.allItems,n=e.items,a=e.setItems,r=e.sort,s=e.setSort,i=e.resetFilters,o=function(){var e=Object(c.useState)({width:void 0,height:void 0}),t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){function e(){a({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}().height,l=function(e){var t=Object(c.useRef)();return Object(c.useEffect)((function(){t.current=e}),[e]),t.current}(n.length),u=function(e){var c=(e-174-(n.length!==t.length?20:0))/40;return Math.floor(c)}(function(e,t){var n=Object(c.useState)(e),a=Object(m.a)(n,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){var n=setTimeout((function(){s(e)}),t);return function(){clearTimeout(n)}}),[e,t]),r}(o,100)||980),d=function(e,t,n){var a=function(e){return"onscreensounds-".concat(e)},r=Object(c.useState)((function(){try{var c=window.sessionStorage.getItem(a(e));return n&&window.sessionStorage.removeItem(a(e)),c&&!0!==n?JSON.parse(c):t}catch(r){return console.error(r),t}})),s=Object(m.a)(r,2),i=s[0],o=s[1];return[i,function(t){try{var n=t instanceof Function?t(i):t;o(n),window.sessionStorage.setItem(a(e),JSON.stringify(n))}catch(c){console.error(c)}}]}("page",1),j=Object(m.a)(d,2),f=j[0],v=j[1],p=Math.ceil(n.length/u),O=c.useState(!1),x=Object(m.a)(O,2),g=x[0],N=x[1];return c.useEffect((function(){g||l===n.length||v(1)}),[l,n.length,v,g]),Object(h.jsxs)("div",{className:"list-wrapper",children:[Object(h.jsxs)("table",{className:"item-list",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{className:"table-header",children:[Object(h.jsx)("th",{className:"play"}),Object(h.jsxs)("th",{className:"sound-name clickable",onClick:function(){return w("soundName")},children:["Sound name",Object(h.jsx)("i",{className:"fas fa-sort".concat("soundName"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(h.jsxs)("th",{className:"cost center clickable",onClick:function(){return w("cost")},children:["Cost",Object(h.jsx)("i",{className:"fas fa-sort".concat("cost"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(h.jsxs)("th",{className:"volume center clickable",onClick:function(){return w("volume")},children:["Volume",Object(h.jsx)("i",{className:"fas fa-sort".concat("volume"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(h.jsxs)("th",{className:"duration center clickable",onClick:function(){return w("duration")},children:["Duration",Object(h.jsx)("i",{className:"fas fa-sort".concat("duration"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(h.jsx)("th",{className:"waveform"}),Object(h.jsxs)("th",{className:"check center enabled clickable",onClick:function(){return w("enabled")},children:["Enabled",Object(h.jsx)("i",{className:"fas fa-sort".concat("enabled"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(h.jsxs)("th",{className:"check center subs-only clickable",onClick:function(){return w("subsOnly")},children:["Subs only"," ",Object(h.jsx)("i",{className:"fas fa-sort".concat("subsOnly"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(h.jsxs)("th",{className:"age center clickable",onClick:function(){return w("dateCreated")},children:["Date created",Object(h.jsx)("i",{className:"fas fa-sort".concat("dateCreated"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]})]})}),Object(h.jsx)("tbody",{children:(g?n:n.slice((f-1)*u,f*u)).map((function(e){return Object(h.jsx)(y,{item:e,setItem:C},e._id)}))})]}),Object(h.jsxs)("div",{className:"page-controller-wrapper",children:[n.length!==t.length&&Object(h.jsx)("div",{className:"filtered-warning",onClick:function(){return i()},onKeyPress:function(){return i()},tabIndex:0,role:"button",children:"Results are filtered, click here to clear filters"}),Object(h.jsx)("div",{className:"page-controller",children:g?Object(h.jsx)("button",{className:"button secondary showAll",type:"button",onClick:function(){return N(!1)},children:"Turn on pagination"}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"buttons-pages",children:[Object(h.jsx)("button",{className:"button primary small",type:"button",onClick:function(){return v(1)},disabled:1===f,children:Object(h.jsx)("i",{className:"icon fas fa-angle-double-left"})}),Object(h.jsxs)("button",{className:"button previous",type:"button",onClick:function(){return k("previous")},disabled:1===f,children:[Object(h.jsx)("i",{className:"icon fas fa-angle-left"}),"Previous page"]}),Object(h.jsxs)("div",{className:"page-summary",children:[Object(h.jsxs)("div",{className:"page-number",children:["Page ",f," of"," ",n.length<u?1:Math.ceil(n.length/u)]}),Object(h.jsxs)("div",{className:"amount-per-page",children:[n.length," results"]})]}),Object(h.jsxs)("button",{className:"button next",type:"button",onClick:function(){return k("next")},disabled:f===p,children:[Object(h.jsx)("i",{className:"icon fas fa-angle-right"}),"Next page"]}),Object(h.jsx)("button",{className:"button primary small",type:"button",onClick:function(){return v(p)},disabled:f===p,children:Object(h.jsx)("i",{className:"icon fas fa-angle-double-right"})})]}),Object(h.jsx)("button",{className:"button secondary small showAll",type:"button",onClick:function(){return N(!0)},children:"Show all"})]})})]})]});function w(e){s({sort:e,order:r.sort===e&&"asc"===r.order?"desc":"asc"})}function C(e){var n=t.findIndex((function(t){return t._id===e._id}));if(n){var c=Object(b.a)(t);c[n]=e,a(c)}}function k(e){v("previous"===e?f-1:f+1)}};function w(e,t,n){var a=function(e){return"onscreensounds-".concat(e)},r=Object(c.useState)((function(){try{var c=window.localStorage.getItem(a(e));return n&&window.localStorage.removeItem(a(e)),c&&!0!==n?JSON.parse(c):t}catch(r){return console.error(r),t}})),s=Object(m.a)(r,2),i=s[0],o=s[1];return[i,function(t){try{var n=t instanceof Function?t(i):t;o(n),window.localStorage.setItem(a(e),JSON.stringify(n))}catch(c){console.error(c)}}]}var C=n(93),k=(n(92),n(65)),S=n.n(k);function I(e){return 0===Object.keys(e).length?"":"?".concat(Object.keys(e).reduce((function(t,n){var c=e[n];return(c||0===c||!1===c)&&t.push("".concat(n,"=").concat(encodeURIComponent(c))),t}),[]).join("&"))}n(194);var M=function(e){var t=e.query,n=e.setQuery,c=e.minVolume,a=e.setMinVolume,r=e.maxVolume,s=e.setMaxVolume,i=e.minCost,o=e.setMinCost,l=e.maxCost,u=e.setMaxCost,d=e.minSeconds,b=e.setMinSeconds,j=e.maxSeconds,m=e.setMaxSeconds;return Object(h.jsxs)("div",{className:"filter-header",children:[Object(h.jsxs)("div",{className:"filter-item",children:[Object(h.jsx)("h3",{children:"Search"}),Object(h.jsx)("input",{placeholder:"Search by sound name",value:t,onChange:function(e){return n(e.target.value)}})]}),Object(h.jsxs)("div",{className:"filter-item",children:[Object(h.jsx)("h3",{children:"Cost"}),Object(h.jsxs)("div",{className:"flex",children:[Object(h.jsx)("input",{className:(i||0)<(l||0)?"warn":"",type:"number",value:i||void 0,placeholder:"Min",min:0,max:9999999999,onChange:function(e){return o(parseInt(e.target.value,10))}}),Object(h.jsx)("input",{className:(i||0)<(l||0)?"warn":"",type:"number",value:l||void 0,placeholder:"Max",min:1,max:1e9,onChange:function(e){return u(parseInt(e.target.value,10))}})]})]}),Object(h.jsxs)("div",{className:"filter-item",children:[Object(h.jsx)("h3",{children:"Volume"}),Object(h.jsxs)("div",{className:"flex",children:[Object(h.jsx)("input",{className:(c||0)<(r||0)?"warn":"",type:"number",value:c||void 0,placeholder:"Min",min:0,max:99,onChange:function(e){return a(parseInt(e.target.value,10))}}),Object(h.jsx)("input",{className:(c||0)<(r||0)?"warn":"",type:"number",value:r||void 0,placeholder:"Max",min:1,max:100,onChange:function(e){return s(parseInt(e.target.value,10))}})]})]}),Object(h.jsxs)("div",{className:"filter-item",children:[Object(h.jsx)("h3",{children:"Duration"}),Object(h.jsxs)("div",{className:"flex",children:[Object(h.jsx)("input",{className:(d||0)<(j||0)?"warn":"",type:"number",value:d||void 0,placeholder:"Min",min:0,max:9999999999,onChange:function(e){return b(parseInt(e.target.value,10))}}),Object(h.jsx)("input",{className:(d||0)<(j||0)?"warn":"",type:"number",value:j||void 0,placeholder:"Max",min:1,max:1e9,onChange:function(e){return m(parseInt(e.target.value,10))}})]})]})]})},T=function(e){var t=e.items,n=(e.setItems,e.children),a=w("query",""),r=Object(m.a)(a,2),s=r[0],i=r[1],o=w("minVolume",void 0),l=Object(m.a)(o,2),u=l[0],d=l[1],b=w("maxVolume",void 0),j=Object(m.a)(b,2),f=j[0],v=j[1],p=w("minCost",void 0),O=Object(m.a)(p,2),x=O[0],g=O[1],y=w("maxCost",void 0),N=Object(m.a)(y,2),k=N[0],I=N[1],T=w("minSeconds",void 0),E=Object(m.a)(T,2),P=E[0],F=E[1],_=w("maxSeconds",void 0),D=Object(m.a)(_,2),A=D[0],V=D[1],J=w("sort",{sort:"dateCreated",order:"asc"}),U=Object(m.a)(J,2),W=U[0],R=U[1],B=c.useState(t),q=Object(m.a)(B,2),z=q[0],K=q[1],L=c.useCallback((function(e,t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";return Object(C.a)(e,(function(e){return e.sort((function(e,c){var a="asc"===n?-1:1,r="asc"===n?1:-1,s=S()(e,t),i=S()(c,t);return s&&i?s<i?a:s>i?r:0:s?-1:1}))}))}(e.filter((function(e){var t,n,c,a,r,i;return(-1!==e.name.toUpperCase().indexOf(s.toUpperCase())||e.description.toUpperCase().includes(s.toUpperCase())||(null===(t=e.bot)||void 0===t||null===(n=t.identifier)||void 0===n?void 0:n.toUpperCase().includes(s.toUpperCase())))&&100*((null===(c=e.alert)||void 0===c||null===(a=c.audio)||void 0===a?void 0:a.volume)||0)>=(u||0)&&100*((null===(r=e.alert)||void 0===r||null===(i=r.audio)||void 0===i?void 0:i.volume)||0)<=(f||100)&&(e.cost||0)>=(x||0)&&(e.cost||0)<=(k||1e8)&&(e.duration||0)>=(P||0)&&(e.duration||0)<=(A||1e8)})),function(e){switch(e){case"soundName":return"bot.identifier";case"volume":return"alert.audio.volume";case"dateCreated":return"createdAt";case"duration":return"duration";default:return e}}(t.sort),t.order)}),[s,u,f,x,k,P,A]);c.useEffect((function(){K(L(t,W))}),[t,L,W]);var G=M({query:s,setQuery:i,minVolume:u,setMinVolume:d,maxVolume:f,setMaxVolume:v,minCost:x,setMinCost:g,maxCost:k,setMaxCost:I,minSeconds:P,setMinSeconds:F,maxSeconds:A,setMaxSeconds:V});return Object(h.jsx)(h.Fragment,{children:n(G,z,W,R,(function(){i(""),d(void 0),v(void 0),g(void 0),I(void 0),F(void 0),V(void 0)}))})},E="https://api.streamelements.com/kappa";function P(e,t){return fetch(e,t).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}))}var F=function(e){return{getCurrentUserChannel:function(){var t={method:"GET",headers:{Authorization:e}};return P("".concat(E,"/v2/users/current"),t)},getMeDetails:function(){var t={method:"GET",headers:{Authorization:e}};return P("".concat(E,"/v2/channels/me"),t)},getChannelItems:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,c=arguments.length>2?arguments[2]:void 0,a={method:"GET",headers:{Authorization:e}},r=I({limit:n,offset:c});return P("".concat(E,"/v2/store/").concat(t,"/items").concat(r),a)},saveChannelItem:function(t,n){var c={method:"PUT",headers:{Authorization:e,"Content-Type":"application/json"},body:JSON.stringify(n)};return P("".concat(E,"/v2/store/").concat(t,"/items/").concat(n._id),c)},getUploadedItems:function(t,n,c){var a={method:"GET",headers:{Authorization:e}},r=I({limit:n,offset:c,type:"audio"});return P("".concat(E,"/v2/uploads/").concat(t).concat(r),a)}}},_=a.a.createContext(null);function D(e){var t=e.children,n=a.a.useState(),c=Object(m.a)(n,2),r=c[0],s=c[1],i=w("StreamElementsJWT",null),o=Object(m.a)(i,2),l=o[0],u={user:r,setUser:s,token:l,setToken:o[1],APIService:l?F("Bearer ".concat(l)):null};return Object(h.jsx)(_.Provider,{value:u,children:t})}function A(){return a.a.useContext(_)}n(195);var V=function(){var e=A(),t=e.user,n=e.setUser,a=e.APIService,r=e.setToken,s=Object(c.useState)([]),i=Object(m.a)(s,2),u=i[0],f=i[1],v=Object(c.useState)([]),O=Object(m.a)(v,2),x=O[0],g=O[1],y=Object(c.useState)(!1),w=Object(m.a)(y,2),C=w[0],k=w[1],S=Object(c.useCallback)((function(){return E.apply(this,arguments)}),[a,n]),I=Object(c.useCallback)((function(e){return P.apply(this,arguments)}),[a]),M=Object(c.useCallback)((function(e){return F.apply(this,arguments)}),[a]);return Object(c.useEffect)((function(){S()}),[]),Object(c.useEffect)((function(){(null===t||void 0===t?void 0:t._id)?(I(t._id),M(t._id)):f([])}),[null===t||void 0===t?void 0:t._id,I,M]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"home",children:[Object(h.jsx)(p,{user:t,loading:C,logout:function(){return r(null)}}),Object(h.jsx)("div",{className:"content",children:Object(h.jsx)(T,{items:u,setItems:f,children:function(e,t,n,c,a){return Object(h.jsxs)(h.Fragment,{children:[e,Object(h.jsx)(N,{items:t,setItems:f,allItems:u,sort:n,setSort:c,resetFilters:a})]})}})})]}),Object(h.jsx)(o.b,{context:{items:u,files:x,setItem:function(e){var t=u.findIndex((function(t){return t._id===e._id}));if(t){var n=Object(b.a)(u);n[t]=e,f(n)}else f([].concat(Object(b.a)(u),[e]))},setFile:function(e){var t=x.findIndex((function(t){return t._id===e._id}));if(t){var n=Object(b.a)(x);n[t]=e,g(n)}else g([].concat(Object(b.a)(x),[e]))}}})]});function E(){return(E=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=15;break}return e.prev=1,k(!0),e.next=5,null===a||void 0===a?void 0:a.getMeDetails();case 5:t=e.sent,n(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:return e.prev=12,k(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})))).apply(this,arguments)}function P(){return P=Object(j.a)(d.a.mark((function e(t){var n,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=19;break}return e.prev=1,k(!0),e.next=5,null===a||void 0===a?void 0:a.getChannelItems(t);case 5:return n=e.sent,c=n.filter((function(e){var t,n;return null===(t=e.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src})),e.next=9,Promise.all(c.map(function(){var e=Object(j.a)(d.a.mark((function e(t){var n,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_((null===(n=t.alert)||void 0===n||null===(c=n.audio)||void 0===c?void 0:c.src)||"");case 2:return a=e.sent,e.abrupt("return",Object(l.a)(Object(l.a)({},t),{},{duration:a||void 0}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:r=e.sent,f(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:return e.prev=16,k(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])}))),P.apply(this,arguments)}function F(){return(F=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!t){e.next=15;break}return e.prev=1,k(!0),e.next=5,null===a||void 0===a?void 0:a.getUploadedItems(t,void 0);case 5:n=e.sent,g(n.uploads),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:return e.prev=12,k(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})))).apply(this,arguments)}function _(e){return D.apply(this,arguments)}function D(){return(D=Object(j.a)(d.a.mark((function e(t){var n,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return n=new AudioContext,e.next=4,fetch(t,{method:"GET"}).then((function(e){return e.arrayBuffer()}));case 4:return c=e.sent,e.next=7,n.decodeAudioData(c,(function(e){return e}));case 7:return a=e.sent,e.abrupt("return",a.duration);case 9:return e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},J=n(94),U=(n(196),function(){var e=A(),t=e.token,n=e.setToken,a=Object(o.h)(),r=Object(c.useState)(""),s=Object(m.a)(r,2),i=s[0],l=s[1];return Object(c.useEffect)((function(){t&&a("/")}),[]),Object(h.jsxs)("div",{className:"login-page",children:[Object(h.jsx)("h1",{className:"page-title",children:"StreamElements Sounds editor"}),Object(h.jsxs)("div",{className:"login-block",children:[Object(h.jsxs)("div",{className:"info-box warning",children:[Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)("i",{className:"fas fa-info-circle"}),Object(h.jsx)("span",{children:"Information"})]}),Object(h.jsxs)("div",{className:"content",children:[Object(h.jsx)("p",{children:"To manage sounds the tool needs your JWT (JSON web token)."}),Object(h.jsx)("p",{children:"You can find this by logging into StreamElements, clicking your image in the top right, then your username and lastly Channel Settings."}),Object(h.jsx)("p",{children:'Then toggle the "Show secrets" button, and copy the JWT in full inside the input field.'})]}),Object(h.jsx)("div",{className:"footer",children:Object(h.jsx)("span",{children:"Do not share this token!"})})]}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(i),l(""),a("/")},children:[Object(h.jsx)("input",{type:"password",value:i,onChange:function(e){return l(e.target.value)},placeholder:"JWT (JSON web token)"}),Object(h.jsxs)("div",{className:"buttons",children:[Object(h.jsx)("button",{type:"submit",children:"Login"}),Object(h.jsxs)("button",{className:"secondary",type:"button",onClick:function(){return window.open("https://streamelements.com/dashboard/account/channels","_blank")},children:[Object(h.jsx)("i",{className:"icon fas fa-external-link-square-alt"}),"StreamElements Channel Settings"]})]})]})]}),Object(h.jsxs)("div",{className:"copy",children:[Object(h.jsx)("div",{className:"who",children:"\xa9 damon02 - 2021"}),Object(h.jsxs)("div",{className:"version",children:["v",J.version]})]})]})}),W=n(216),R=n(217),B=n(98),q=function(e){var t=e.id,n=e.label,c=e.additionalLabel,a=e.type,r=e.subtitle,s=e.value,i=e.onChange,o=e.placeholder,l=e.allowsMin;return Object(h.jsxs)("div",{className:"item-wrapper",id:t,children:[(n||c)&&Object(h.jsxs)("label",{children:[n,c]}),"input large"===a?Object(h.jsx)("input",{className:"input large",value:s,onChange:function(e){return i(e.target.value)},placeholder:o}):"textarea"===a?Object(h.jsx)("textarea",{value:s,onChange:function(e){return i(e.target.value)},placeholder:o}):"input number"===a?Object(h.jsx)("input",{value:s,type:"number",onChange:function(e){var t=e.target.value?parseInt(e.target.value,10):0;i(t>999999999?999999999:!l&&t<0?0:t)},placeholder:o,min:l||0,max:999999999}):Object(h.jsx)("input",{value:s,onChange:function(e){return i(e.target.value)},placeholder:o}),r&&Object(h.jsx)("label",{className:"subtitle",children:r})]})};n(209);var z=function(){var e,t,n,r,s,i,u=Object(o.h)(),b=A(),f=b.APIService,v=b.user,p=Object(o.j)().itemId,x=Object(o.i)(),g=x.items,y=x.files,N=x.setItem,w=Object(c.useState)(!1),C=Object(m.a)(w,2),k=C[0],S=C[1],I=a.a.useRef(null),M=g.find((function(e){return e._id===p})),T=Object(c.useState)((null===M||void 0===M?void 0:M.name)||""),E=Object(m.a)(T,2),P=E[0],F=E[1],_=Object(c.useState)((null===M||void 0===M?void 0:M.description)||""),D=Object(m.a)(_,2),V=D[0],J=D[1],U=Object(c.useState)((null===M||void 0===M?void 0:M.cost)||0),z=Object(m.a)(U,2),K=z[0],L=z[1],G=Object(c.useState)((null===M||void 0===M?void 0:M.quantity.total)||-1),H=Object(m.a)(G,2),Q=H[0],Y=H[1],X=Object(c.useState)((null===M||void 0===M||null===(e=M.cooldown)||void 0===e?void 0:e.global)||0),Z=Object(m.a)(X,2),$=Z[0],ee=Z[1],te=Object(c.useState)((null===M||void 0===M||null===(t=M.cooldown)||void 0===t?void 0:t.user)||0),ne=Object(m.a)(te,2),ce=ne[0],ae=ne[1],re=Object(c.useState)((null===M||void 0===M?void 0:M.categoryName)||""),se=Object(m.a)(re,2),ie=se[0],oe=se[1],le=Object(c.useState)((null===M||void 0===M||null===(n=M.cooldown)||void 0===n?void 0:n.category)||0),ue=Object(m.a)(le,2),de=ue[0],be=ue[1],je=Object(c.useState)((null===M||void 0===M||null===(r=M.alert)||void 0===r||null===(s=r.audio)||void 0===s?void 0:s.volume)||1),me=Object(m.a)(je,2),fe=me[0],ve=me[1],he=Object(c.useState)((null===M||void 0===M||null===(i=M.bot)||void 0===i?void 0:i.identifier)||""),pe=Object(m.a)(he,2),Oe=pe[0],xe=pe[1],ge=Object(c.useState)(),ye=Object(m.a)(ge,2),Ne=ye[0],we=ye[1],Ce=Object(c.useState)(!1),ke=Object(m.a)(Ce,2),Se=ke[0],Ie=ke[1],Me=Object(c.useState)(),Te=Object(m.a)(Me,2),Ee=Te[0],Pe=Te[1],Fe=Object(c.useState)(0),_e=Object(m.a)(Fe,2),De=_e[0],Ae=_e[1],Ve=Object(c.useState)({website:!1,extension:!1,bot:!0,confirmation:!0}),Je=Object(m.a)(Ve,2),Ue=Je[0],We=Je[1],Re=Object(c.useCallback)((function(e){I.current=e,I.current&&(null===Ne||void 0===Ne?void 0:Ne.url)&&(I.current.load(null===Ne||void 0===Ne?void 0:Ne.url),I.current.on("play",(function(){Ie(!0)})),I.current.on("pause",(function(){Ie(!1)})),I.current.on("finish",(function(){Ie(!1)})),I.current.on("seek",(function(){Ae(I.current.getCurrentTime())})),I.current.on("audioprocess",(function(){Ae(I.current.getCurrentTime())})))}),[null===Ne||void 0===Ne?void 0:Ne.url]);Object(c.useEffect)((function(){var e,t,n,c,a,r,s;M&&(F(M.name),J(M.description),L(M.cost),Y(M.quantity.total),ee((null===(e=M.cooldown)||void 0===e?void 0:e.global)||0),ae((null===(t=M.cooldown)||void 0===t?void 0:t.user)||0),oe((null===M||void 0===M?void 0:M.categoryName)||""),be((null===M||void 0===M||null===(n=M.cooldown)||void 0===n?void 0:n.category)||0),ve((null===M||void 0===M||null===(c=M.alert)||void 0===c||null===(a=c.audio)||void 0===a?void 0:a.volume)||1),We({website:(null===M||void 0===M?void 0:M.sources.includes("website"))||!1,extension:(null===M||void 0===M?void 0:M.sources.includes("extension"))||!1,bot:(null===M||void 0===M?void 0:M.sources.includes("bot"))||!0,confirmation:(null===M||void 0===M||null===(r=M.bot)||void 0===r?void 0:r.sendResponse)||!0}),xe((null===(s=M.bot)||void 0===s?void 0:s.identifier)||""))}),[M]),Object(c.useEffect)((function(){var e=y.find((function(e){var t,n;return e.url===(null===M||void 0===M||null===(t=M.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src)}));we(e)}),[y,M]);var Be=a.a.useCallback((function(){I.current.playPause()}),[]);return Object(c.useEffect)((function(){I.current&&I.current.setVolume(fe)}),[fe]),Object(c.useEffect)((function(){setTimeout((function(){return function(){var e=I.current.getDuration();Pe(e)}()}),1e3)}),[]),M?Object(h.jsx)("div",{className:"item-details-wrapper",children:Object(h.jsxs)("div",{className:"floating-block",children:[Object(h.jsxs)("div",{className:"content left",children:[Object(h.jsx)(q,{label:"Item name",type:"input large",subtitle:"This will be presented to the chat",value:P,onChange:function(e){return F(e)}}),Object(h.jsx)(q,{label:"Description",type:"textarea",subtitle:"Only visible in StreamElements.",value:V,onChange:function(e){return J(e)}}),Object(h.jsxs)("div",{className:"flex",children:[Object(h.jsx)(q,{label:"Item cost",type:"input number",subtitle:"Cost of this item in points",value:K,onChange:function(e){return L(e)}}),Object(h.jsx)(q,{label:"Quantity",type:"input number",subtitle:"-1 for unlimited amount",value:Q,allowsMin:-1,onChange:function(e){return Y(e)}})]}),Object(h.jsxs)("div",{className:"flex",children:[Object(h.jsx)(q,{label:"Global cooldown",type:"input number",subtitle:"In seconds, (".concat($?Object(W.a)(Object(R.a)({start:0,end:1e3*($||.01)}),{format:["years","days","hours","minutes","seconds"]}):"?",")"),value:$,onChange:function(e){return ee(e)}}),Object(h.jsx)(q,{label:"User cooldown",type:"input number",subtitle:"In seconds, (".concat(ce?Object(W.a)(Object(R.a)({start:0,end:1e3*(ce||0)}),{format:["years","days","hours","minutes","seconds"]}):"?",")"),value:ce,onChange:function(e){return ae(e)}})]}),Object(h.jsxs)("div",{className:"flex item-wrapper",children:[Object(h.jsx)("label",{children:"Category cooldown"}),Object(h.jsx)("label",{className:"toptitle",children:"A user is blocked from purchasing items from the same category during the cool down period."}),Object(h.jsxs)("div",{className:"flex",children:[Object(h.jsx)(q,{type:"input",placeholder:"Name",value:ie,onChange:function(e){return oe(e)}}),Object(h.jsx)(q,{type:"input number",placeholder:"Time in seconds",value:de,onChange:function(e){return be(e)},subtitle:"In seconds, (".concat(de?Object(W.a)(Object(R.a)({start:0,end:1e3*(de||0)}),{format:["years","days","hours","minutes","seconds"]}):"?",")")})]})]})]}),Object(h.jsxs)("div",{className:"content right",children:[Object(h.jsx)("div",{className:"item-wrapper file",children:Object(h.jsxs)("div",{className:"file-tag",children:[Object(h.jsx)("button",{className:"play-button",type:"button",onClick:function(e){var t,n;e.preventDefault(),e.stopPropagation(),(null===(t=M.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src)&&Be()},children:Se?Object(h.jsx)("i",{className:"fas fa-pause"}):Object(h.jsx)("i",{className:"fas fa-play"})}),Object(h.jsxs)("div",{className:"detail-rows",children:[Object(h.jsxs)("div",{className:"name",children:[Object(h.jsx)("i",{className:"icon fas fa-file-audio"}),Object(h.jsx)("span",{className:"subtitle",children:null===Ne||void 0===Ne?void 0:Ne.name})]}),Object(h.jsxs)("div",{className:"duration",children:[Object(h.jsx)("i",{className:"icon fas fa-music"}),Ee?"".concat(0!==De&&Math.round(10*De)/10!==Math.round(10*Ee)/10?"".concat(Math.round(10*De)/10,"s / "):"").concat(Math.round(10*Ee)/10,"s"):Object(h.jsx)("i",{className:"fas fa-spin fa-spinner"})]})]}),Ne&&Object(h.jsx)("div",{className:"waveform",children:Object(h.jsx)(O.WaveSurfer,{onMount:Re,ref:I,children:Object(h.jsx)(O.WaveForm,{id:"waveform-".concat(null===Ne||void 0===Ne?void 0:Ne._id),container:"waveform-".concat(null===Ne||void 0===Ne?void 0:Ne._id),p:!0,cursorColor:"#ff000000",waveColor:"#BDBABD",progressColor:"#FFFFFF",height:35,barWidth:1,barHeight:3,cursorWidth:1,hideScrollbar:!0})})})]})}),Object(h.jsxs)("div",{className:"item-wrapper volume",children:[Object(h.jsxs)("label",{children:["Volume (",Math.round(100*(fe||0)),"%)"]}),Object(h.jsx)(B.a,{value:fe,onChange:function(e){return ve(e)},min:0,max:1,step:.01,handleStyle:{height:24,width:24,marginTop:-7,backgroundColor:"#6441a5",borderColor:"#9a64ff"},railStyle:{backgroundColor:"#282a36",height:10},trackStyle:{backgroundColor:"#9a64ff",height:10}})]}),Object(h.jsxs)("div",{className:"item-wrapper checkbox",onClick:function(){return We(Object(l.a)(Object(l.a)({},Ue),{},{website:!Ue.website}))},onKeyPress:function(){return We(Object(l.a)(Object(l.a)({},Ue),{},{website:!Ue.website}))},tabIndex:0,role:"button",children:[Object(h.jsx)("input",{type:"checkbox",checked:Ue.website,onClick:function(){return We(Object(l.a)(Object(l.a)({},Ue),{},{website:!Ue.website}))}}),Object(h.jsx)("label",{children:"Redeemable via website"})]}),Object(h.jsxs)("div",{className:"item-wrapper checkbox",onClick:function(){return We(Object(l.a)(Object(l.a)({},Ue),{},{extension:!Ue.extension}))},onKeyPress:function(){return We(Object(l.a)(Object(l.a)({},Ue),{},{extension:!Ue.extension}))},tabIndex:0,role:"button",children:[Object(h.jsx)("input",{type:"checkbox",checked:Ue.extension,onClick:function(){return We(Object(l.a)(Object(l.a)({},Ue),{},{extension:!Ue.extension}))}}),Object(h.jsx)("label",{children:"Redeemable via extension"})]}),Object(h.jsxs)("div",{className:"item-wrapper checkbox",onClick:function(){return We(Object(l.a)(Object(l.a)({},Ue),{},{bot:!Ue.bot}))},onKeyPress:function(){return We(Object(l.a)(Object(l.a)({},Ue),{},{bot:!Ue.bot}))},tabIndex:0,role:"button",children:[Object(h.jsx)("input",{type:"checkbox",checked:Ue.bot,onClick:function(){return We(Object(l.a)(Object(l.a)({},Ue),{},{bot:!Ue.bot}))}}),Object(h.jsx)("label",{children:"Redeemable via chat"})]}),Object(h.jsxs)("div",{className:"item-wrapper checkbox",onClick:function(){return We(Object(l.a)(Object(l.a)({},Ue),{},{confirmation:!Ue.confirmation}))},onKeyPress:function(){return We(Object(l.a)(Object(l.a)({},Ue),{},{confirmation:!Ue.confirmation}))},tabIndex:0,role:"button",children:[Object(h.jsx)("input",{type:"checkbox",checked:Ue.confirmation,onClick:function(){return We(Object(l.a)(Object(l.a)({},Ue),{},{confirmation:!Ue.confirmation}))}}),Object(h.jsx)("label",{children:"Send confirmation when redeeming via chat"})]}),Object(h.jsx)(q,{type:"input",value:Oe,onChange:function(e){return xe(e)},label:"Item chat command",subtitle:'To play, type "!sound '.concat(Oe,'" in the chat')}),Object(h.jsxs)("div",{className:"buttons",children:[Object(h.jsx)("button",{className:"button primary green",type:"button",onClick:function(){return ze.apply(this,arguments)},children:k?Object(h.jsx)("i",{className:"fas fa-spin fa-spinner"}):"Save changes"}),Object(h.jsx)("button",{className:"button secondary",type:"button",disabled:k,onClick:function(){return qe()},children:"Cancel changes"})]})]})]})}):null;function qe(){u("/")}function ze(){return(ze=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(v&&f&&M)){e.next=18;break}return e.prev=1,S(!0),delete(t=Object(l.a)(Object(l.a)({},M),{},{name:P,description:V,cost:K,quantity:{total:Q},cooldown:Object(l.a)(Object(l.a)({},M.cooldown),{},{category:de,global:$,user:ce}),categoryName:ie,sources:[Ue.bot?"bot":void 0,Ue.extension?"extension":void 0,Ue.website?"website":void 0].filter((function(e){return e})),alert:Object(l.a)(Object(l.a)({},M.alert),{},{audio:{src:null===Ne||void 0===Ne?void 0:Ne.url,volume:fe}}),bot:{sendResponse:Ue.confirmation||!1,identifier:Oe}})).duration,e.next=7,null===f||void 0===f?void 0:f.saveChannelItem(v._id,t);case 7:n=e.sent,N(n),qe(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:return e.prev=15,S(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})))).apply(this,arguments)}},K=function(e){var t=e.children,n=A(),c=Object(o.g)();return(null===n||void 0===n?void 0:n.token)?t:Object(h.jsx)(o.a,{to:"/login",state:{from:c}})};n(210);var L=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)(o.e,{children:[Object(h.jsx)(o.c,{path:"/",element:Object(h.jsx)(K,{children:Object(h.jsx)(V,{})}),children:Object(h.jsx)(o.c,{path:"item/",element:Object(h.jsx)(z,{}),children:Object(h.jsx)(o.c,{path:":itemId",element:Object(h.jsx)(z,{})})})}),Object(h.jsx)(o.c,{index:!1,path:"login",element:Object(h.jsx)(U,{})})]})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,219)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};n(211),n(212);s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(i.a,{children:Object(h.jsx)(D,{children:Object(h.jsx)(L,{})})})}),document.getElementById("root")),G()},94:function(e){e.exports=JSON.parse('{"name":"onscreen-sounds","version":"0.1.0","homepage":"https://damon02.github.io/streamelements-store-manager","private":true,"dependencies":{"@types/d3-ease":"3.0.0","d3-ease":"3.0.1","date-fns":"2.27.0","immer":"9.0.6","lodash":"4.17.21","node-sass":"6.0.1","rc-slider":"9.7.5","react":"17.0.2","react-dom":"17.0.2","react-router":"6.2.1","react-router-dom":"6.2.1","react-scripts":"4.0.3","react-spring":"9.3.0","typescript":"4.4.4","wavesurfer-react":"2.0.11","wavesurfer.js":"4.6.0","web-vitals":"1.1.2"},"devDependencies":{"@testing-library/jest-dom":"5.15.0","@testing-library/react":"11.2.7","@testing-library/user-event":"12.8.3","@types/date-fns":"2.6.0","@types/jest":"26.0.24","@types/lodash":"4.14.176","@types/node":"12.20.37","@types/react":"17.0.34","@types/react-dom":"17.0.11","eslint":"7.31.0","eslint-config-airbnb":"18.2.1","eslint-config-airbnb-typescript":"12.3.1","eslint-config-prettier":"8.3.0","eslint-config-react-app":"6.0.0","eslint-import-resolver-typescript":"2.4.0","eslint-loader":"4.0.2","eslint-plugin-deprecation":"1.2.1","eslint-plugin-import":"2.23.4","eslint-plugin-jest":"24.3.6","eslint-plugin-jsx-a11y":"6.4.1","eslint-plugin-prettier":"3.4.0","eslint-plugin-react":"7.24.0","eslint-plugin-react-hooks":"4.2.0","prettier":"2.3.1","prettier-eslint":"12.0.0","prettier-eslint-cli":"5.0.1"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","lint":"eslint --ext .js,.jsx,.ts,.tsx src --color && npm run prettier-check","prettier-check":"prettier --check --config ./.prettierrc \\"./src/**/*.ts\\" \\"./src/**/*.tsx\\"","prettier-format-all":"prettier --write --config ./.prettierrc \\"./src/**/*.ts\\" \\"./src/**/*.tsx\\""},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"pre-commit":["prettier-check"]}')}},[[213,1,2]]]);
//# sourceMappingURL=main.d8614336.chunk.js.map