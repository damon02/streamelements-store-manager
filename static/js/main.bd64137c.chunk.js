(this["webpackJsonponscreen-sounds"]=this["webpackJsonponscreen-sounds"]||[]).push([[0],{178:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),r=n(34),a=n.n(r),i=n(24),o=n(4),l=n(10),u=n.n(l),d=n(15),j=n(3),m=n(78),b=n(49),h=n(186),f=(n(84),n(2)),v=function(e){var t=e.user,n=e.logout,c=s.useState(!1),r=Object(j.a)(c,2),a=r[0],i=r[1],o=null===t||void 0===t?void 0:t.displayName,l=Object(b.useSpring)({opacity:a?1:0,transform:a?"translateY(0%) translateX(0%) scale(1)":"translateY(-100%) translateX(50%) scale(0)",config:{duration:250,easing:h.a}});return Object(f.jsxs)("div",{className:"header-app",children:[Object(f.jsx)("div",{className:"title",children:Object(f.jsx)("h1",{children:"StreamElements Sounds editor"})}),Object(f.jsx)("div",{className:"buttons",children:Object(f.jsxs)("div",{className:"button-user".concat(a?" active":""),role:"button",onKeyPress:function(e){return"enter"===e.key?i(!a):{}},onClick:function(){return i(!a)},tabIndex:0,children:[Object(f.jsx)("div",{className:"user-image",style:{backgroundImage:"url(".concat(null===t||void 0===t?void 0:t.avatar,")")}}),Object(f.jsx)("div",{className:"name",children:o||Object(f.jsx)("i",{className:"fas fa-spin fa-spinner"})}),Object(f.jsx)("div",{className:"triangle",children:Object(f.jsx)("i",{className:"fas fa-caret-down"})})]})}),Object(f.jsx)(b.animated.div,{className:"user-menu",style:Object(m.a)({},l),children:Object(f.jsx)("button",{className:"button-menu danger",type:"button",onClick:function(){return n()},children:"Log out"})})]})},p=n(50),x=n(187),O=function(e){var t,n,c,r,a,i,o,l=e.item,u="waveform-".concat(l._id),d=s.useRef(null),m=s.useState(!1),b=Object(j.a)(m,2),h=b[0],v=b[1],O=s.useState(0),g=Object(j.a)(O,2),N=(g[0],g[1]),y=s.useCallback((function(e){var t,n,s,c;(d.current=e,d.current&&(null===(t=l.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src))&&(d.current.load(null===(s=l.alert)||void 0===s||null===(c=s.audio)||void 0===c?void 0:c.src),d.current.on("play",(function(){v(!0)})),d.current.on("pause",(function(){v(!1)})),d.current.on("finish",(function(){v(!1)})),d.current.on("seek",(function(){N(d.current.getCurrentTime())})),d.current.on("audioprocess",(function(){N(d.current.getCurrentTime())})))}),[null===(t=l.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src]),k=s.useCallback((function(){d.current.playPause()}),[]);return s.useEffect((function(){var e,t;d.current&&d.current.setVolume(null===(e=l.alert)||void 0===e||null===(t=e.audio)||void 0===t?void 0:t.volume)}),[null===(c=l.alert)||void 0===c||null===(r=c.audio)||void 0===r?void 0:r.volume]),Object(f.jsxs)("tr",{className:"item",children:[Object(f.jsx)("td",{className:"checkbox"}),Object(f.jsx)("td",{className:"play",children:Object(f.jsx)("div",{className:"play-button",role:"button",tabIndex:0,onKeyPress:function(e){var t,n;(e.preventDefault(),e.stopPropagation(),"ENTER"===e.key)&&((null===(t=l.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src)&&!h&&k())},onClick:function(e){var t,n;e.preventDefault(),e.stopPropagation(),(null===(t=l.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src)&&!h&&k()},children:Object(f.jsx)("i",{className:h?"fas fa-pause":"fas fa-play"})})}),Object(f.jsx)("td",{className:"sound-name",children:Object(f.jsxs)("div",{className:"name-split",children:[Object(f.jsx)("div",{className:"name",children:null===(a=l.bot)||void 0===a?void 0:a.identifier}),Object(f.jsxs)("div",{className:"description",children:[l.name," - ",l.description]})]})}),Object(f.jsx)("td",{className:"cost center",children:l.cost}),Object(f.jsxs)("td",{className:"volume center",children:[Math.round(100*((null===(i=l.alert)||void 0===i||null===(o=i.audio)||void 0===o?void 0:o.volume)||0)),"%"]}),Object(f.jsx)("td",{className:"waveform",children:Object(f.jsx)(p.WaveSurfer,{onMount:y,ref:d,children:Object(f.jsx)(p.WaveForm,{id:u,container:u,p:!0,cursorColor:"#ff000000",waveColor:"#BDBABD",progressColor:"#9a64ff",height:35,barWidth:1,barHeight:3,cursorWidth:1,hideScrollbar:!0})})}),Object(f.jsx)("td",{className:"check center enabled",children:Object(f.jsx)("i",{className:l.enabled?"fas fa-check":"fas fa-times"})}),Object(f.jsx)("td",{className:"check center subs-only",children:Object(f.jsx)("i",{className:l.subscriberOnly?"fas fa-check":"fas fa-times"})}),Object(f.jsx)("td",{className:"dateCreated center",children:Object(x.a)(new Date(l.createdAt),"dd-MM-yyyy HH:mm:ss")})]},l._id)},g=(n(97),function(e){var t=e.items,n=e.sort,s=e.setSort;return Object(f.jsxs)("table",{className:"item-list",children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{className:"table-header",children:[Object(f.jsx)("th",{className:"checkbox"}),Object(f.jsx)("th",{className:"play"}),Object(f.jsxs)("th",{className:"sound-name clickable",onClick:function(){return c("soundName")},children:["Sound name",Object(f.jsx)("i",{className:"fas fa-sort".concat("soundName"===n.sort?"asc"===n.order?"-up":"-down":" unset")})]}),Object(f.jsxs)("th",{className:"cost center clickable",onClick:function(){return c("cost")},children:["Cost",Object(f.jsx)("i",{className:"fas fa-sort".concat("cost"===n.sort?"asc"===n.order?"-up":"-down":" unset")})]}),Object(f.jsxs)("th",{className:"volume center clickable",onClick:function(){return c("volume")},children:["Volume",Object(f.jsx)("i",{className:"fas fa-sort".concat("volume"===n.sort?"asc"===n.order?"-up":"-down":" unset")})]}),Object(f.jsx)("th",{className:"waveform"}),Object(f.jsxs)("th",{className:"check center enabled clickable",onClick:function(){return c("enabled")},children:["Enabled",Object(f.jsx)("i",{className:"fas fa-sort".concat("enabled"===n.sort?"asc"===n.order?"-up":"-down":" unset")})]}),Object(f.jsxs)("th",{className:"check center subs-only clickable",onClick:function(){return c("subsOnly")},children:["Subs only"," ",Object(f.jsx)("i",{className:"fas fa-sort".concat("subsOnly"===n.sort?"asc"===n.order?"-up":"-down":" unset")})]}),Object(f.jsxs)("th",{className:"age center clickable",onClick:function(){return c("dateCreated")},children:["Date created",Object(f.jsx)("i",{className:"fas fa-sort".concat("dateCreated"===n.sort?"asc"===n.order?"-up":"-down":" unset")})]})]})}),Object(f.jsx)("tbody",{children:t.map((function(e){return Object(f.jsx)(O,{item:e},e._id)}))})]});function c(e){s({sort:e,order:n.sort===e&&"asc"===n.order?"desc":"asc"})}});function N(e,t,n){var c=function(e){return"onscreensounds-".concat(e)},r=Object(s.useState)((function(){try{var s=window.localStorage.getItem(c(e));return n&&window.localStorage.removeItem(c(e)),s&&!0!==n?JSON.parse(s):t}catch(r){return console.error(r),t}})),a=Object(j.a)(r,2),i=a[0],o=a[1];return[i,function(t){try{var n=t instanceof Function?t(i):t;o(n),window.localStorage.setItem(c(e),JSON.stringify(n))}catch(s){console.error(s)}}]}var y=n(76),k=(n(75),n(51)),C=n.n(k);function w(e){return 0===Object.keys(e).length?"":"?".concat(Object.keys(e).reduce((function(t,n){var s=e[n];return(s||0===s||!1===s)&&t.push("".concat(n,"=").concat(encodeURIComponent(s))),t}),[]).join("&"))}n(178);var S=function(e){var t=e.query,n=e.setQuery,s=e.minVolume,c=e.setMinVolume,r=e.maxVolume,a=e.setMaxVolume,i=e.minCost,o=e.setMinCost,l=e.maxCost,u=e.setMaxCost;return Object(f.jsxs)("div",{className:"filter-header",children:[Object(f.jsxs)("div",{className:"filter-item",children:[Object(f.jsx)("h3",{children:"Search"}),Object(f.jsx)("input",{placeholder:"Search by sound name",value:t,onChange:function(e){return n(e.target.value)}})]}),Object(f.jsxs)("div",{className:"filter-item",children:[Object(f.jsx)("h3",{children:"Volume"}),Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)("input",{className:(s||0)<(r||0)?"warn":"",type:"number",value:s,placeholder:"Min",min:0,max:99,onChange:function(e){return c(parseInt(e.target.value,10))}}),Object(f.jsx)("input",{className:(s||0)<(r||0)?"warn":"",type:"number",value:r,placeholder:"Max",min:1,max:100,onChange:function(e){return a(parseInt(e.target.value,10))}})]})]}),Object(f.jsxs)("div",{className:"filter-item",children:[Object(f.jsx)("h3",{children:"Cost"}),Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)("input",{className:(i||0)<(l||0)?"warn":"",type:"number",value:i,placeholder:"Min",min:0,max:9999999999,onChange:function(e){return o(parseInt(e.target.value,10))}}),Object(f.jsx)("input",{className:(i||0)<(l||0)?"warn":"",type:"number",value:l,placeholder:"Max",min:1,max:1e9,onChange:function(e){return u(parseInt(e.target.value,10))}})]})]})]})},M=function(e){var t=e.items,n=e.children,c=N("query",""),r=Object(j.a)(c,2),a=r[0],i=r[1],o=N("minVolume",void 0),l=Object(j.a)(o,2),u=l[0],d=l[1],m=N("maxVolume",void 0),b=Object(j.a)(m,2),h=b[0],v=b[1],p=N("minCost",void 0),x=Object(j.a)(p,2),O=x[0],g=x[1],k=N("maxCost",void 0),w=Object(j.a)(k,2),M=w[0],I=w[1],T=N("sort",{sort:"dateCreated",order:"asc"}),E=Object(j.a)(T,2),V=E[0],D=E[1],J=s.useState(t),P=Object(j.a)(J,2),A=P[0],F=P[1],W=s.useCallback((function(e,t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";return Object(y.a)(e,(function(e){return e.sort((function(e,s){var c="asc"===n?-1:1,r="asc"===n?1:-1,a=C()(e,t),i=C()(s,t);return a&&i?a<i?c:a>i?r:0:a?-1:1}))}))}(e.filter((function(e){var t,n,s,c;return e.name.toUpperCase().includes(a.toUpperCase())&&100*((null===(t=e.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.volume)||0)>=(u||0)&&100*((null===(s=e.alert)||void 0===s||null===(c=s.audio)||void 0===c?void 0:c.volume)||0)<=(h||100)&&(e.cost||0)>=(O||0)&&(e.cost||0)<=(M||1e8)})),function(e){switch(e){case"soundName":return"bot.identifier";case"volume":return"alert.audio.volume";case"dateCreated":return"createdAt";default:return e}}(t.sort),t.order)}),[a,u,h,O,M]);s.useEffect((function(){F(W(t,V))}),[t,W,V]);var _=S({query:a,setQuery:i,minVolume:u,setMinVolume:d,maxVolume:h,setMaxVolume:v,minCost:O,setMinCost:g,maxCost:M,setMaxCost:I});return Object(f.jsx)(f.Fragment,{children:n(_,A,V,D)})},I="https://api.streamelements.com/kappa";function T(e,t){return fetch(e,t).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}))}var E=function(e){return{getCurrentUserChannel:function(){var t={method:"GET",headers:{Authorization:e}};return T("".concat(I,"/v2/users/current"),t)},getMeDetails:function(){var t={method:"GET",headers:{Authorization:e}};return T("".concat(I,"/v2/channels/me"),t)},getChannelItems:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,s=arguments.length>2?arguments[2]:void 0,c={method:"GET",headers:{Authorization:e}},r=w({limit:n,offset:s});return T("".concat(I,"/v2/store/").concat(t,"/items").concat(r),c)}}},V=c.a.createContext(null);function D(e){var t=e.children,n=c.a.useState(),s=Object(j.a)(n,2),r=s[0],a=s[1],i=N("StreamElementsJWT",null),o=Object(j.a)(i,2),l=o[0],u={user:r,setUser:a,token:l,setToken:o[1],APIService:l?E("Bearer ".concat(l)):null};return Object(f.jsx)(V.Provider,{value:u,children:t})}function J(){return c.a.useContext(V)}n(179);var P=function(){var e=J(),t=e.user,n=e.setUser,c=e.APIService,r=e.setToken,a=Object(s.useState)([]),i=Object(j.a)(a,2),o=i[0],l=i[1],m=Object(s.useCallback)((function(){return h.apply(this,arguments)}),[c,n]),b=Object(s.useCallback)((function(e){return p.apply(this,arguments)}),[c]);return Object(s.useEffect)((function(){m()}),[]),Object(s.useEffect)((function(){(null===t||void 0===t?void 0:t._id)?b(null===t||void 0===t?void 0:t._id):l([])}),[null===t||void 0===t?void 0:t._id,b]),Object(f.jsxs)("div",{className:"home",children:[Object(f.jsx)(v,{user:t,logout:function(){return r(null)}}),Object(f.jsx)("div",{className:"content",children:Object(f.jsx)(M,{items:o,children:function(e,t,n,s){return Object(f.jsxs)(f.Fragment,{children:[e,Object(f.jsx)(g,{items:t,sort:n,setSort:s})]})}})})]});function h(){return(h=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=11;break}return e.prev=1,e.next=4,null===c||void 0===c?void 0:c.getMeDetails();case 4:t=e.sent,n(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function p(){return(p=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=11;break}return e.prev=1,e.next=4,null===c||void 0===c?void 0:c.getChannelItems(t);case 4:n=e.sent,l(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}},A=n(77),F=(n(180),function(){var e=J(),t=e.token,n=e.setToken,c=Object(o.g)(),r=Object(s.useState)(""),a=Object(j.a)(r,2),i=a[0],l=a[1];return Object(s.useEffect)((function(){t&&c("/")}),[]),Object(f.jsxs)("div",{className:"login-page",children:[Object(f.jsx)("h1",{className:"page-title",children:"StreamElements Sounds editor"}),Object(f.jsxs)("div",{className:"login-block",children:[Object(f.jsxs)("div",{className:"info-box warning",children:[Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)("i",{className:"fas fa-info-circle"}),Object(f.jsx)("span",{children:"Information"})]}),Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("p",{children:"To manage sounds the tool needs your JWT (JSON web token)."}),Object(f.jsx)("p",{children:"You can find this by logging into StreamElements, clicking your image in the top right, then your username and lastly Channel Settings."}),Object(f.jsx)("p",{children:'Then toggle the "Show secrets" button, and copy the JWT in full inside the input field.'})]}),Object(f.jsx)("div",{className:"footer",children:Object(f.jsx)("span",{children:"Do not share this token!"})})]}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(i),l(""),c("/")},children:[Object(f.jsx)("input",{type:"password",value:i,onChange:function(e){return l(e.target.value)},placeholder:"JWT (JSON web token)"}),Object(f.jsx)("button",{type:"submit",children:"Login"})]})]}),Object(f.jsxs)("div",{className:"copy",children:[Object(f.jsx)("div",{className:"who",children:"\xa9 damon02 - 2021"}),Object(f.jsxs)("div",{className:"version",children:["v",A.version]})]})]})}),W=function(e){var t=e.children,n=J(),s=Object(o.f)();return(null===n||void 0===n?void 0:n.token)?t:Object(f.jsx)(o.a,{to:"/login",state:{from:s}})};n(181);var _=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.b,{path:"/",element:Object(f.jsx)(W,{children:Object(f.jsx)(P,{})})}),Object(f.jsx)(o.b,{index:!1,path:"login",element:Object(f.jsx)(F,{})})]})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,188)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),s(e),c(e),r(e),a(e)}))};n(182);a.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(i.a,{children:Object(f.jsx)(D,{children:Object(f.jsx)(_,{})})})}),document.getElementById("root")),B()},77:function(e){e.exports=JSON.parse('{"name":"onscreen-sounds","version":"0.1.0","homepage":"https://damon02.github.io/streamelements-store-manager","private":true,"dependencies":{"@types/d3-ease":"3.0.0","d3-ease":"3.0.1","date-fns":"2.25.0","immer":"9.0.6","lodash":"4.17.21","node-sass":"6.0.1","react":"17.0.2","react-dom":"17.0.2","react-router-dom":"6.0.2","react-scripts":"4.0.3","react-spring":"9.3.0","typescript":"4.4.4","wavesurfer-react":"2.0.11","wavesurfer.js":"4.6.0","web-vitals":"1.1.2"},"devDependencies":{"@testing-library/jest-dom":"5.15.0","@testing-library/react":"11.2.7","@testing-library/user-event":"12.8.3","@types/date-fns":"2.6.0","@types/jest":"26.0.24","@types/lodash":"4.14.176","@types/node":"12.20.37","@types/react":"17.0.34","@types/react-dom":"17.0.11","eslint":"7.31.0","eslint-config-airbnb":"18.2.1","eslint-config-airbnb-typescript":"12.3.1","eslint-config-prettier":"8.3.0","eslint-config-react-app":"6.0.0","eslint-import-resolver-typescript":"2.4.0","eslint-loader":"4.0.2","eslint-plugin-deprecation":"1.2.1","eslint-plugin-import":"2.23.4","eslint-plugin-jest":"24.3.6","eslint-plugin-jsx-a11y":"6.4.1","eslint-plugin-prettier":"3.4.0","eslint-plugin-react":"7.24.0","eslint-plugin-react-hooks":"4.2.0","prettier":"2.3.1","prettier-eslint":"12.0.0","prettier-eslint-cli":"5.0.1"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","lint":"eslint --ext .js,.jsx,.ts,.tsx src --color && npm run prettier-check","prettier-check":"prettier --check --config ./.prettierrc \\"./src/**/*.ts\\" \\"./src/**/*.tsx\\"","prettier-format-all":"prettier --write --config ./.prettierrc \\"./src/**/*.ts\\" \\"./src/**/*.tsx\\""},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"pre-commit":["prettier-check"]}')},84:function(e,t,n){},97:function(e,t,n){}},[[183,1,2]]]);
//# sourceMappingURL=main.bd64137c.chunk.js.map