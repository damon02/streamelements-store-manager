{"version":3,"sources":["hooks/useOnClickOutside.tsx","components/header/Header.tsx","hooks/usePrevious.tsx","utils/constants.ts","components/itemList/ItemRow.tsx","components/title/Title.tsx","utils/localStorage.ts","hooks/useSessionStorage.tsx","components/itemList/ItemList.tsx","hooks/useWindowSize.tsx","hooks/useDebounce.tsx","hooks/useLocalStorage.tsx","utils/general.ts","components/filterManager/FilterHeader.tsx","components/filterManager/FilterManager.tsx","services/APIService.ts","hooks/useAuth.tsx","pages/home/Home.tsx","pages/login/LoginPage.tsx","components/itemDetails/ItemWrapper.tsx","components/itemDetails/FilePickerRow.tsx","components/itemDetails/FilePicker.tsx","components/itemDetails/DeletePrompt.tsx","components/itemDetails/ItemDetails.tsx","hooks/useOutletContexts.tsx","components/router/protectedRoute/ProtectedRoute.tsx","components/app/App.tsx","reportWebVitals.ts","index.tsx"],"names":["useOnClickOutside","ref","handler","useEffect","listener","event","current","contains","target","document","addEventListener","removeEventListener","Header","user","guestUsername","loading","logout","allItems","React","showMenu","setShowMenu","username","displayName","menuAnimationProps","useSpring","opacity","transform","config","duration","easing","easeQuadInOut","className","role","onKeyPress","e","key","onClick","tabIndex","style","backgroundImage","avatar","isPartner","div","type","text","filter","i","enabled","map","item","bot","identifier","name","description","cost","createdAt","format","Date","join","navigator","clipboard","writeText","copyToClipboardCSV","window","open","usePrevious","value","useRef","BASE_URL","isSafari","test","userAgent","ItemRow","navigate","useNavigate","hasCopiedToClipboard","setHasCopied","previousSource","alert","audio","src","id","_id","wavesurferRef","playing","setPlaying","setPlayPosition","waveformInitialized","setInitialized","handleWSMount","waveSurfer","load","on","getCurrentTime","play","playPause","setVolume","volume","setTimeout","disabled","includes","preventDefault","stopPropagation","Math","round","onMount","container","p","cursorColor","waveColor","progressColor","height","barWidth","barHeight","cursorWidth","hideScrollbar","subscriberOnly","Title","items","titleItems","manipulatedKey","adjustableKey","loadFromLocalStorage","defaultValue","localStorage","undefined","JSON","parse","err","console","error","saveToLocalStorage","stringify","useSessionStorage","initialValue","forceReset","useState","sessionStorage","getItem","removeItem","storedValue","setStoredValue","valueToStore","Function","setItem","ItemList","sort","setSort","resetFilters","width","windowSize","setWindowSize","handleResize","innerWidth","innerHeight","useWindowSize","previousItemLength","length","itemsPerPage","h","itemAmount","floor","determineItemsPerPage","delay","debouncedValue","setDebouncedValue","clearTimeout","useDebounce","page","setPage","lastPage","ceil","handleSort","order","slice","handlePageClick","method","useLocalStorage","sortByKey","array","produce","draft","a","b","less","more","x","get","y","objectToQueryString","object","Object","keys","reduce","k","push","encodeURIComponent","FilterHeader","query","setQuery","minVolume","setMinVolume","maxVolume","setMaxVolume","minCost","setMinCost","maxCost","setMaxCost","minSeconds","setMinSeconds","maxSeconds","setMaxSeconds","placeholder","onChange","min","max","parseInt","FilterManager","children","processedItems","setProcessedItems","memoizedProcessFiltering","s","toUpperCase","indexOf","sortKey","mapSingleKeyToPath","FiltersComponent","fetchAPI","url","options","fetch","then","response","ok","Error","statusText","json","APIService","token","getCurrentUserChannel","headers","Authorization","getUserChannelFromUserName","getMeDetails","getChannelItems","channelId","limit","offset","saveChannelItem","body","createChannelItem","deleteChannelItem","itemId","getUploadedItems","uploadFile","file","fileName","formData","FormData","append","AuthContext","createContext","AuthProvider","setUser","setGuestUsername","setToken","Provider","useAuth","useContext","Home","setItems","files","setFiles","setLoading","memoizedFetchUserDetails","useCallback","memoizedFetchChannelItems","memoizedFetchAllFileDetails","context","index","findIndex","newArr","setFile","reloadItems","channel","channelItems","filteredItems","previouslyCachedDurations","Promise","all","cachedDuration","find","determineSoundDuration","itemsWithDuration","allUploadedItems","uploads","ctx","AudioContext","r","arrayBuffer","decodeAudioData","audioBuffer","LoginPage","guestUserId","setGuestUserId","queryObject","splitObject","cloneDeep","charAt","splittedQuery","split","keyValueObj","forEach","queryParam","keyValue","queryStringToObject","useLocation","search","jwt","setJWT","setUsername","onSubmit","onKeyDown","pjson","version","ItemWrapper","label","additionalLabel","subtitle","allowsMin","parsedValue","FilePickerRow","selectedFile","handleOnClick","playSound","soundFile","sound","Audio","FilePicker","setSelectedFile","fileInputRef","playPosition","showFileList","setShowFileList","filteredResults","setFilteredResults","fileListRef","newResults","f","accept","DeletePrompt","api","showPrompt","setShowPrompt","onDelete","setError","handleDeleteSound","ItemDetails","useParams","useOutletContext","saving","setSaving","showDeletePrompt","setShowDeletePrompt","setEnabled","setName","setDescription","setCost","quantity","total","setQuantity","cooldown","global","globalCooldown","setGlobalCooldown","userCooldown","setUserCooldown","categoryName","categoryCooldownName","setCategoryCooldownName","category","categoryCooldownTime","setCategoryCooldownTime","command","setCommand","website","extension","confirmation","redeemables","setRedeemables","handleCloseDetails","sources","sendResponse","match","u","unsavedChanges","hasUnsavedChanges","checked","formatDuration","intervalToDuration","start","end","v","step","handleStyle","marginTop","backgroundColor","borderColor","railStyle","trackStyle","handleOnSave","addNewSound","applyChanges","resetAllToDefaults","newItem","convertInputsToEditedChannelItem","accessCodes","mode","accessLevel","allowMessages","uploadedItem","processedItem","existingChannelItem","newFile","graphics","featured","userInput","ProtectedRoute","auth","location","to","state","from","App","path","element","reportWebVitals","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8c93c41d.chunk.js","sourcesContent":["import { RefObject, useEffect } from 'react'\n\n// Hook\nexport function useOnClickOutside(\n  ref: RefObject<HTMLElement>,\n  handler: (event: CustomEvent) => void\n) {\n  useEffect(\n    () => {\n      const listener = (event: CustomEvent) => {\n        // Do nothing if clicking ref's element or descendent elements\n        if (!ref.current || ref.current.contains(event.target as Node)) {\n          return\n        }\n\n        handler(event)\n      }\n\n      document.addEventListener('mousedown', listener as EventListener)\n      document.addEventListener('touchstart', listener as EventListener)\n\n      return () => {\n        document.removeEventListener('mousedown', listener as EventListener)\n        document.removeEventListener('touchstart', listener as EventListener)\n      }\n    },\n    // Add ref and handler to effect dependencies\n    // It's worth noting that because passed in handler is a new ...\n    // ... function on every render that will cause this effect ...\n    // ... callback/cleanup to run every render. It's not a big deal ...\n    // ... but to optimize you can wrap handler in useCallback before ...\n    // ... passing it into this hook.\n    [ref, handler]\n  )\n}\n","import * as React from 'react'\nimport { animated, useSpring } from 'react-spring'\nimport { easeQuadInOut } from 'd3-ease'\nimport { format } from 'date-fns'\n\nimport { EditedChannelItem, StreamElements } from '../../@types/types'\nimport './Header.scss'\nimport { useOnClickOutside } from '../../hooks/useOnClickOutside'\n\ninterface IProps {\n  user?: StreamElements.Channel\n  loading: boolean\n  guestUsername: string | null\n  logout: () => void\n  allItems: EditedChannelItem[]\n}\n\nconst Header = ({ user, loading, guestUsername, logout, allItems }: IProps) => {\n  const [showMenu, setShowMenu] = React.useState<boolean>(false)\n\n  const username = user?.displayName\n\n  const menuAnimationProps = useSpring({\n    opacity: showMenu ? 1 : 0,\n    transform: showMenu\n      ? 'translateY(0%) translateX(0%) scale(1)'\n      : 'translateY(-100%) translateX(50%) scale(0)',\n    config: { duration: 250, easing: easeQuadInOut }\n  })\n\n  const ref = React.useRef<HTMLDivElement>(null)\n  useOnClickOutside(ref, () => setShowMenu(false))\n\n  return (\n    <div className={`header-app${guestUsername ? ' guest-mode' : ''}`}>\n      <div className=\"title\">\n        <h1>StreamElements Sounds editor</h1>\n        {guestUsername ? (\n          <div className=\"guest\">Guest mode</div>\n        ) : (\n          <div className=\"account\">Editor mode</div>\n        )}\n      </div>\n      <div className=\"buttons\">\n        <div\n          className={`button-user${showMenu ? ' active' : ''}`}\n          role=\"button\"\n          onKeyPress={e => (e.key === 'enter' ? setShowMenu(!showMenu) : {})}\n          onClick={() => setShowMenu(!showMenu)}\n          tabIndex={0}\n        >\n          <div className=\"user-image\" style={{ backgroundImage: `url(${user?.avatar})` }} />\n          <div className=\"name\">{username || <i className=\"fas fa-spin fa-spinner\" />}</div>\n          {user?.isPartner ? (\n            <div className=\"partner-badge\">\n              <i className=\"fas fa-check\" />\n            </div>\n          ) : null}\n          <div className=\"triangle\">\n            <i className=\"fas fa-caret-down\" />\n          </div>\n        </div>\n      </div>\n      <animated.div className=\"user-menu\" style={{ ...menuAnimationProps }} ref={ref}>\n        <button className=\"button-menu\" type=\"button\" onClick={() => copyToClipboardCSV()}>\n          Copy all items to clipboard\n        </button>\n        <button\n          className=\"button-menu\"\n          type=\"button\"\n          onClick={() =>\n            window.open(`https://github.com/damon02/streamelements-store-manager`, '_blank')\n          }\n        >\n          <i className=\"icon fab fa-github\" />\n          View on GitHub\n        </button>\n        <button className=\"button-menu danger\" type=\"button\" onClick={() => logout()}>\n          <i className=\"icon fas fa-sign-out-alt\" />\n          Log out\n        </button>\n      </animated.div>\n    </div>\n  )\n\n  function copyToClipboardCSV() {\n    const text = `Command;Name;Description;Cost;Date added\\n${allItems\n      .filter(i => i.enabled)\n      .map(\n        item =>\n          `${item.bot?.identifier};${item.name || '<empty name>'};${\n            item.description || '<empty description>'\n          };${item.cost || 0};${\n            item.createdAt\n              ? format(new Date(item.createdAt), 'dd-MM-yyyy HH:mm:ss')\n              : '<empty createdAt>'\n          };`\n      )\n      .join('\\n')}`\n\n    navigator.clipboard.writeText(text)\n    setShowMenu(false)\n  }\n}\n\nexport default Header\n","import { useEffect, useRef } from 'react'\n\n// Hook\nexport function usePrevious<T>(value: T): T {\n  // The ref object is a generic container whose current property is mutable ...\n  // ... and can hold any value, similar to an instance property on a class\n  const ref: any = useRef<T>()\n  // Store current value in ref\n  useEffect(() => {\n    ref.current = value\n  }, [value]) // Only re-run if value changes\n  // Return previous value (happens before update in useEffect above)\n  return ref.current\n}\n","export const BASE_URL = 'https://api.streamelements.com/kappa'\nexport const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent)\n","import * as React from 'react'\nimport { WaveSurfer, WaveForm } from 'wavesurfer-react'\nimport { format } from 'date-fns'\nimport { useNavigate } from 'react-router-dom'\n\nimport { EditedChannelItem } from '../../@types/types'\nimport { usePrevious } from '../../hooks/usePrevious'\nimport { isSafari } from '../../utils/constants'\n\ninterface IProps {\n  item: EditedChannelItem\n  guestUsername: string | null\n}\n\nconst ItemRow = ({ item, guestUsername }: IProps) => {\n  const navigate = useNavigate()\n  const [hasCopiedToClipboard, setHasCopied] = React.useState(false)\n\n  const previousSource = usePrevious(item.alert?.audio?.src)\n\n  const id = `waveform-${item._id}`\n  const wavesurferRef = React.useRef<any>(null)\n\n  const [playing, setPlaying] = React.useState(false)\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [playPosition, setPlayPosition] = React.useState(0)\n  const [waveformInitialized, setInitialized] = React.useState(false)\n  const handleWSMount = React.useCallback(\n    waveSurfer => {\n      wavesurferRef.current = waveSurfer\n\n      if (wavesurferRef.current && item.alert?.audio?.src) {\n        wavesurferRef.current.load(item.alert?.audio?.src)\n\n        wavesurferRef.current.on('play', () => {\n          setPlaying(true)\n        })\n\n        wavesurferRef.current.on('pause', () => {\n          setPlaying(false)\n        })\n\n        wavesurferRef.current.on('finish', () => {\n          setPlaying(false)\n        })\n\n        wavesurferRef.current.on('seek', () => {\n          setPlayPosition(wavesurferRef.current.getCurrentTime())\n        })\n\n        wavesurferRef.current.on('audioprocess', () => {\n          setPlayPosition(wavesurferRef.current.getCurrentTime())\n        })\n\n        setInitialized(true)\n      }\n    },\n    [item.alert?.audio?.src]\n  )\n\n  const play = React.useCallback(() => {\n    wavesurferRef.current.playPause()\n  }, [])\n\n  React.useEffect(() => {\n    if (\n      waveformInitialized &&\n      previousSource !== item.alert?.audio?.src &&\n      item.alert?.audio?.src\n    ) {\n      wavesurferRef.current.load(item.alert?.audio?.src)\n    }\n  }, [item.alert?.audio?.src, previousSource, waveformInitialized])\n\n  React.useEffect(() => {\n    if (wavesurferRef.current) {\n      wavesurferRef.current.setVolume(item.alert?.audio?.volume)\n    }\n  }, [item.alert?.audio?.volume])\n\n  React.useEffect(() => {\n    if (hasCopiedToClipboard) {\n      setTimeout(() => setHasCopied(false), 1000)\n    }\n  }, [hasCopiedToClipboard])\n\n  return (\n    <tr\n      className={`item${!item.enabled ? ' disabled' : ''}`}\n      key={item._id}\n      onClick={() => {\n        if (!guestUsername) {\n          navigate(`item/${item._id}`)\n        } else {\n          play()\n        }\n      }}\n    >\n      <td className=\"play\">\n        <button\n          className=\"inline-button\"\n          type=\"button\"\n          disabled={(item.alert?.audio?.src || '')?.includes('.ogg') && isSafari}\n          onKeyPress={e => {\n            e.preventDefault()\n            e.stopPropagation()\n            if (e.key === 'ENTER') {\n              if (item.alert?.audio?.src) {\n                play()\n              }\n            }\n          }}\n          onClick={e => {\n            e.preventDefault()\n            e.stopPropagation()\n            if (item.alert?.audio?.src) {\n              play()\n            }\n          }}\n        >\n          <i className={playing ? 'fas fa-pause' : 'fas fa-play'} />\n        </button>\n      </td>\n      <td className=\"copy-clipboard\">\n        <div\n          className={`inline-button${hasCopiedToClipboard ? ' active' : ''}`}\n          role=\"button\"\n          tabIndex={0}\n          onKeyPress={e => {\n            e.preventDefault()\n            e.stopPropagation()\n            navigator.clipboard.writeText(`!sound ${item.bot?.identifier}` || '')\n            setHasCopied(true)\n          }}\n          onClick={e => {\n            e.preventDefault()\n            e.stopPropagation()\n            navigator.clipboard.writeText(`!sound ${item.bot?.identifier}` || '')\n            setHasCopied(true)\n          }}\n        >\n          {hasCopiedToClipboard ? (\n            <i className=\"fas fa-clipboard-check\" />\n          ) : (\n            <i className=\"far fa-clipboard\" />\n          )}\n        </div>\n      </td>\n      <td className=\"sound-name\">\n        <div className=\"name-split\">\n          <div className=\"name\">{item.bot?.identifier}</div>\n          <div className=\"description\">\n            {item.name} - {item.description}\n          </div>\n        </div>\n      </td>\n      <td className=\"cost center\">{item.cost}</td>\n      <td className=\"volume center\">{Math.round((item.alert?.audio?.volume || 0) * 100)}%</td>\n      <td className=\"duration center\">\n        {item.duration ? (\n          `${Math.round(item.duration * 10) / 10}s`\n        ) : isSafari && item.alert?.audio?.src?.includes('.ogg') ? (\n          <div className=\"multi-line-warn\">OGG files not supported</div>\n        ) : (\n          <i className=\"fas fa-question\" />\n        )}\n      </td>\n      <td className=\"waveform\">\n        <WaveSurfer onMount={handleWSMount} ref={wavesurferRef}>\n          <WaveForm\n            id={id}\n            container={id}\n            p\n            cursorColor=\"#ff000000\"\n            waveColor=\"#BDBABD\"\n            progressColor=\"#9a64ff\"\n            height={35}\n            barWidth={1}\n            barHeight={3}\n            cursorWidth={1}\n            hideScrollbar={true}\n          />\n        </WaveSurfer>\n      </td>\n      <td className=\"check center enabled\">\n        <i className={item.enabled ? 'fas fa-check' : 'fas fa-times'} />\n      </td>\n      <td className=\"check center subs-only\">\n        <i className={item.subscriberOnly ? 'fas fa-check' : 'fas fa-times'} />\n      </td>\n      <td className=\"dateCreated center\">\n        <div className=\"date-creation\">\n          <span>{item.createdAt && format(new Date(item.createdAt), 'dd-MM-yyyy')}&nbsp;</span>\n          <span>{item.createdAt && format(new Date(item.createdAt), 'HH:mm:ss')}</span>\n        </div>\n      </td>\n      <td className=\"download\">\n        <div\n          className=\"inline-button\"\n          role=\"button\"\n          tabIndex={0}\n          onKeyPress={e => {\n            e.preventDefault()\n            e.stopPropagation()\n            if (e.key === 'ENTER') {\n              if (item.alert?.audio?.src) {\n                window.open(item.alert.audio.src)\n              }\n            }\n          }}\n          onClick={e => {\n            e.preventDefault()\n            e.stopPropagation()\n            if (item.alert?.audio?.src) {\n              window.open(item.alert.audio.src)\n            }\n          }}\n        >\n          <i className=\"fas fa-download\" />\n        </div>\n      </td>\n    </tr>\n  )\n\n  // async function playSound(soundFile: string, volume: number = 1.0) {\n  //   const sound = new Audio(soundFile)\n  //   sound.volume = volume\n  //   setPlaying(true)\n  //   try {\n  //     await sound.play()\n  //     const length = sound.duration\n  //     setTimeout(() => setPlaying(false), length * 1000)\n  //   } catch (error) {\n  //     console.error(error)\n  //   }\n  // }\n}\n\nexport default React.memo(ItemRow)\n","import React from 'react'\nimport { Helmet } from 'react-helmet-async'\n\ninterface IProps {\n  titleItems: Array<string | number | undefined>\n}\n\nconst Title = ({ titleItems }: IProps) => {\n  return (\n    <Helmet>\n      <title>{convertTitle(titleItems)}</title>\n    </Helmet>\n  )\n\n  function convertTitle(items: Array<string | number | undefined>) {\n    return `${items.filter(i => i).join(' - ')} - StreamElements Sounds Editor`\n  }\n}\n\nexport default Title\n","export const manipulatedKey = (adjustableKey: string) => `onscreensounds-${adjustableKey}`\n\nexport function loadFromLocalStorage<T = any>(key: string, defaultValue?: T) {\n  try {\n    const value = localStorage[manipulatedKey(key)]\n\n    return value !== undefined ? JSON.parse(value) : defaultValue\n  } catch (err) {\n    console.error(err)\n    return defaultValue\n  }\n}\n\nexport function saveToLocalStorage<T = any>(key: string, value: T) {\n  try {\n    localStorage[manipulatedKey(key)] = JSON.stringify(value)\n  } catch (err) {\n    console.error(err)\n  }\n}\n\nexport function removeFromLocalStorage(key: string) {\n  try {\n    delete localStorage[manipulatedKey(key)]\n  } catch (err) {\n    console.error(err)\n  }\n}\n","import { Dispatch, SetStateAction, useState } from 'react'\nimport { manipulatedKey } from '../utils/localStorage'\n\nexport function useSessionStorage<T>(\n  key: string,\n  initialValue: T,\n  forceReset?: boolean\n): [T, Dispatch<SetStateAction<T>>] {\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    try {\n      const item = window.sessionStorage.getItem(manipulatedKey(key))\n\n      if (forceReset) {\n        window.sessionStorage.removeItem(manipulatedKey(key))\n      }\n\n      if (item === 'undefined' && forceReset !== true) {\n        return undefined\n      }\n\n      return item && forceReset !== true ? JSON.parse(item) : initialValue\n    } catch (error) {\n      console.error(error)\n      return initialValue\n    }\n  })\n\n  const setValue = (value: T | SetStateAction<T>): void => {\n    try {\n      const valueToStore = value instanceof Function ? value(storedValue) : value\n      setStoredValue(valueToStore)\n      window.sessionStorage.setItem(manipulatedKey(key), JSON.stringify(valueToStore))\n    } catch (error) {\n      console.error(error)\n    }\n  }\n\n  return [storedValue, setValue]\n}\n","import * as React from 'react'\nimport { useNavigate } from 'react-router-dom'\n\nimport ItemRow from './ItemRow'\nimport Title from '../title/Title'\n\nimport { EditedChannelItem, StreamElements, TableSortType } from '../../@types/types'\nimport { usePrevious } from '../../hooks/usePrevious'\nimport { useWindowSize } from '../../hooks/useWindowSize'\nimport { useDebounce } from '../../hooks/useDebounce'\nimport { useSessionStorage } from '../../hooks/useSessionStorage'\n\nimport './ItemList.scss'\n\ninterface IProps {\n  allItems: EditedChannelItem[]\n  items: EditedChannelItem[]\n  user: StreamElements.Channel | undefined\n  sort: { sort: TableSortType; order: 'asc' | 'desc' }\n  setSort: (sort: { sort: TableSortType; order: 'asc' | 'desc' }) => void\n  resetFilters: () => void\n  guestUsername: string | null\n}\n\nconst ItemList = ({\n  allItems,\n  items,\n  user,\n  sort,\n  setSort,\n  resetFilters,\n  guestUsername\n}: IProps) => {\n  const navigate = useNavigate()\n  const { height } = useWindowSize()\n  const previousItemLength = usePrevious(items.length)\n  const debouncedHeight = useDebounce(height, 100)\n\n  const itemsPerPage = determineItemsPerPage(debouncedHeight || 980)\n  const [page, setPage] = useSessionStorage<number>('page', 1)\n  const lastPage = Math.ceil(items.length / itemsPerPage)\n\n  React.useEffect(() => {\n    if (previousItemLength !== items.length) {\n      setPage(1)\n    }\n  }, [previousItemLength, items.length, setPage])\n\n  return (\n    <div className=\"list-wrapper\">\n      <Title titleItems={[`Page ${page}`, 'Sounds', user?.displayName]} />\n      <table className=\"item-list\">\n        <thead>\n          <tr className=\"table-header\">\n            {/* eslint-disable-next-line jsx-a11y/control-has-associated-label */}\n            <th className=\"play\" />\n            {/* eslint-disable-next-line jsx-a11y/control-has-associated-label */}\n            <th className=\"copy-clipboard\" />\n            <th className=\"sound-name clickable\" onClick={() => handleSort('soundName')}>\n              Sound name\n              <i\n                className={`fas fa-sort${\n                  sort.sort === 'soundName' ? (sort.order === 'asc' ? '-up' : '-down') : ' unset'\n                }`}\n              />\n            </th>\n            <th className=\"cost center clickable\" onClick={() => handleSort('cost')}>\n              Cost\n              <i\n                className={`fas fa-sort${\n                  sort.sort === 'cost' ? (sort.order === 'asc' ? '-up' : '-down') : ' unset'\n                }`}\n              />\n            </th>\n            <th className=\"volume center clickable\" onClick={() => handleSort('volume')}>\n              Volume\n              <i\n                className={`fas fa-sort${\n                  sort.sort === 'volume' ? (sort.order === 'asc' ? '-up' : '-down') : ' unset'\n                }`}\n              />\n            </th>\n            <th className=\"duration center clickable\" onClick={() => handleSort('duration')}>\n              Duration\n              <i\n                className={`fas fa-sort${\n                  sort.sort === 'duration' ? (sort.order === 'asc' ? '-up' : '-down') : ' unset'\n                }`}\n              />\n            </th>\n            {/* eslint-disable-next-line jsx-a11y/control-has-associated-label */}\n            <th className=\"waveform\" />\n            <th className=\"check center enabled clickable\" onClick={() => handleSort('enabled')}>\n              Enabled\n              <i\n                className={`fas fa-sort${\n                  sort.sort === 'enabled' ? (sort.order === 'asc' ? '-up' : '-down') : ' unset'\n                }`}\n              />\n            </th>\n            <th className=\"check center subs-only clickable\" onClick={() => handleSort('subsOnly')}>\n              Subs only{' '}\n              <i\n                className={`fas fa-sort${\n                  sort.sort === 'subsOnly' ? (sort.order === 'asc' ? '-up' : '-down') : ' unset'\n                }`}\n              />\n            </th>\n            <th className=\"dateCreated center clickable\" onClick={() => handleSort('dateCreated')}>\n              Date created\n              <i\n                className={`fas fa-sort${\n                  sort.sort === 'dateCreated' ? (sort.order === 'asc' ? '-up' : '-down') : ' unset'\n                }`}\n              />\n            </th>\n            {/* eslint-disable-next-line jsx-a11y/control-has-associated-label */}\n            <th className=\"download\" />\n          </tr>\n        </thead>\n        <tbody>\n          {items.slice((page - 1) * itemsPerPage, page * itemsPerPage).map(i => (\n            <ItemRow item={i} key={i._id} guestUsername={guestUsername} />\n          ))}\n        </tbody>\n      </table>\n      <div className=\"page-controller-wrapper\">\n        {items.length !== allItems.length && (\n          <div\n            className=\"filtered-warning\"\n            onClick={() => resetFilters()}\n            onKeyPress={() => resetFilters()}\n            tabIndex={0}\n            role=\"button\"\n          >\n            Results are filtered, click here to clear filters\n          </div>\n        )}\n        <div className=\"page-controller\">\n          <div className=\"buttons-pages\">\n            <button\n              className=\"button first-page primary small\"\n              type=\"button\"\n              onClick={() => setPage(1)}\n              disabled={page === 1}\n            >\n              <i className=\"icon fas fa-angle-double-left\" />\n            </button>\n            <button\n              className=\"button previous\"\n              type=\"button\"\n              onClick={() => handlePageClick('previous')}\n              disabled={page === 1}\n            >\n              <i className=\"icon fas fa-angle-left\" />\n              <span className=\"text\">Previous page</span>\n            </button>\n            <div className=\"page-summary\">\n              <div className=\"page-number\">\n                Page {page} of{' '}\n                {items.length < itemsPerPage ? 1 : Math.ceil(items.length / itemsPerPage)}\n              </div>\n              <div className=\"amount-per-page\">{items.length} results</div>\n            </div>\n            <button\n              className=\"button next\"\n              type=\"button\"\n              onClick={() => handlePageClick('next')}\n              disabled={page === lastPage}\n            >\n              <i className=\"icon fas fa-angle-right\" />\n              <span className=\"text\">Next page</span>\n            </button>\n            <button\n              className=\"button last-page primary small\"\n              type=\"button\"\n              onClick={() => setPage(lastPage)}\n              disabled={page === lastPage}\n            >\n              <i className=\"icon fas fa-angle-double-right\" />\n            </button>\n          </div>\n          {!guestUsername && (\n            <button\n              className=\"button primary small with-icon-margin new\"\n              type=\"button\"\n              onClick={() => navigate(`item/new`)}\n            >\n              <i className=\"icon fas fa-plus\" />\n              <span className=\"text\">Add new sound</span>\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n\n  function determineItemsPerPage(h: number) {\n    const itemAmount = (h - 174 - (items.length !== allItems.length ? 20 : 0)) / 40\n    return Math.floor(itemAmount)\n  }\n\n  function handleSort(key: TableSortType) {\n    setSort({\n      sort: key,\n      order: sort.sort === key ? (sort.order === 'asc' ? 'desc' : 'asc') : 'asc'\n    })\n  }\n\n  function handlePageClick(method: 'previous' | 'next') {\n    const newPage = method === 'previous' ? page - 1 : page + 1\n    setPage(newPage)\n  }\n}\n\nexport default ItemList\n","import { useState, useEffect } from 'react'\n// Define general type for useWindowSize hook, which includes width and height\ninterface Size {\n  width: number | undefined\n  height: number | undefined\n}\n\n// Hook\nexport function useWindowSize(): Size {\n  // Initialize state with undefined width/height so server and client renders match\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n  const [windowSize, setWindowSize] = useState<Size>({\n    width: undefined,\n    height: undefined\n  })\n  useEffect(() => {\n    // Handler to call on window resize\n    function handleResize() {\n      // Set window width/height to state\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight\n      })\n    }\n    // Add event listener\n    window.addEventListener('resize', handleResize)\n    // Call handler right away so state gets updated with initial window size\n    handleResize()\n    // Remove event listener on cleanup\n    return () => window.removeEventListener('resize', handleResize)\n  }, []) // Empty array ensures that effect is only run on mount\n  return windowSize\n}\n","import { useState, useEffect } from 'react'\n\nexport function useDebounce<T>(value: T, delay: number): T {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState<T>(value)\n  useEffect(\n    () => {\n      // Update debounced value after delay\n      const handler = setTimeout(() => {\n        setDebouncedValue(value)\n      }, delay)\n      // Cancel the timeout if value changes (also on delay change or unmount)\n      // This is how we prevent debounced value from updating if value is changed ...\n      // .. within the delay period. Timeout gets cleared and restarted.\n      return () => {\n        clearTimeout(handler)\n      }\n    },\n    [value, delay] // Only re-call effect if value or delay changes\n  )\n  return debouncedValue\n}\n","import { Dispatch, SetStateAction, useState } from 'react'\nimport { manipulatedKey } from '../utils/localStorage'\n\nexport function useLocalStorage<T>(\n  key: string,\n  initialValue: T,\n  forceReset?: boolean\n): [T, Dispatch<SetStateAction<T>>] {\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    try {\n      const item = window.localStorage.getItem(manipulatedKey(key))\n\n      if (forceReset) {\n        window.localStorage.removeItem(manipulatedKey(key))\n      }\n\n      if (item === 'undefined' && forceReset !== true) {\n        return undefined\n      }\n\n      return item && forceReset !== true ? JSON.parse(item) : initialValue\n    } catch (error) {\n      console.error(error)\n      return initialValue\n    }\n  })\n\n  const setValue = (value: T | SetStateAction<T>): void => {\n    try {\n      const valueToStore = value instanceof Function ? value(storedValue) : value\n      setStoredValue(valueToStore)\n      window.localStorage.setItem(manipulatedKey(key), JSON.stringify(valueToStore))\n    } catch (error) {\n      console.error(error)\n    }\n  }\n\n  return [storedValue, setValue]\n}\n","import produce from 'immer'\nimport cloneDeep from 'lodash/cloneDeep'\nimport get from 'lodash/get'\n\nexport function sortByKey<T>(array: T[], key: string, order: 'asc' | 'desc' = 'asc'): T[] {\n  return produce(array, draft =>\n    draft.sort((a, b) => {\n      const less = order === 'asc' ? -1 : 1\n      const more = order === 'asc' ? 1 : -1\n      const x = get(a, key)\n      const y = get(b, key)\n\n      if (x && y) {\n        return x < y ? less : x > y ? more : 0\n      }\n      if (!x) {\n        return 1\n      }\n      return -1\n    })\n  )\n}\n\nexport function queryStringToObject(query: string): { [key: string]: string } {\n  let splitObject = cloneDeep(query)\n\n  // Remove ?\n  if (splitObject.charAt(0) === '?') {\n    splitObject = splitObject.slice(1)\n  }\n\n  // Create array by splitting on &\n  const splittedQuery = splitObject.split('&')\n  const keyValueObj: { [key: string]: string } = {}\n  // Make key value objects ( key=value -> {key: value} )\n  splittedQuery.forEach(queryParam => {\n    const keyValue = queryParam.split('=')\n    if (keyValue[1]) {\n      // eslint-disable-next-line prefer-destructuring\n      keyValueObj[keyValue[0]] = keyValue[1]\n    }\n  })\n\n  return keyValueObj\n}\n\nexport function objectToQueryString(object: {\n  [key: string]: string | number | boolean | undefined\n}): string {\n  if (Object.keys(object).length === 0) {\n    return ''\n  }\n\n  const str = `?${Object.keys(object)\n    .reduce((a: string[], k) => {\n      const value = object[k]\n      if (value || value === 0 || value === false) {\n        a.push(`${k}=${encodeURIComponent(value)}`)\n      }\n      return a\n    }, [])\n    .join('&')}`\n\n  return str\n}\n","import React from 'react'\n\nimport './FilterHeader.scss'\n\ninterface IProps {\n  query: string\n  setQuery: (query: string) => void\n  minVolume: number | undefined\n  setMinVolume: (minVolume: number | undefined) => void\n  maxVolume: number | undefined\n  setMaxVolume: (maxVolume: number | undefined) => void\n  minCost: number | undefined\n  setMinCost: (minCost: number | undefined) => void\n  maxCost: number | undefined\n  setMaxCost: (maxCost: number | undefined) => void\n  minSeconds: number | undefined\n  setMinSeconds: (minSeconda: number | undefined) => void\n  maxSeconds: number | undefined\n  setMaxSeconds: (maxSeconds: number | undefined) => void\n}\n\nconst FilterHeader = ({\n  query,\n  setQuery,\n  minVolume,\n  setMinVolume,\n  maxVolume,\n  setMaxVolume,\n  minCost,\n  setMinCost,\n  maxCost,\n  setMaxCost,\n  minSeconds,\n  setMinSeconds,\n  maxSeconds,\n  setMaxSeconds\n}: IProps) => (\n  <div className=\"filter-header\">\n    <div className=\"filter-item search\">\n      <h3>Search</h3>\n      <input\n        placeholder=\"Search by sound name\"\n        value={query}\n        onChange={e => setQuery(e.target.value)}\n      />\n    </div>\n    <div className=\"filter-item cost\">\n      <h3>Cost</h3>\n      <div className=\"flex\">\n        <input\n          className={(minCost || 0) < (maxCost || 0) ? 'warn' : ''}\n          type=\"number\"\n          value={minCost || undefined}\n          placeholder=\"Min\"\n          min={0}\n          max={9999999999}\n          onChange={e => setMinCost(parseInt(e.target.value, 10))}\n        />\n        <input\n          className={(minCost || 0) < (maxCost || 0) ? 'warn' : ''}\n          type=\"number\"\n          value={maxCost || undefined}\n          placeholder=\"Max\"\n          min={1}\n          max={1000000000}\n          onChange={e => setMaxCost(parseInt(e.target.value, 10))}\n        />\n      </div>\n    </div>\n    <div className=\"filter-item volume\">\n      <h3>Volume</h3>\n      <div className=\"flex\">\n        <input\n          className={(minVolume || 0) < (maxVolume || 0) ? 'warn' : ''}\n          type=\"number\"\n          value={minVolume || undefined}\n          placeholder=\"Min\"\n          min={0}\n          max={99}\n          onChange={e => setMinVolume(parseInt(e.target.value, 10))}\n        />\n        <input\n          className={(minVolume || 0) < (maxVolume || 0) ? 'warn' : ''}\n          type=\"number\"\n          value={maxVolume || undefined}\n          placeholder=\"Max\"\n          min={1}\n          max={100}\n          onChange={e => setMaxVolume(parseInt(e.target.value, 10))}\n        />\n      </div>\n    </div>\n    <div className=\"filter-item duration\">\n      <h3>Duration</h3>\n      <div className=\"flex\">\n        <input\n          className={(minSeconds || 0) < (maxSeconds || 0) ? 'warn' : ''}\n          type=\"number\"\n          value={minSeconds || undefined}\n          placeholder=\"Min\"\n          min={0}\n          max={9999999999}\n          onChange={e => setMinSeconds(parseInt(e.target.value, 10))}\n        />\n        <input\n          className={(minSeconds || 0) < (maxSeconds || 0) ? 'warn' : ''}\n          type=\"number\"\n          value={maxSeconds || undefined}\n          placeholder=\"Max\"\n          min={1}\n          max={1000000000}\n          onChange={e => setMaxSeconds(parseInt(e.target.value, 10))}\n        />\n      </div>\n    </div>\n  </div>\n)\n\nexport default FilterHeader\n","import * as React from 'react'\nimport { EditedChannelItem, TableSortType } from '../../@types/types'\nimport { useLocalStorage } from '../../hooks/useLocalStorage'\nimport { sortByKey } from '../../utils/general'\nimport FilterHeader from './FilterHeader'\n\ninterface IProps {\n  items: EditedChannelItem[]\n  children: (\n    FiltersComponent: React.ReactNode,\n    processedItems: EditedChannelItem[],\n    sort: { sort: TableSortType; order: 'asc' | 'desc' },\n    setSort: (newSort: { sort: TableSortType; order: 'asc' | 'desc' }) => void,\n    resetFilters: () => void\n  ) => React.ReactNode\n}\n\nconst FilterManager = ({ items, children }: IProps) => {\n  const [query, setQuery] = useLocalStorage<string>('query', '')\n  const [minVolume, setMinVolume] = useLocalStorage<number | undefined>('minVolume', undefined)\n  const [maxVolume, setMaxVolume] = useLocalStorage<number | undefined>('maxVolume', undefined)\n  const [minCost, setMinCost] = useLocalStorage<number | undefined>('minCost', undefined)\n  const [maxCost, setMaxCost] = useLocalStorage<number | undefined>('maxCost', undefined)\n  const [minSeconds, setMinSeconds] = useLocalStorage<number | undefined>('minSeconds', undefined)\n  const [maxSeconds, setMaxSeconds] = useLocalStorage<number | undefined>('maxSeconds', undefined)\n  const [sort, setSort] = useLocalStorage<{ sort: TableSortType; order: 'asc' | 'desc' }>('sort', {\n    sort: 'dateCreated',\n    order: 'desc'\n  })\n\n  const [processedItems, setProcessedItems] = React.useState<EditedChannelItem[]>(items)\n  const memoizedProcessFiltering = React.useCallback(processFiltering, [\n    query,\n    minVolume,\n    maxVolume,\n    minCost,\n    maxCost,\n    minSeconds,\n    maxSeconds\n  ])\n\n  React.useEffect(() => {\n    setProcessedItems(memoizedProcessFiltering(items, sort))\n  }, [items, memoizedProcessFiltering, sort])\n\n  const FiltersComponent = FilterHeader({\n    query,\n    setQuery,\n    minVolume,\n    setMinVolume,\n    maxVolume,\n    setMaxVolume,\n    minCost,\n    setMinCost,\n    maxCost,\n    setMaxCost,\n    minSeconds,\n    setMinSeconds,\n    maxSeconds,\n    setMaxSeconds\n  })\n\n  return <>{children(FiltersComponent, processedItems, sort, setSort, resetFilters)}</>\n\n  function processFiltering(\n    allItems: EditedChannelItem[],\n    s: { sort: TableSortType; order: 'asc' | 'desc' }\n  ) {\n    return sortByKey(\n      allItems.filter(\n        item =>\n          // Query checking, any should match so OR\n          (item.name.toUpperCase().indexOf(query.toUpperCase()) !== -1 ||\n            item.description.toUpperCase().includes(query.toUpperCase()) ||\n            item.bot?.identifier?.toUpperCase().includes(query.toUpperCase())) &&\n          // Strict clauses so AND\n          (item.alert?.audio?.volume || 0) * 100 >= (minVolume || 0) &&\n          (item.alert?.audio?.volume || 0) * 100 <= (maxVolume || 100) &&\n          (item.cost || 0) >= (minCost || 0) &&\n          (item.cost || 0) <= (maxCost || 100000000) &&\n          (item.duration || 0) >= (minSeconds || 0) &&\n          (item.duration || 0) <= (maxSeconds || 100000000)\n      ),\n      mapSingleKeyToPath(s.sort),\n      s.order\n    )\n  }\n\n  function mapSingleKeyToPath(sortKey: TableSortType): string {\n    switch (sortKey) {\n      case 'soundName':\n        return 'bot.identifier'\n      case 'volume':\n        return 'alert.audio.volume'\n      case 'dateCreated':\n        return 'createdAt'\n      case 'duration':\n        return 'duration'\n\n      default: {\n        return sortKey\n      }\n    }\n  }\n\n  function resetFilters() {\n    setQuery('')\n    setMinVolume(undefined)\n    setMaxVolume(undefined)\n    setMinCost(undefined)\n    setMaxCost(undefined)\n    setMinSeconds(undefined)\n    setMaxSeconds(undefined)\n  }\n}\n\nexport default FilterManager\n","import { BASE_URL } from '../utils/constants'\nimport { objectToQueryString } from '../utils/general'\nimport { EditedChannelItem, StreamElements } from '../@types/types'\n\nexport interface APIServiceProps {\n  getMeDetails: () => Promise<StreamElements.Channel>\n  getCurrentUserChannel: () => Promise<StreamElements.Channel>\n  getUserChannelFromUserName: (username: string) => Promise<StreamElements.Channel>\n  getChannelItems: (channelId: string) => Promise<StreamElements.ChannelItem[]>\n  saveChannelItem: (\n    channelId: string,\n    item: EditedChannelItem\n  ) => Promise<StreamElements.ChannelItem>\n  createChannelItem: (\n    channelId: string,\n    item: EditedChannelItem\n  ) => Promise<StreamElements.ChannelItem>\n  deleteChannelItem: (channelId: string, itemId: string) => Promise<void>\n  getUploadedItems: (\n    channelId: string,\n    limit?: number,\n    offset?: number\n  ) => Promise<StreamElements.UploadResponse>\n  uploadFile: (\n    channelId: string,\n    file: Blob,\n    fileName?: string\n  ) => Promise<StreamElements.UploadedFile>\n}\n\nconst APIService = (token: string | undefined): APIServiceProps => ({\n  getCurrentUserChannel: (): Promise<StreamElements.Channel> => {\n    const options: RequestInit = {\n      method: 'GET',\n      headers: !token\n        ? undefined\n        : {\n            Authorization: token\n          }\n    }\n\n    return fetchAPI(`${BASE_URL}/v2/users/current`, options)\n  },\n  getUserChannelFromUserName: (username: string): Promise<StreamElements.Channel> => {\n    const options: RequestInit = {\n      method: 'GET'\n    }\n\n    return fetchAPI(`${BASE_URL}/v2/channels/${username}`, options)\n  },\n  getMeDetails: (): Promise<StreamElements.Channel> => {\n    const options: RequestInit = {\n      method: 'GET',\n      headers: !token\n        ? undefined\n        : {\n            Authorization: token\n          }\n    }\n\n    return fetchAPI(`${BASE_URL}/v2/channels/me`, options)\n  },\n  getChannelItems: (\n    channelId: string,\n    limit: number = 25,\n    offset?: number\n  ): Promise<StreamElements.ChannelItem[]> => {\n    const options: RequestInit = {\n      method: 'GET',\n      headers: !token\n        ? undefined\n        : {\n            Authorization: token\n          }\n    }\n\n    const query = objectToQueryString({ limit, offset })\n\n    return fetchAPI(`${BASE_URL}/v2/store/${channelId}/items${query}`, options)\n  },\n  saveChannelItem: (\n    channelId: string,\n    item: EditedChannelItem\n  ): Promise<StreamElements.ChannelItem> => {\n    if (!token) {\n      throw new Error('API call only allowed when not a guest')\n    }\n\n    const options: RequestInit = {\n      method: 'PUT',\n      headers: {\n        Authorization: token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(item)\n    }\n\n    return fetchAPI(`${BASE_URL}/v2/store/${channelId}/items/${item._id}`, options)\n  },\n  createChannelItem: (\n    channelId: string,\n    item: EditedChannelItem\n  ): Promise<StreamElements.ChannelItem> => {\n    if (!token) {\n      throw new Error('API call only allowed when not a guest')\n    }\n\n    const options: RequestInit = {\n      method: 'POST',\n      headers: {\n        Authorization: token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(item)\n    }\n\n    return fetchAPI(`${BASE_URL}/v2/store/${channelId}/items`, options)\n  },\n  deleteChannelItem: (channelId: string, itemId: string): Promise<void> => {\n    if (!token) {\n      throw new Error('API call only allowed when not a guest')\n    }\n\n    const options: RequestInit = {\n      method: 'DELETE',\n      headers: {\n        Authorization: token\n      }\n    }\n\n    return fetch(`${BASE_URL}/v2/store/${channelId}/items/${itemId}`, options).then(() => {})\n  },\n  getUploadedItems: (\n    channelId: string,\n    limit?: number,\n    offset?: number\n  ): Promise<StreamElements.UploadResponse> => {\n    if (!token) {\n      throw new Error('API call only allowed when not a guest')\n    }\n\n    const options: RequestInit = {\n      method: 'GET',\n      headers: {\n        Authorization: token\n      }\n    }\n\n    const query = objectToQueryString({ limit, offset, type: 'audio' })\n\n    return fetchAPI(`${BASE_URL}/v2/uploads/${channelId}${query}`, options)\n  },\n  uploadFile: (\n    channelId: string,\n    file: Blob,\n    fileName?: string\n  ): Promise<StreamElements.UploadedFile> => {\n    if (!token) {\n      throw new Error('API call only allowed when not a guest')\n    }\n\n    const formData = new FormData()\n    formData.append('file', file, fileName)\n\n    const options: RequestInit = {\n      method: 'POST',\n      headers: {\n        Authorization: token\n      },\n      body: formData\n    }\n\n    return fetchAPI(`${BASE_URL}/v2/uploads/${channelId}`, options)\n  }\n})\n\nfunction fetchAPI<T>(url: string, options: RequestInit): Promise<T> {\n  return fetch(url, options).then(response => {\n    if (!response.ok) {\n      throw new Error(response.statusText)\n    }\n\n    return response.json()\n  })\n}\n\nexport default APIService\n","import React from 'react'\nimport APIService, { APIServiceProps } from '../services/APIService'\nimport { useLocalStorage } from './useLocalStorage'\nimport { StreamElements } from '../@types/types'\n\ninterface AuthContextType {\n  user?: StreamElements.Channel\n  setUser: (user: StreamElements.Channel) => void\n  token: string | null\n  setToken: (token: string | null) => void\n  guestUsername: string | null\n  setGuestUsername: (id: string | null) => void\n  APIService: APIServiceProps | null\n}\n\nconst AuthContext = React.createContext<AuthContextType>(null!)\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = React.useState<StreamElements.Channel>()\n  const [guestUsername, setGuestUsername] = useLocalStorage<string | null>(\n    'StreamElementsGuestUsername',\n    null\n  )\n  const [token, setToken] = useLocalStorage<string | null>('StreamElementsJWT', null)\n\n  const tokenizedAPIService = token\n    ? APIService(`Bearer ${token}`)\n    : guestUsername\n    ? APIService(undefined)\n    : null\n\n  const value = {\n    user,\n    setUser,\n    token,\n    setToken,\n    guestUsername,\n    setGuestUsername,\n    APIService: tokenizedAPIService\n  }\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>\n}\n\nexport function useAuth() {\n  return React.useContext(AuthContext)\n}\n","import React, { useCallback, useEffect, useState } from 'react'\nimport { Outlet } from 'react-router-dom'\nimport { AudioContext } from 'standardized-audio-context'\n\nimport Header from '../../components/header/Header'\nimport ItemList from '../../components/itemList/ItemList'\nimport FilterManager from '../../components/filterManager/FilterManager'\n\nimport { EditedChannelItem, StreamElements } from '../../@types/types'\nimport { useAuth } from '../../hooks/useAuth'\nimport { loadFromLocalStorage, saveToLocalStorage } from '../../utils/localStorage'\n\nimport './Home.scss'\n\nconst Home = () => {\n  const { user, setUser, APIService, token, setToken, guestUsername, setGuestUsername } = useAuth()\n  const [items, setItems] = useState<EditedChannelItem[]>([])\n  const [files, setFiles] = useState<StreamElements.UploadedFile[]>([])\n  const [loading, setLoading] = useState<boolean>(false)\n\n  const memoizedFetchUserDetails = useCallback(fetchUserDetails, [\n    APIService,\n    setUser,\n    token,\n    guestUsername\n  ])\n  const memoizedFetchChannelItems = useCallback(fetchUserStoreItems, [APIService, guestUsername])\n  const memoizedFetchAllFileDetails = useCallback(fetchAllFileDetails, [APIService])\n\n  useEffect(() => {\n    memoizedFetchUserDetails()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  useEffect(() => {\n    if (user?._id) {\n      memoizedFetchChannelItems(user._id)\n\n      if (!guestUsername) {\n        memoizedFetchAllFileDetails(user._id)\n      }\n    } else {\n      setItems([])\n    }\n  }, [user?._id, memoizedFetchChannelItems, memoizedFetchAllFileDetails, guestUsername])\n\n  return (\n    <>\n      <div className=\"home\">\n        <Header\n          allItems={items}\n          user={user}\n          loading={loading}\n          guestUsername={guestUsername}\n          logout={() => {\n            setToken(null)\n            setGuestUsername(null)\n          }}\n        />\n        <div className=\"content\">\n          <FilterManager items={items}>\n            {(FiltersComponent, processedItems, sort, setSort, resetFilters) => (\n              <>\n                {FiltersComponent}\n                <ItemList\n                  user={user}\n                  items={processedItems}\n                  allItems={items}\n                  sort={sort}\n                  setSort={setSort}\n                  resetFilters={resetFilters}\n                  guestUsername={guestUsername}\n                />\n              </>\n            )}\n          </FilterManager>\n        </div>\n      </div>\n\n      {/** Used for rendering above page */}\n      <Outlet\n        context={{ items, files, setItem: handleSetItem, setFile: handleSetFile, reloadItems }}\n      />\n    </>\n  )\n\n  function reloadItems() {\n    if (user?._id) {\n      memoizedFetchChannelItems(user._id)\n      memoizedFetchAllFileDetails(user._id)\n    }\n  }\n\n  async function fetchUserDetails() {\n    if (APIService) {\n      try {\n        setLoading(true)\n        const channel = token\n          ? await APIService?.getMeDetails()\n          : await APIService.getUserChannelFromUserName(guestUsername || '')\n\n        setUser(channel)\n      } catch (error) {\n        console.error(error)\n      } finally {\n        setLoading(false)\n      }\n    }\n  }\n\n  async function fetchUserStoreItems(channelId: string) {\n    if (APIService) {\n      try {\n        setLoading(true)\n        const channelItems = await APIService?.getChannelItems(channelId)\n        const filteredItems = channelItems.filter(i =>\n          guestUsername ? i.enabled && i.alert?.audio?.src : i\n        ) as EditedChannelItem[]\n\n        // Fetch previously saved file durations\n        const key = `DURATIONS-${channelId}`\n        const previouslyCachedDurations: Array<{ url: string; duration: number }> =\n          loadFromLocalStorage(key, [])\n\n        const itemsWithDuration = await Promise.all(\n          filteredItems.map(async item => {\n            const cachedDuration = previouslyCachedDurations.find(\n              i => i.url === item.alert?.audio?.src\n            )?.duration\n\n            if (cachedDuration) {\n              return {\n                ...item,\n                duration: cachedDuration\n              }\n            }\n            const duration = await determineSoundDuration(item.alert?.audio?.src || '')\n            return {\n              ...item,\n              duration: duration || undefined\n            }\n          })\n        )\n\n        // Save determined new durations of URL links\n        saveToLocalStorage(\n          key,\n          itemsWithDuration\n            .map(i =>\n              i.alert?.audio?.src ? { url: i.alert?.audio?.src, duration: i.duration } : undefined\n            )\n            .filter(x => x)\n        )\n\n        setItems(itemsWithDuration)\n      } catch (error) {\n        console.error(error)\n      } finally {\n        setLoading(false)\n      }\n    }\n  }\n\n  function handleSetItem(item: StreamElements.ChannelItem) {\n    const index = items.findIndex(x => x._id === item._id)\n\n    if (index) {\n      const newArr = [...items]\n      newArr[index] = item\n      setItems(newArr)\n    } else {\n      setItems([...items, item])\n    }\n  }\n\n  async function fetchAllFileDetails(channelId: string) {\n    if (APIService && channelId) {\n      try {\n        setLoading(true)\n        const allUploadedItems = await APIService?.getUploadedItems(channelId, undefined)\n        setFiles(allUploadedItems.uploads)\n      } catch (error) {\n        console.error(error)\n      } finally {\n        setLoading(false)\n      }\n    }\n  }\n\n  function handleSetFile(file: StreamElements.UploadedFile) {\n    const index = files.findIndex(x => x._id === file._id)\n\n    if (index) {\n      const newArr = [...files]\n      newArr[index] = file\n      setFiles(newArr)\n    } else {\n      setFiles([...files, file])\n    }\n  }\n\n  async function determineSoundDuration(url: string) {\n    if (url) {\n      try {\n        const ctx = new AudioContext()\n\n        const response = await fetch(url, {\n          method: 'GET'\n        }).then(r => r.arrayBuffer())\n\n        const audioBuffer = await ctx.decodeAudioData(response, a => a)\n\n        return audioBuffer.duration\n      } catch (error) {\n        console.error(error)\n        return undefined\n      }\n    }\n\n    return undefined\n  }\n}\n\nexport default Home\n","import { format } from 'date-fns'\nimport React, { useEffect, useState } from 'react'\nimport { useLocation, useNavigate } from 'react-router-dom'\n\nimport pjson from '../../../package.json'\nimport Title from '../../components/title/Title'\nimport { useAuth } from '../../hooks/useAuth'\nimport { queryStringToObject } from '../../utils/general'\n\nimport './LoginPage.scss'\n\nconst LoginPage = () => {\n  const {\n    token,\n    setToken,\n    guestUsername: guestUserId,\n    setGuestUsername: setGuestUserId\n  } = useAuth()\n  const navigate = useNavigate()\n  const query = useLocation()\n  const queryObject = queryStringToObject(query.search)\n\n  const [jwt, setJWT] = useState<string>('')\n  const [username, setUsername] = useState<string>('')\n\n  useEffect(() => {\n    if (queryObject.channel && !token) {\n      // Set guest user id only if no previous token is present\n      // And queryobject contains a channel name\n      setGuestUserId(queryObject.channel)\n    }\n\n    if (token) {\n      // If user has a token (previously logged in)\n      // Navigate and restart session\n      navigate('/')\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  useEffect(() => {\n    if (guestUserId) {\n      // If user sets a new guestUserId from this page\n      // pass login page\n      navigate('/')\n    }\n  }, [guestUserId, navigate])\n\n  return (\n    <div className=\"login-page\">\n      <Title titleItems={['Login']} />\n      <h1 className=\"page-title\">StreamElements Sounds manager</h1>\n      <div className=\"content-split\">\n        <div className=\"block guest-mode\">\n          <h2>Guest mode</h2>\n          <p>View and listen to all your favourite stream sounds without logging in</p>\n          <button className=\"guest-button\" type=\"button\" onClick={() => setGuestUserId('ONSCREEN')}>\n            <div className=\"image-username\">\n              <div\n                className=\"user-image\"\n                style={{\n                  backgroundImage: `url(https://static-cdn.jtvnw.net/jtv_user_pictures/3abf196b-0d2f-44f3-93b2-e5121219899f-profile_image-300x300.png)`\n                }}\n              />\n              <div className=\"username\">ONSCREEN</div>\n            </div>\n            <i className=\"icon fas fa-arrow-right\" />\n          </button>\n          <form className=\"guest-input\" onSubmit={() => setGuestUserId(username)}>\n            <input\n              type=\"text\"\n              value={username}\n              onChange={e => setUsername(e.target.value)}\n              placeholder=\"Twitch username\"\n            />\n            <button type=\"button\" onClick={() => setGuestUserId(username)}>\n              Continue as guest\n            </button>\n          </form>\n        </div>\n        <div className=\"block login-block\">\n          <h2>Manage mode</h2>\n          <div className=\"info-box warning\">\n            <div className=\"header\">\n              <i className=\"fas fa-info-circle\" />\n              <span>Information</span>\n            </div>\n            <div className=\"content\">\n              <p>To edit sounds the tool needs your JWT (JSON web token).</p>\n              <p>\n                You can find this by logging into StreamElements, clicking your image in the top\n                right, then your username and lastly Channel Settings.\n              </p>\n              <p>\n                Then toggle the \"Show secrets\" button, and copy the JWT in full inside the input\n                field.\n              </p>\n            </div>\n            <div className=\"footer\">\n              <span>Do not share this token!</span>\n            </div>\n          </div>\n\n          <form onSubmit={handleSubmit}>\n            <input\n              type=\"password\"\n              value={jwt}\n              onChange={e => setJWT(e.target.value)}\n              placeholder=\"JWT (JSON web token)\"\n            />\n            <div className=\"buttons\">\n              <button type=\"submit\">Login</button>\n              <button\n                className=\"secondary\"\n                type=\"button\"\n                onClick={() =>\n                  window.open('https://streamelements.com/dashboard/account/channels', '_blank')\n                }\n              >\n                <i className=\"icon fas fa-external-link-square-alt\" />\n                StreamElements Channel Settings\n              </button>\n            </div>\n          </form>\n        </div>\n        <div\n          className=\"copy\"\n          onClick={() =>\n            window.open('https://github.com/damon02/streamelements-store-manager', '_system')\n          }\n          onKeyDown={() =>\n            window.open('https://github.com/damon02/streamelements-store-manager', '_system')\n          }\n          role=\"button\"\n          tabIndex={0}\n        >\n          <div className=\"who\">&copy; damon02 - {format(new Date(), 'yyyy')}</div>\n          <div className=\"version\">v{pjson.version}</div>\n        </div>\n      </div>\n    </div>\n  )\n\n  function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\n    e.preventDefault()\n\n    setToken(jwt)\n    setJWT('')\n\n    navigate('/')\n  }\n}\n\nexport default LoginPage\n","import React from 'react'\n\ninterface IProps {\n  id?: string\n  label?: React.ReactNode\n  additionalLabel?: React.ReactNode\n  type: 'input' | 'input large' | 'input number' | 'textarea'\n  subtitle?: React.ReactNode\n  value: string | number | readonly string[] | undefined\n  onChange: (value: string | number | undefined) => void\n  placeholder?: string\n  allowsMin?: number\n}\n\nconst ItemWrapper = ({\n  id,\n  label,\n  additionalLabel,\n  type,\n  subtitle,\n  value,\n  onChange,\n  placeholder,\n  allowsMin\n}: IProps) => (\n  <div className=\"item-wrapper\" id={id}>\n    {(label || additionalLabel) && (\n      <label>\n        {label}\n        {additionalLabel}\n      </label>\n    )}\n    {type === 'input large' ? (\n      <input\n        className=\"input large\"\n        value={value}\n        onChange={e => onChange(e.target.value)}\n        placeholder={placeholder}\n      />\n    ) : type === 'textarea' ? (\n      <textarea value={value} onChange={e => onChange(e.target.value)} placeholder={placeholder} />\n    ) : type === 'input number' ? (\n      <input\n        value={value}\n        type=\"number\"\n        onChange={e => {\n          const parsedValue = e.target.value ? parseInt(e.target.value, 10) : 0\n          onChange(\n            parsedValue > 999999999 ? 999999999 : !allowsMin && parsedValue < 0 ? 0 : parsedValue\n          )\n        }}\n        placeholder={placeholder}\n        min={allowsMin || 0}\n        max={999999999}\n      />\n    ) : (\n      <input value={value} onChange={e => onChange(e.target.value)} placeholder={placeholder} />\n    )}\n    {subtitle && <label className=\"subtitle\">{subtitle}</label>}\n  </div>\n)\n\nexport default ItemWrapper\n","import * as React from 'react'\nimport { format } from 'date-fns'\n\nimport { StreamElements } from '../../@types/types'\n\ninterface IProps {\n  item: StreamElements.UploadedFile\n  selectedFile: StreamElements.UploadedFile | undefined\n  handleOnClick: (item: StreamElements.UploadedFile) => void\n}\n\nconst FilePickerRow = ({ item, selectedFile, handleOnClick }: IProps) => {\n  const [playing, setPlaying] = React.useState(false)\n\n  return (\n    <tr\n      className={`file-row${selectedFile?._id === item._id ? ' active' : ''}`}\n      key={item._id}\n      onClick={() => handleOnClick(item)}\n    >\n      <td className=\"play\">\n        <div\n          className=\"play-button\"\n          role=\"button\"\n          tabIndex={0}\n          onKeyPress={e => {\n            e.preventDefault()\n            e.stopPropagation()\n            if (e.key === 'ENTER') {\n              if (item.url) {\n                playSound(item.url)\n              }\n            }\n          }}\n          onClick={e => {\n            e.preventDefault()\n            e.stopPropagation()\n            if (item.url) {\n              playSound(item.url)\n            }\n          }}\n        >\n          <i className={playing ? 'fas fa-pause' : 'fas fa-play'} />\n        </div>\n      </td>\n      <td className=\"sound-name\">{item.name}</td>\n      <td className=\"dateCreated center\">\n        <div>{item.createdAt && format(new Date(item.createdAt), 'dd-MM-yyyy')}</div>\n        <div>{item.createdAt && format(new Date(item.createdAt), 'HH:mm:ss')}</div>\n      </td>\n    </tr>\n  )\n\n  async function playSound(soundFile: string, volume: number = 1.0) {\n    const sound = new Audio(soundFile)\n    sound.volume = volume\n    setPlaying(true)\n    try {\n      await sound.play()\n      const length = sound.duration\n      setTimeout(() => setPlaying(false), length * 1000)\n    } catch (error) {\n      console.error(error)\n    }\n  }\n}\n\nexport default React.memo(FilePickerRow)\n","import React, { useEffect, useState } from 'react'\nimport { WaveSurfer, WaveForm } from 'wavesurfer-react'\n\nimport { EditedChannelItem, StreamElements } from '../../@types/types'\nimport { useOnClickOutside } from '../../hooks/useOnClickOutside'\nimport { sortByKey } from '../../utils/general'\nimport FilePickerRow from './FilePickerRow'\n\ninterface IProps {\n  files: StreamElements.UploadedFile[]\n  selectedFile: StreamElements.UploadedFile | 'new' | undefined\n  setSelectedFile: (file: StreamElements.UploadedFile | 'new' | undefined) => void\n  fileInputRef: React.LegacyRef<HTMLInputElement>\n  item: EditedChannelItem | undefined\n  volume: number\n}\n\nconst FilePicker = ({\n  files,\n  selectedFile,\n  setSelectedFile,\n  fileInputRef,\n  item,\n  volume\n}: IProps) => {\n  const [playing, setPlaying] = useState(false)\n  const [playPosition, setPlayPosition] = useState(0)\n  const [showFileList, setShowFileList] = useState(false)\n\n  const [query, setQuery] = useState<string>('')\n  const [filteredResults, setFilteredResults] = useState<StreamElements.UploadedFile[] | null>(null)\n\n  const wavesurferRef = React.useRef<any>(null)\n  const handleWSMount = React.useCallback(\n    waveSurfer => {\n      wavesurferRef.current = waveSurfer\n\n      if (wavesurferRef.current && selectedFile !== 'new' && selectedFile?.url) {\n        wavesurferRef.current.load(selectedFile?.url)\n\n        wavesurferRef.current.on('play', () => {\n          setPlaying(true)\n        })\n\n        wavesurferRef.current.on('pause', () => {\n          setPlaying(false)\n        })\n\n        wavesurferRef.current.on('finish', () => {\n          setPlaying(false)\n        })\n\n        wavesurferRef.current.on('seek', () => {\n          setPlayPosition(wavesurferRef.current.getCurrentTime())\n        })\n\n        wavesurferRef.current.on('audioprocess', () => {\n          setPlayPosition(wavesurferRef.current.getCurrentTime())\n        })\n      }\n    },\n    [selectedFile]\n  )\n\n  const fileListRef = React.useRef<HTMLDivElement>(null)\n  useOnClickOutside(fileListRef, () => setShowFileList(false))\n\n  const playSound = React.useCallback(() => {\n    wavesurferRef.current.playPause()\n  }, [])\n\n  useEffect(() => {\n    if (wavesurferRef.current) {\n      wavesurferRef.current.setVolume(volume)\n    }\n  }, [volume])\n\n  useEffect(() => {\n    if (wavesurferRef.current && selectedFile !== 'new' && selectedFile?.url) {\n      wavesurferRef.current.load(selectedFile?.url)\n    }\n  }, [selectedFile])\n\n  useEffect(() => {\n    if (!query || query.length === 0) {\n      setFilteredResults(null)\n    }\n\n    const newResults = files.filter(f => f.name.toUpperCase().includes(query.toUpperCase()))\n    setFilteredResults(sortByKey(newResults, 'dateCreated'))\n  }, [query, files])\n\n  return (\n    <div className=\"item-wrapper file\" ref={fileListRef}>\n      <div className=\"inner-wrapper\">\n        {!selectedFile || selectedFile === 'new' ? (\n          <div className=\"file-tag drop\">\n            <input\n              type=\"file\"\n              id=\"sound\"\n              name=\"sound\"\n              accept=\"audio/mp3,audio/aac,audio/wav,audio/ogg\"\n              ref={fileInputRef}\n              onChange={() => setSelectedFile('new')}\n            />\n          </div>\n        ) : (\n          <>\n            <button\n              className=\"button small secondary\"\n              type=\"button\"\n              onClick={() => setSelectedFile(undefined)}\n            >\n              <i className=\"icon fas fa-times\" />\n            </button>\n            <div className=\"file-tag\">\n              <button\n                className=\"play-button\"\n                type=\"button\"\n                onClick={e => {\n                  e.preventDefault()\n                  e.stopPropagation()\n                  if (item?.alert?.audio?.src) {\n                    playSound()\n                  }\n                }}\n              >\n                {playing ? <i className=\"fas fa-pause\" /> : <i className=\"fas fa-play\" />}\n              </button>\n              <div className=\"detail-rows\">\n                <div className=\"name\">\n                  <i className=\"icon fas fa-file-audio\" />\n                  <span className=\"subtitle\">{selectedFile?.name}</span>\n                </div>\n                <div className=\"duration\">\n                  <i className=\"icon fas fa-music\" />\n                  {item?.duration ? (\n                    `${\n                      playPosition !== 0 &&\n                      Math.round(playPosition * 10) / 10 !== Math.round(item?.duration * 10) / 10\n                        ? `${Math.round(playPosition * 10) / 10}s / `\n                        : ''\n                    }${Math.round(item.duration * 10) / 10}s`\n                  ) : (\n                    <i className=\"fas fa-spin fa-spinner\" />\n                  )}\n                </div>\n              </div>\n\n              {selectedFile && (\n                <div className=\"waveform\">\n                  <WaveSurfer onMount={handleWSMount} ref={wavesurferRef}>\n                    <WaveForm\n                      id={`waveform-${selectedFile?._id}`}\n                      container={`waveform-${selectedFile?._id}`}\n                      p\n                      cursorColor=\"#ff000000\"\n                      waveColor=\"#BDBABD\"\n                      progressColor=\"#FFFFFF\"\n                      height={35}\n                      barWidth={1}\n                      barHeight={3}\n                      cursorWidth={1}\n                      hideScrollbar={true}\n                    />\n                  </WaveSurfer>\n                </div>\n              )}\n            </div>\n          </>\n        )}\n        <button\n          className=\"button secondary showAll\"\n          type=\"button\"\n          onClick={() => setShowFileList(!showFileList)}\n        >\n          <i className={`icon fas fa-${showFileList ? 'angle-up' : 'angle-down'}`} />\n          <span>All files</span>\n        </button>\n      </div>\n      {showFileList && (\n        <div className=\"file-list\">\n          <div className=\"search-header\">\n            <input\n              placeholder=\"Search by sound name\"\n              value={query}\n              onChange={e => setQuery(e.target.value)}\n            />\n            <span>\n              {filteredResults?.length\n                ? `${filteredResults.length} results`\n                : `Showing all ${files.length} files`}\n            </span>\n          </div>\n          <div className=\"list\">\n            {(filteredResults || files).map(f => (\n              <FilePickerRow\n                key={f._id}\n                item={f}\n                selectedFile={selectedFile === 'new' ? undefined : selectedFile}\n                handleOnClick={file => setSelectedFile(file)}\n              />\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default FilePicker\n","import React, { useState } from 'react'\nimport { easeQuadInOut } from 'd3-ease'\nimport { animated, useSpring } from 'react-spring'\n\nimport { APIServiceProps } from '../../services/APIService'\nimport { useOnClickOutside } from '../../hooks/useOnClickOutside'\n\nimport './DeletePrompt.scss'\n\ninterface IProps {\n  api: APIServiceProps | null\n  channelId?: string\n  itemId?: string\n  showPrompt: boolean\n  setShowPrompt: (val: boolean) => void\n  onDelete: () => void\n}\n\nconst DeletePrompt = ({ api, channelId, itemId, showPrompt, setShowPrompt, onDelete }: IProps) => {\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | undefined>()\n\n  const menuAnimationProps = useSpring({\n    opacity: showPrompt ? 1 : 0,\n    transform: showPrompt ? 'scale(1)' : 'scale(0)',\n    config: { duration: 250, easing: easeQuadInOut }\n  })\n\n  const ref = React.useRef<HTMLDivElement>(null)\n  useOnClickOutside(ref, () => setShowPrompt(false))\n\n  return (\n    <animated.div className=\"delete-background\" style={{ ...menuAnimationProps }}>\n      <animated.div className=\"delete-inner\" style={{ ...menuAnimationProps }} ref={ref}>\n        {error && <div className=\"error\">{error}</div>}\n        <div className=\"are-you-sure\">Are you sure you want to delete this sound?</div>\n        <div className=\"buttons\">\n          <button\n            className=\"button-menu danger\"\n            type=\"button\"\n            disabled={loading}\n            onClick={() => handleDeleteSound()}\n          >\n            {loading ? <i className=\"fas fa-spin fa-circle-notch\" /> : 'Delete sound'}\n          </button>\n          <button\n            className=\"button-menu secondary\"\n            type=\"button\"\n            onClick={() => setShowPrompt(false)}\n          >\n            No\n          </button>\n        </div>\n      </animated.div>\n    </animated.div>\n  )\n\n  async function handleDeleteSound() {\n    if (!channelId || !itemId) {\n      setError('Channel ID or Item ID is missing')\n      return\n    }\n\n    try {\n      setLoading(true)\n      setError(undefined)\n\n      await api?.deleteChannelItem(channelId, itemId)\n      onDelete()\n    } catch (err) {\n      console.error(err)\n      setError('An unknown error occurred while trying to communicate to StreamElements :(')\n    } finally {\n      setLoading(false)\n    }\n  }\n}\n\nexport default DeletePrompt\n","import { formatDuration, intervalToDuration } from 'date-fns'\nimport Slider from 'rc-slider'\nimport React, { useEffect, useRef, useState } from 'react'\nimport { useNavigate, useParams } from 'react-router-dom'\n\nimport ItemWrapper from './ItemWrapper'\nimport FilePicker from './FilePicker'\nimport DeletePrompt from './DeletePrompt'\nimport Title from '../title/Title'\n\nimport { useItems } from '../../hooks/useOutletContexts'\nimport { EditedChannelItem, StreamElements } from '../../@types/types'\nimport { useAuth } from '../../hooks/useAuth'\nimport { useOnClickOutside } from '../../hooks/useOnClickOutside'\nimport { useSessionStorage } from '../../hooks/useSessionStorage'\n\nimport './ItemDetails.scss'\n\nconst ItemDetails = () => {\n  const navigate = useNavigate()\n  const { APIService, user, guestUsername } = useAuth()\n  const { itemId } = useParams()\n  const { items, files, setItem, reloadItems } = useItems()\n  const [saving, setSaving] = useState(false)\n  const [showDeletePrompt, setShowDeletePrompt] = useState(false)\n\n  const item = items.find(i => i._id === itemId)\n\n  const id = item?._id || 'new'\n  const [enabled, setEnabled] = useSessionStorage<boolean | undefined>(\n    `enabled-${id}`,\n    item?.enabled === undefined ? true : item.enabled\n  )\n  const [name, setName] = useSessionStorage<string>(`name-${id}`, item?.name || '')\n  const [description, setDescription] = useSessionStorage<string>(\n    `description-${id}`,\n    item?.description || ''\n  )\n  const [cost, setCost] = useSessionStorage<number>(`cost-${id}`, item?.cost || 10)\n  const [quantity, setQuantity] = useSessionStorage<number>(\n    `quantity-${id}`,\n    item?.quantity.total || -1\n  )\n  const [globalCooldown, setGlobalCooldown] = useSessionStorage<number>(\n    `globalCooldown-${id}`,\n    item?.cooldown?.global || 0\n  )\n  const [userCooldown, setUserCooldown] = useSessionStorage<number>(\n    `userCooldown-${id}`,\n    item?.cooldown?.user || 10\n  )\n  const [categoryCooldownName, setCategoryCooldownName] = useSessionStorage<string>(\n    `categoryCooldownName-${id}`,\n    item?.categoryName || ''\n  )\n  const [categoryCooldownTime, setCategoryCooldownTime] = useSessionStorage<number>(\n    `categoryCooldownTime-${id}`,\n    item?.cooldown?.category || 0\n  )\n  const [volume, setVolume] = useSessionStorage<number>(\n    `volume-${id}`,\n    item?.alert?.audio?.volume || 1\n  )\n  const [command, setCommand] = useSessionStorage<string>(\n    `command-${id}`,\n    item?.bot?.identifier || ''\n  )\n\n  // File specific values\n  const [selectedFile, setSelectedFile] = useState<\n    StreamElements.UploadedFile | 'new' | undefined\n  >()\n  const fileInputRef = useRef<HTMLInputElement>(null)\n  const [redeemables, setRedeemables] = useSessionStorage<{\n    website: boolean\n    extension: boolean\n    bot: boolean\n    confirmation: boolean\n  }>(`redeemables-${id}`, {\n    website: false,\n    extension: false,\n    bot: true,\n    confirmation: true\n  })\n\n  const ref = React.useRef<HTMLDivElement>(null)\n  useOnClickOutside(ref, showDeletePrompt ? () => ({}) : handleCloseDetails)\n\n  useEffect(() => {\n    if (guestUsername) {\n      handleCloseDetails()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  useEffect(() => {\n    if (item) {\n      setEnabled(item.enabled)\n      setName(item.name)\n      setDescription(item.description)\n      setCost(item.cost)\n      setQuantity(item.quantity.total)\n      setGlobalCooldown(item.cooldown?.global || 0)\n      setUserCooldown(item.cooldown?.user || 0)\n      setCategoryCooldownName(item?.categoryName || '')\n      setCategoryCooldownTime(item?.cooldown?.category || 0)\n      setVolume(item?.alert?.audio?.volume || 1)\n      setRedeemables({\n        website: item?.sources.includes('website') || false,\n        extension: item?.sources.includes('extension') || false,\n        bot: item?.sources.includes('bot') || true,\n        confirmation: item?.bot?.sendResponse || true\n      })\n      setCommand(item.bot?.identifier || '')\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [item])\n\n  useEffect(() => {\n    const match = files.find(u => u.url === item?.alert?.audio?.src)\n    setSelectedFile(match)\n  }, [files, item])\n\n  const unsavedChanges = hasUnsavedChanges()\n\n  return (\n    <>\n      <Title\n        titleItems={[\n          name || (id === 'new' ? 'New sound' : command || 'Sound'),\n          'Sounds',\n          user?.displayName\n        ]}\n      />\n      <DeletePrompt\n        api={APIService}\n        channelId={user?._id}\n        itemId={id}\n        showPrompt={showDeletePrompt}\n        setShowPrompt={setShowDeletePrompt}\n        onDelete={() => handleCloseDetails()}\n      />\n      <div className=\"item-details-wrapper\">\n        <div className=\"floating-block\" ref={ref}>\n          <div className=\"content left\">\n            <ItemWrapper\n              label=\"Item name\"\n              type=\"input large\"\n              subtitle=\"This will be presented to the chat\"\n              value={name}\n              onChange={value => setName(value as string)}\n            />\n            <div\n              className=\"item-wrapper checkbox\"\n              onClick={() => setEnabled(!enabled)}\n              onKeyPress={() => setEnabled(!enabled)}\n              tabIndex={0}\n              role=\"button\"\n            >\n              <input type=\"checkbox\" checked={enabled} onClick={() => setEnabled(!enabled)} />\n              <label>Enabled</label>\n            </div>\n            <ItemWrapper\n              label=\"Description\"\n              type=\"textarea\"\n              subtitle=\"Only visible in StreamElements.\"\n              value={description}\n              onChange={value => setDescription(value as string)}\n            />\n\n            <div className=\"flex\">\n              <ItemWrapper\n                label=\"Item cost\"\n                type=\"input number\"\n                subtitle=\"Cost of this item in points\"\n                value={cost}\n                onChange={value => setCost(value as number)}\n              />\n\n              <ItemWrapper\n                label=\"Quantity\"\n                type=\"input number\"\n                subtitle=\"-1 for unlimited amount\"\n                value={quantity}\n                allowsMin={-1}\n                onChange={value => setQuantity(value as number)}\n              />\n            </div>\n            <div className=\"flex\">\n              <ItemWrapper\n                label=\"Global cooldown\"\n                type=\"input number\"\n                subtitle={`In seconds, (${\n                  globalCooldown\n                    ? formatDuration(\n                        intervalToDuration({\n                          start: 0,\n                          end: (globalCooldown || 0.01) * 1000\n                        }),\n                        { format: ['years', 'days', 'hours', 'minutes', 'seconds'] }\n                      )\n                    : '?'\n                })`}\n                value={globalCooldown}\n                onChange={value => setGlobalCooldown(value as number)}\n              />\n              <ItemWrapper\n                label=\"User cooldown\"\n                type=\"input number\"\n                subtitle={`In seconds, (${\n                  userCooldown\n                    ? formatDuration(\n                        intervalToDuration({\n                          start: 0,\n                          end: (userCooldown || 0) * 1000\n                        }),\n                        { format: ['years', 'days', 'hours', 'minutes', 'seconds'] }\n                      )\n                    : '?'\n                })`}\n                value={userCooldown}\n                onChange={value => setUserCooldown(value as number)}\n              />\n            </div>\n\n            <div className=\"flex item-wrapper\">\n              <label>Category cooldown</label>\n              <label className=\"toptitle\">\n                A user is blocked from purchasing items from the same category during the cool down\n                period.\n              </label>\n              <div className=\"flex\">\n                <ItemWrapper\n                  type=\"input\"\n                  placeholder=\"Name\"\n                  value={categoryCooldownName}\n                  onChange={value => setCategoryCooldownName(value as string)}\n                />\n                <ItemWrapper\n                  type=\"input number\"\n                  placeholder=\"Time in seconds\"\n                  value={categoryCooldownTime}\n                  onChange={value => setCategoryCooldownTime(value as number)}\n                  subtitle={`In seconds, (${\n                    categoryCooldownTime\n                      ? formatDuration(\n                          intervalToDuration({\n                            start: 0,\n                            end: (categoryCooldownTime || 0) * 1000\n                          }),\n                          { format: ['years', 'days', 'hours', 'minutes', 'seconds'] }\n                        )\n                      : '?'\n                  })`}\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"content right\">\n            <FilePicker\n              files={files}\n              item={item}\n              selectedFile={selectedFile}\n              setSelectedFile={setSelectedFile}\n              volume={volume}\n              fileInputRef={fileInputRef}\n            />\n\n            <div className=\"item-wrapper volume\">\n              <label>Volume ({Math.round((volume || 0) * 100)}%)</label>\n              <Slider\n                value={volume}\n                onChange={v => setVolume(v)}\n                min={0}\n                max={1}\n                step={0.01}\n                handleStyle={{\n                  height: 24,\n                  width: 24,\n                  marginTop: -7,\n                  backgroundColor: '#6441a5',\n                  borderColor: '#9a64ff'\n                }}\n                railStyle={{ backgroundColor: '#282a36', height: 10 }}\n                trackStyle={{ backgroundColor: '#9a64ff', height: 10 }}\n              />\n            </div>\n\n            <div\n              className=\"item-wrapper checkbox\"\n              onClick={() => setRedeemables({ ...redeemables, website: !redeemables.website })}\n              onKeyPress={() => setRedeemables({ ...redeemables, website: !redeemables.website })}\n              tabIndex={0}\n              role=\"button\"\n            >\n              <input\n                type=\"checkbox\"\n                checked={redeemables.website}\n                onClick={() => setRedeemables({ ...redeemables, website: !redeemables.website })}\n              />\n              <label>Redeemable via website</label>\n            </div>\n            <div\n              className=\"item-wrapper checkbox\"\n              onClick={() => setRedeemables({ ...redeemables, extension: !redeemables.extension })}\n              onKeyPress={() =>\n                setRedeemables({ ...redeemables, extension: !redeemables.extension })\n              }\n              tabIndex={0}\n              role=\"button\"\n            >\n              <input\n                type=\"checkbox\"\n                checked={redeemables.extension}\n                onClick={() =>\n                  setRedeemables({ ...redeemables, extension: !redeemables.extension })\n                }\n              />\n              <label>Redeemable via extension</label>\n            </div>\n            <div\n              className=\"item-wrapper checkbox\"\n              onClick={() => setRedeemables({ ...redeemables, bot: !redeemables.bot })}\n              onKeyPress={() => setRedeemables({ ...redeemables, bot: !redeemables.bot })}\n              tabIndex={0}\n              role=\"button\"\n            >\n              <input\n                type=\"checkbox\"\n                checked={redeemables.bot}\n                onClick={() => setRedeemables({ ...redeemables, bot: !redeemables.bot })}\n              />\n              <label>Redeemable via chat</label>\n            </div>\n            <div\n              className=\"item-wrapper checkbox\"\n              onClick={() =>\n                setRedeemables({ ...redeemables, confirmation: !redeemables.confirmation })\n              }\n              onKeyPress={() =>\n                setRedeemables({ ...redeemables, confirmation: !redeemables.confirmation })\n              }\n              tabIndex={0}\n              role=\"button\"\n            >\n              <input\n                type=\"checkbox\"\n                checked={redeemables.confirmation}\n                onClick={() =>\n                  setRedeemables({ ...redeemables, confirmation: !redeemables.confirmation })\n                }\n              />\n              <label>Send confirmation when redeeming via chat</label>\n            </div>\n\n            <ItemWrapper\n              type=\"input\"\n              value={command}\n              onChange={v => setCommand(v as string)}\n              label=\"Item chat command\"\n              subtitle={`To play, type \"!sound ${command}\" in the chat`}\n            />\n            <div className=\"buttons\">\n              {item?.alert?.audio?.src && (\n                <button\n                  className=\"button secondary\"\n                  type=\"button\"\n                  disabled={saving}\n                  onClick={() => handleCloseDetails()}\n                >\n                  Cancel changes\n                </button>\n              )}\n              {id === 'new' ? (\n                <button\n                  className=\"button primary\"\n                  type=\"button\"\n                  disabled={selectedFile === undefined}\n                  onClick={() => handleOnSave()}\n                >\n                  {saving ? <i className=\"fas fa-spin fa-spinner\" /> : 'Upload new sound'}\n                </button>\n              ) : (\n                <button\n                  className=\"button primary\"\n                  type=\"button\"\n                  disabled={!unsavedChanges}\n                  onClick={() => handleOnSave()}\n                >\n                  {saving ? <i className=\"fas fa-spin fa-spinner\" /> : 'Change sound'}\n                </button>\n              )}\n            </div>\n            {id !== 'new' && (\n              <div className=\"buttons\">\n                <button\n                  className=\"button danger\"\n                  type=\"button\"\n                  onClick={() => setShowDeletePrompt(true)}\n                >\n                  Delete sound\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </>\n  )\n\n  function handleCloseDetails() {\n    navigate('/')\n  }\n\n  function hasUnsavedChanges() {\n    return (\n      (selectedFile !== 'new' && selectedFile?.url !== item?.alert?.audio?.src) ||\n      (enabled !== item?.enabled && item?.enabled !== undefined) ||\n      name !== item?.name ||\n      description !== item?.description ||\n      cost !== item?.cost ||\n      quantity !== item?.quantity.total ||\n      globalCooldown !== item.cooldown?.global ||\n      userCooldown !== item.cooldown.user ||\n      categoryCooldownName !== item.categoryName ||\n      categoryCooldownTime !== item.cooldown.category ||\n      volume !== item.alert?.audio?.volume ||\n      command !== item.bot?.identifier\n    )\n  }\n\n  async function handleOnSave() {\n    const file = fileInputRef?.current?.files?.[0]\n\n    // If a file is selected, upload it to StreamElements\n    if (user && APIService && file) {\n      try {\n        const uploadedFile = await APIService.uploadFile(user._id, file)\n        addNewSound(uploadedFile)\n      } catch (error) {\n        console.error(error)\n      }\n    }\n\n    // Then check if it is a new sound\n    if (!item?.alert?.audio?.src && selectedFile && selectedFile !== 'new') {\n      await addNewSound(selectedFile)\n    } else {\n      // Or changes have been made to an existing sound\n      await applyChanges()\n    }\n\n    // Reload/refresh sounds\n    if (id === 'new') {\n      resetAllToDefaults()\n    }\n\n    reloadItems()\n  }\n\n  async function addNewSound(file: StreamElements.UploadedFile) {\n    if (user && APIService && file) {\n      try {\n        setSaving(true)\n        const newItem = convertInputsToEditedChannelItem(undefined, file)\n        const uploadedItem = await APIService.createChannelItem(user._id, {\n          ...newItem,\n          accessCodes: {\n            keys: [],\n            mode: 'multi'\n          },\n          accessLevel: 100,\n          allowMessages: false\n        })\n        setItem(uploadedItem)\n\n        handleCloseDetails()\n      } catch (error) {\n        console.error(error)\n      } finally {\n        setSaving(false)\n      }\n    }\n  }\n\n  async function applyChanges() {\n    if (user && APIService && item) {\n      try {\n        setSaving(true)\n        const newItem: EditedChannelItem = convertInputsToEditedChannelItem(item)\n\n        const processedItem = await APIService?.saveChannelItem(user._id, newItem)\n        setItem(processedItem)\n\n        handleCloseDetails()\n      } catch (error) {\n        console.error(error)\n      } finally {\n        setSaving(false)\n      }\n    }\n  }\n\n  function convertInputsToEditedChannelItem(\n    existingChannelItem?: EditedChannelItem,\n    newFile?: StreamElements.UploadedFile\n  ): EditedChannelItem {\n    const newItem: EditedChannelItem = {\n      ...existingChannelItem,\n      name,\n      description,\n      cost,\n      quantity: { total: quantity },\n      cooldown: {\n        ...existingChannelItem?.cooldown,\n        category: categoryCooldownTime,\n        global: globalCooldown,\n        user: userCooldown\n      },\n      categoryName: categoryCooldownName,\n      sources: [\n        redeemables.bot ? 'bot' : undefined,\n        redeemables.extension ? 'extension' : undefined,\n        redeemables.website ? 'website' : undefined\n      ].filter(v => v) as string[],\n      alert: {\n        ...existingChannelItem?.alert,\n        enabled: true,\n        graphics: { duration: 8, type: 'image' },\n        audio: {\n          id: newFile?._id,\n          name: newFile?.name,\n          src: newFile?.url ? newFile.url : selectedFile !== 'new' ? selectedFile?.url : undefined,\n          type: 'sound',\n          volume\n        }\n      },\n      bot: {\n        sendResponse: redeemables.confirmation || false,\n        identifier: command\n      },\n      enabled,\n\n      // New item only\n      channel: user?._id,\n      subscriberOnly: true,\n      featured: existingChannelItem?.enabled || false,\n      type: 'effect',\n      userInput: [],\n      accessLevel: 100\n    }\n\n    delete newItem.duration\n\n    return newItem\n  }\n\n  function resetAllToDefaults() {\n    setName('')\n    setDescription('')\n    setCost(10)\n    setQuantity(-1)\n    setGlobalCooldown(0)\n    setUserCooldown(0)\n    setCategoryCooldownName('')\n    setCategoryCooldownTime(0)\n    setVolume(1)\n    setRedeemables({\n      website: false,\n      extension: false,\n      bot: true,\n      confirmation: true\n    })\n    setCommand('')\n  }\n}\n\nexport default ItemDetails\n","import { useOutletContext } from 'react-router'\nimport { EditedChannelItem, StreamElements } from '../@types/types'\n\nexport function useItems() {\n  return useOutletContext<{\n    items: EditedChannelItem[]\n    setItem: (item: StreamElements.ChannelItem) => void\n    files: StreamElements.UploadedFile[]\n    setFile: (file: StreamElements.UploadedFile) => void\n    reloadItems: () => void\n  }>()\n}\n","import * as React from 'react'\nimport { useLocation, Navigate } from 'react-router-dom'\nimport { useAuth } from '../../../hooks/useAuth'\n\nconst ProtectedRoute = ({ children }: { children: JSX.Element }) => {\n  const auth = useAuth()\n  const location = useLocation()\n\n  if (!auth?.token && !auth.guestUsername) {\n    return <Navigate to=\"/login\" state={{ from: location }} />\n  }\n\n  return children\n}\n\nexport default ProtectedRoute\n","import * as React from 'react'\nimport { Routes, Route } from 'react-router-dom'\n\nimport Home from '../../pages/home/Home'\nimport LoginPage from '../../pages/login/LoginPage'\nimport ItemDetails from '../itemDetails/ItemDetails'\nimport ProtectedRoute from '../router/protectedRoute/ProtectedRoute'\n\nimport './App.scss'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Routes>\n        <Route\n          path=\"/\"\n          element={\n            <ProtectedRoute>\n              <Home />\n            </ProtectedRoute>\n          }\n        >\n          <Route path=\"item/\" element={<ItemDetails />}>\n            <Route path=\":itemId\" element={<ItemDetails />} />\n          </Route>\n        </Route>\n        <Route index={false} path=\"login\" element={<LoginPage />} />\n      </Routes>\n    </div>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { HashRouter } from 'react-router-dom'\nimport { HelmetProvider } from 'react-helmet-async'\n\nimport App from './components/app/App'\nimport { AuthProvider } from './hooks/useAuth'\nimport reportWebVitals from './reportWebVitals'\n\nimport 'rc-slider/assets/index.css'\nimport './style/index.scss'\n\nReactDOM.render(\n  <React.StrictMode>\n    <HelmetProvider>\n      <HashRouter>\n        <AuthProvider>\n          <App />\n        </AuthProvider>\n      </HashRouter>\n    </HelmetProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}