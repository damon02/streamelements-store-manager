(this["webpackJsonpstreamelements-store-manager"]=this["webpackJsonpstreamelements-store-manager"]||[]).push([[0],{102:function(e){e.exports=JSON.parse('{"name":"streamelements-store-manager","version":"1.1.0","homepage":"https://damon02.github.io/streamelements-store-manager","private":true,"dependencies":{"@types/d3-ease":"3.0.0","d3-ease":"3.0.1","date-fns":"2.27.0","immer":"9.0.6","lodash":"4.17.21","node-sass":"6.0.1","rc-slider":"9.7.5","react":"17.0.2","react-dom":"17.0.2","react-helmet-async":"1.2.3","react-router":"6.2.1","react-router-dom":"6.2.1","react-scripts":"4.0.3","react-spring":"9.3.0","standardized-audio-context":"25.3.21","typescript":"4.4.4","wavesurfer-react":"2.0.11","wavesurfer.js":"4.6.0","web-vitals":"1.1.2"},"devDependencies":{"@testing-library/jest-dom":"5.15.0","@testing-library/react":"11.2.7","@testing-library/user-event":"12.8.3","@types/date-fns":"2.6.0","@types/jest":"26.0.24","@types/lodash":"4.14.176","@types/node":"12.20.37","@types/react":"17.0.34","@types/react-dom":"17.0.11","eslint":"7.31.0","eslint-config-airbnb":"18.2.1","eslint-config-airbnb-typescript":"12.3.1","eslint-config-prettier":"8.3.0","eslint-config-react-app":"6.0.0","eslint-import-resolver-typescript":"2.4.0","eslint-loader":"4.0.2","eslint-plugin-deprecation":"1.2.1","eslint-plugin-import":"2.23.4","eslint-plugin-jest":"24.3.6","eslint-plugin-jsx-a11y":"6.4.1","eslint-plugin-prettier":"3.4.0","eslint-plugin-react":"7.24.0","eslint-plugin-react-hooks":"4.2.0","prettier":"2.3.1","prettier-eslint":"12.0.0","prettier-eslint-cli":"5.0.1"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","lint":"eslint --ext .js,.jsx,.ts,.tsx src --color && npm run prettier-check","prettier-check":"prettier --check --config ./.prettierrc \\"./src/**/*.ts\\" \\"./src/**/*.tsx\\"","prettier-format-all":"prettier --write --config ./.prettierrc \\"./src/**/*.ts\\" \\"./src/**/*.tsx\\""},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"pre-commit":["prettier-check"]}')},124:function(e,t,n){},134:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(25),s=n.n(r),o=n(31),i=n(53),l=n(16),u=n(2),d=n(5),b=n.n(d),j=n(15),v=n(10),m=n(4),f=n(106),h=n(35),p=n(231),O=n(234);n(124);function x(e,t){Object(a.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}var g=n(1),y=function(e){var t=e.user,n=(e.loading,e.guestUsername),c=e.logout,r=e.allItems,s=a.useState(!1),o=Object(m.a)(s,2),i=o[0],l=o[1],d=null===t||void 0===t?void 0:t.displayName,b=Object(h.useSpring)({opacity:i?1:0,transform:i?"translateY(0%) translateX(0%) scale(1)":"translateY(-100%) translateX(50%) scale(0)",config:{duration:250,easing:p.a}}),j=a.useRef(null);return x(j,(function(){return l(!1)})),Object(g.jsxs)("div",{className:"header-app".concat(n?" guest-mode":""),children:[Object(g.jsxs)("div",{className:"title",children:[Object(g.jsx)("h1",{children:"StreamElements Sounds editor"}),n?Object(g.jsx)("div",{className:"guest",children:"Guest mode"}):Object(g.jsx)("div",{className:"account",children:"Editor mode"})]}),Object(g.jsx)("div",{className:"buttons",children:Object(g.jsxs)("div",{className:"button-user".concat(i?" active":""),role:"button",onKeyPress:function(e){return"enter"===e.key?l(!i):{}},onClick:function(){return l(!i)},tabIndex:0,children:[Object(g.jsx)("div",{className:"user-image",style:{backgroundImage:"url(".concat(null===t||void 0===t?void 0:t.avatar,")")}}),Object(g.jsx)("div",{className:"name",children:d||Object(g.jsx)("i",{className:"fas fa-spin fa-spinner"})}),(null===t||void 0===t?void 0:t.isPartner)?Object(g.jsx)("div",{className:"partner-badge",children:Object(g.jsx)("i",{className:"fas fa-check"})}):null,Object(g.jsx)("div",{className:"triangle",children:Object(g.jsx)("i",{className:"fas fa-caret-down"})})]})}),Object(g.jsxs)(h.animated.div,{className:"user-menu",style:Object(u.a)({},b),ref:j,children:[Object(g.jsx)("button",{className:"button-menu",type:"button",onClick:function(){return function(){var e="Command;Name;Description;Cost;Date added\n".concat(r.filter((function(e){return e.enabled})).map((function(e){var t;return"".concat(null===(t=e.bot)||void 0===t?void 0:t.identifier,";").concat(e.name||"<empty name>",";").concat(e.description||"<empty description>",";").concat(e.cost||0,";").concat(e.createdAt?Object(O.a)(new Date(e.createdAt),"dd-MM-yyyy HH:mm:ss"):"<empty createdAt>",";")})).join("\n"));navigator.clipboard.writeText(e),l(!1)}()},children:"Copy all items to clipboard"}),Object(g.jsx)("button",{className:"button-menu danger",type:"button",onClick:function(){return c()},children:"Log out"})]})]})},N=n(38);function w(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current}var C="https://api.streamelements.com/kappa",k=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),S=function(e){var t,n,c,r,s,o,i,u,d,b,j,v,f,h,p,x,y,C=e.item,S=e.guestUsername,I=Object(l.h)(),E=a.useState(!1),P=Object(m.a)(E,2),T=P[0],M=P[1],A=w(null===(t=C.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src),D="waveform-".concat(C._id),U=a.useRef(null),_=a.useState(!1),F=Object(m.a)(_,2),R=F[0],J=F[1],V=a.useState(0),G=Object(m.a)(V,2),L=(G[0],G[1]),W=a.useState(!1),z=Object(m.a)(W,2),K=z[0],q=z[1],B=a.useCallback((function(e){var t,n,a,c;(U.current=e,U.current&&(null===(t=C.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src))&&(U.current.load(null===(a=C.alert)||void 0===a||null===(c=a.audio)||void 0===c?void 0:c.src),U.current.on("play",(function(){J(!0)})),U.current.on("pause",(function(){J(!1)})),U.current.on("finish",(function(){J(!1)})),U.current.on("seek",(function(){L(U.current.getCurrentTime())})),U.current.on("audioprocess",(function(){L(U.current.getCurrentTime())})),q(!0))}),[null===(c=C.alert)||void 0===c||null===(r=c.audio)||void 0===r?void 0:r.src]),H=a.useCallback((function(){U.current.playPause()}),[]);return a.useEffect((function(){var e,t,n,a,c,r;K&&A!==(null===(e=C.alert)||void 0===e||null===(t=e.audio)||void 0===t?void 0:t.src)&&(null===(n=C.alert)||void 0===n||null===(a=n.audio)||void 0===a?void 0:a.src)&&U.current.load(null===(c=C.alert)||void 0===c||null===(r=c.audio)||void 0===r?void 0:r.src)}),[null===(s=C.alert)||void 0===s||null===(o=s.audio)||void 0===o?void 0:o.src,A,K]),a.useEffect((function(){var e,t;U.current&&U.current.setVolume(null===(e=C.alert)||void 0===e||null===(t=e.audio)||void 0===t?void 0:t.volume)}),[null===(i=C.alert)||void 0===i||null===(u=i.audio)||void 0===u?void 0:u.volume]),a.useEffect((function(){T&&setTimeout((function(){return M(!1)}),1e3)}),[T]),Object(g.jsxs)("tr",{className:"item".concat(C.enabled?"":" disabled"),onClick:function(){S?H():I("item/".concat(C._id))},children:[Object(g.jsx)("td",{className:"play",children:Object(g.jsx)("button",{className:"inline-button",type:"button",disabled:(null===(d=(null===(b=C.alert)||void 0===b||null===(j=b.audio)||void 0===j?void 0:j.src)||"")||void 0===d?void 0:d.includes(".ogg"))&&k,onKeyPress:function(e){var t,n;(e.preventDefault(),e.stopPropagation(),"ENTER"===e.key)&&((null===(t=C.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src)&&H())},onClick:function(e){var t,n;e.preventDefault(),e.stopPropagation(),(null===(t=C.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src)&&H()},children:Object(g.jsx)("i",{className:R?"fas fa-pause":"fas fa-play"})})}),Object(g.jsx)("td",{className:"copy-clipboard",children:Object(g.jsx)("div",{className:"inline-button".concat(T?" active":""),role:"button",tabIndex:0,onKeyPress:function(e){var t;e.preventDefault(),e.stopPropagation(),navigator.clipboard.writeText("!sound ".concat(null===(t=C.bot)||void 0===t?void 0:t.identifier)||!1),M(!0)},onClick:function(e){var t;e.preventDefault(),e.stopPropagation(),navigator.clipboard.writeText("!sound ".concat(null===(t=C.bot)||void 0===t?void 0:t.identifier)||!1),M(!0)},children:T?Object(g.jsx)("i",{className:"fas fa-clipboard-check"}):Object(g.jsx)("i",{className:"far fa-clipboard"})})}),Object(g.jsx)("td",{className:"sound-name",children:Object(g.jsxs)("div",{className:"name-split",children:[Object(g.jsx)("div",{className:"name",children:null===(v=C.bot)||void 0===v?void 0:v.identifier}),Object(g.jsxs)("div",{className:"description",children:[C.name," - ",C.description]})]})}),Object(g.jsx)("td",{className:"cost center",children:C.cost}),Object(g.jsxs)("td",{className:"volume center",children:[Math.round(100*((null===(f=C.alert)||void 0===f||null===(h=f.audio)||void 0===h?void 0:h.volume)||0)),"%"]}),Object(g.jsx)("td",{className:"duration center",children:C.duration?"".concat(Math.round(10*C.duration)/10,"s"):k&&(null===(p=C.alert)||void 0===p||null===(x=p.audio)||void 0===x||null===(y=x.src)||void 0===y?void 0:y.includes(".ogg"))?Object(g.jsx)("div",{className:"multi-line-warn",children:"OGG files not supported"}):Object(g.jsx)("i",{className:"fas fa-question"})}),Object(g.jsx)("td",{className:"waveform",children:Object(g.jsx)(N.WaveSurfer,{onMount:B,ref:U,children:Object(g.jsx)(N.WaveForm,{id:D,container:D,p:!0,cursorColor:"#ff000000",waveColor:"#BDBABD",progressColor:"#9a64ff",height:35,barWidth:1,barHeight:3,cursorWidth:1,hideScrollbar:!0})})}),Object(g.jsx)("td",{className:"check center enabled",children:Object(g.jsx)("i",{className:C.enabled?"fas fa-check":"fas fa-times"})}),Object(g.jsx)("td",{className:"check center subs-only",children:Object(g.jsx)("i",{className:C.subscriberOnly?"fas fa-check":"fas fa-times"})}),Object(g.jsx)("td",{className:"dateCreated center",children:Object(g.jsxs)("div",{className:"date-creation",children:[Object(g.jsxs)("span",{children:[C.createdAt&&Object(O.a)(new Date(C.createdAt),"dd-MM-yyyy"),"\xa0"]}),Object(g.jsx)("span",{children:C.createdAt&&Object(O.a)(new Date(C.createdAt),"HH:mm:ss")})]})}),Object(g.jsx)("td",{className:"download",children:Object(g.jsx)("div",{className:"inline-button",role:"button",tabIndex:0,onKeyPress:function(e){var t,n;(e.preventDefault(),e.stopPropagation(),"ENTER"===e.key)&&((null===(t=C.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src)&&window.open(C.alert.audio.src))},onClick:function(e){var t,n;e.preventDefault(),e.stopPropagation(),(null===(t=C.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src)&&window.open(C.alert.audio.src)},children:Object(g.jsx)("i",{className:"fas fa-download"})})})]},C._id)},I=a.memo(S),E=function(e){var t,n=e.titleItems;return Object(g.jsx)(i.a,{children:Object(g.jsx)("title",{children:(t=n,"".concat(t.filter((function(e){return e})).join(" - ")," - StreamElements Sounds Editor"))})})};var P=function(e){return"onscreensounds-".concat(e)};function T(e,t){try{var n=localStorage[P(e)];return void 0!==n?JSON.parse(n):t}catch(a){return console.error(a),t}}function M(e,t){try{localStorage[P(e)]=JSON.stringify(t)}catch(n){console.error(n)}}function A(e,t,n){var c=Object(a.useState)((function(){try{var a=window.sessionStorage.getItem(P(e));if(n&&window.sessionStorage.removeItem(P(e)),"undefined"===a&&!0!==n)return;return a&&!0!==n?JSON.parse(a):t}catch(c){return console.error(c),t}})),r=Object(m.a)(c,2),s=r[0],o=r[1];return[s,function(t){try{var n=t instanceof Function?t(s):t;o(n),window.sessionStorage.setItem(P(e),JSON.stringify(n))}catch(a){console.error(a)}}]}n(134);var D=function(e){var t=e.allItems,n=e.items,c=e.user,r=e.sort,s=e.setSort,o=e.resetFilters,i=e.guestUsername,u=Object(l.h)(),d=function(){var e=Object(a.useState)({width:void 0,height:void 0}),t=Object(m.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){function e(){c({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}().height,b=w(n.length),j=function(e){var a=(e-174-(n.length!==t.length?20:0))/40;return Math.floor(a)}(function(e,t){var n=Object(a.useState)(e),c=Object(m.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){var n=setTimeout((function(){s(e)}),t);return function(){clearTimeout(n)}}),[e,t]),r}(d,100)||980),v=A("page",1),f=Object(m.a)(v,2),h=f[0],p=f[1],O=Math.ceil(n.length/j);return a.useEffect((function(){b!==n.length&&p(1)}),[b,n.length,p]),Object(g.jsxs)("div",{className:"list-wrapper",children:[Object(g.jsx)(E,{titleItems:["Page ".concat(h),"Sounds",null===c||void 0===c?void 0:c.displayName]}),Object(g.jsxs)("table",{className:"item-list",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{className:"table-header",children:[Object(g.jsx)("th",{className:"play"}),Object(g.jsx)("th",{className:"copy-clipboard"}),Object(g.jsxs)("th",{className:"sound-name clickable",onClick:function(){return x("soundName")},children:["Sound name",Object(g.jsx)("i",{className:"fas fa-sort".concat("soundName"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(g.jsxs)("th",{className:"cost center clickable",onClick:function(){return x("cost")},children:["Cost",Object(g.jsx)("i",{className:"fas fa-sort".concat("cost"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(g.jsxs)("th",{className:"volume center clickable",onClick:function(){return x("volume")},children:["Volume",Object(g.jsx)("i",{className:"fas fa-sort".concat("volume"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(g.jsxs)("th",{className:"duration center clickable",onClick:function(){return x("duration")},children:["Duration",Object(g.jsx)("i",{className:"fas fa-sort".concat("duration"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(g.jsx)("th",{className:"waveform"}),Object(g.jsxs)("th",{className:"check center enabled clickable",onClick:function(){return x("enabled")},children:["Enabled",Object(g.jsx)("i",{className:"fas fa-sort".concat("enabled"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(g.jsxs)("th",{className:"check center subs-only clickable",onClick:function(){return x("subsOnly")},children:["Subs only"," ",Object(g.jsx)("i",{className:"fas fa-sort".concat("subsOnly"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(g.jsxs)("th",{className:"dateCreated center clickable",onClick:function(){return x("dateCreated")},children:["Date created",Object(g.jsx)("i",{className:"fas fa-sort".concat("dateCreated"===r.sort?"asc"===r.order?"-up":"-down":" unset")})]}),Object(g.jsx)("th",{className:"download"})]})}),Object(g.jsx)("tbody",{children:n.slice((h-1)*j,h*j).map((function(e){return Object(g.jsx)(I,{item:e,guestUsername:i},e._id)}))})]}),Object(g.jsxs)("div",{className:"page-controller-wrapper",children:[n.length!==t.length&&Object(g.jsx)("div",{className:"filtered-warning",onClick:function(){return o()},onKeyPress:function(){return o()},tabIndex:0,role:"button",children:"Results are filtered, click here to clear filters"}),Object(g.jsxs)("div",{className:"page-controller",children:[Object(g.jsxs)("div",{className:"buttons-pages",children:[Object(g.jsx)("button",{className:"button first-page primary small",type:"button",onClick:function(){return p(1)},disabled:1===h,children:Object(g.jsx)("i",{className:"icon fas fa-angle-double-left"})}),Object(g.jsxs)("button",{className:"button previous",type:"button",onClick:function(){return y("previous")},disabled:1===h,children:[Object(g.jsx)("i",{className:"icon fas fa-angle-left"}),Object(g.jsx)("span",{className:"text",children:"Previous page"})]}),Object(g.jsxs)("div",{className:"page-summary",children:[Object(g.jsxs)("div",{className:"page-number",children:["Page ",h," of"," ",n.length<j?1:Math.ceil(n.length/j)]}),Object(g.jsxs)("div",{className:"amount-per-page",children:[n.length," results"]})]}),Object(g.jsxs)("button",{className:"button next",type:"button",onClick:function(){return y("next")},disabled:h===O,children:[Object(g.jsx)("i",{className:"icon fas fa-angle-right"}),Object(g.jsx)("span",{className:"text",children:"Next page"})]}),Object(g.jsx)("button",{className:"button last-page primary small",type:"button",onClick:function(){return p(O)},disabled:h===O,children:Object(g.jsx)("i",{className:"icon fas fa-angle-double-right"})})]}),!i&&Object(g.jsxs)("button",{className:"button primary small with-icon-margin new",type:"button",onClick:function(){return u("item/new")},children:[Object(g.jsx)("i",{className:"icon fas fa-plus"}),Object(g.jsx)("span",{className:"text",children:"Add new sound"})]})]})]})]});function x(e){s({sort:e,order:r.sort===e&&"asc"===r.order?"desc":"asc"})}function y(e){p("previous"===e?h-1:h+1)}};function U(e,t,n){var c=Object(a.useState)((function(){try{var a=window.localStorage.getItem(P(e));if(n&&window.localStorage.removeItem(P(e)),"undefined"===a&&!0!==n)return;return a&&!0!==n?JSON.parse(a):t}catch(c){return console.error(c),t}})),r=Object(m.a)(c,2),s=r[0],o=r[1];return[s,function(t){try{var n=t instanceof Function?t(s):t;o(n),window.localStorage.setItem(P(e),JSON.stringify(n))}catch(a){console.error(a)}}]}var _=n(101),F=n(100),R=n.n(F),J=n(71),V=n.n(J);function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";return Object(_.a)(e,(function(e){return e.sort((function(e,a){var c="asc"===n?-1:1,r="asc"===n?1:-1,s=V()(e,t),o=V()(a,t);return s&&o?s<o?c:s>o?r:0:s?-1:1}))}))}function L(e){return 0===Object.keys(e).length?"":"?".concat(Object.keys(e).reduce((function(t,n){var a=e[n];return(a||0===a||!1===a)&&t.push("".concat(n,"=").concat(encodeURIComponent(a))),t}),[]).join("&"))}n(210);var W=function(e){var t=e.query,n=e.setQuery,a=e.minVolume,c=e.setMinVolume,r=e.maxVolume,s=e.setMaxVolume,o=e.minCost,i=e.setMinCost,l=e.maxCost,u=e.setMaxCost,d=e.minSeconds,b=e.setMinSeconds,j=e.maxSeconds,v=e.setMaxSeconds;return Object(g.jsxs)("div",{className:"filter-header",children:[Object(g.jsxs)("div",{className:"filter-item search",children:[Object(g.jsx)("h3",{children:"Search"}),Object(g.jsx)("input",{placeholder:"Search by sound name",value:t,onChange:function(e){return n(e.target.value)}})]}),Object(g.jsxs)("div",{className:"filter-item cost",children:[Object(g.jsx)("h3",{children:"Cost"}),Object(g.jsxs)("div",{className:"flex",children:[Object(g.jsx)("input",{className:(o||0)<(l||0)?"warn":"",type:"number",value:o||void 0,placeholder:"Min",min:0,max:9999999999,onChange:function(e){return i(parseInt(e.target.value,10))}}),Object(g.jsx)("input",{className:(o||0)<(l||0)?"warn":"",type:"number",value:l||void 0,placeholder:"Max",min:1,max:1e9,onChange:function(e){return u(parseInt(e.target.value,10))}})]})]}),Object(g.jsxs)("div",{className:"filter-item volume",children:[Object(g.jsx)("h3",{children:"Volume"}),Object(g.jsxs)("div",{className:"flex",children:[Object(g.jsx)("input",{className:(a||0)<(r||0)?"warn":"",type:"number",value:a||void 0,placeholder:"Min",min:0,max:99,onChange:function(e){return c(parseInt(e.target.value,10))}}),Object(g.jsx)("input",{className:(a||0)<(r||0)?"warn":"",type:"number",value:r||void 0,placeholder:"Max",min:1,max:100,onChange:function(e){return s(parseInt(e.target.value,10))}})]})]}),Object(g.jsxs)("div",{className:"filter-item duration",children:[Object(g.jsx)("h3",{children:"Duration"}),Object(g.jsxs)("div",{className:"flex",children:[Object(g.jsx)("input",{className:(d||0)<(j||0)?"warn":"",type:"number",value:d||void 0,placeholder:"Min",min:0,max:9999999999,onChange:function(e){return b(parseInt(e.target.value,10))}}),Object(g.jsx)("input",{className:(d||0)<(j||0)?"warn":"",type:"number",value:j||void 0,placeholder:"Max",min:1,max:1e9,onChange:function(e){return v(parseInt(e.target.value,10))}})]})]})]})},z=function(e){var t=e.items,n=e.children,c=U("query",""),r=Object(m.a)(c,2),s=r[0],o=r[1],i=U("minVolume",void 0),l=Object(m.a)(i,2),u=l[0],d=l[1],b=U("maxVolume",void 0),j=Object(m.a)(b,2),v=j[0],f=j[1],h=U("minCost",void 0),p=Object(m.a)(h,2),O=p[0],x=p[1],y=U("maxCost",void 0),N=Object(m.a)(y,2),w=N[0],C=N[1],k=U("minSeconds",void 0),S=Object(m.a)(k,2),I=S[0],E=S[1],P=U("maxSeconds",void 0),T=Object(m.a)(P,2),M=T[0],A=T[1],D=U("sort",{sort:"dateCreated",order:"desc"}),_=Object(m.a)(D,2),F=_[0],R=_[1],J=a.useState(t),V=Object(m.a)(J,2),L=V[0],z=V[1],K=a.useCallback((function(e,t){return G(e.filter((function(e){var t,n,a,c,r,o;return(-1!==e.name.toUpperCase().indexOf(s.toUpperCase())||e.description.toUpperCase().includes(s.toUpperCase())||(null===(t=e.bot)||void 0===t||null===(n=t.identifier)||void 0===n?void 0:n.toUpperCase().includes(s.toUpperCase())))&&100*((null===(a=e.alert)||void 0===a||null===(c=a.audio)||void 0===c?void 0:c.volume)||0)>=(u||0)&&100*((null===(r=e.alert)||void 0===r||null===(o=r.audio)||void 0===o?void 0:o.volume)||0)<=(v||100)&&(e.cost||0)>=(O||0)&&(e.cost||0)<=(w||1e8)&&(e.duration||0)>=(I||0)&&(e.duration||0)<=(M||1e8)})),function(e){switch(e){case"soundName":return"bot.identifier";case"volume":return"alert.audio.volume";case"dateCreated":return"createdAt";case"duration":return"duration";default:return e}}(t.sort),t.order)}),[s,u,v,O,w,I,M]);a.useEffect((function(){z(K(t,F))}),[t,K,F]);var q=W({query:s,setQuery:o,minVolume:u,setMinVolume:d,maxVolume:v,setMaxVolume:f,minCost:O,setMinCost:x,maxCost:w,setMaxCost:C,minSeconds:I,setMinSeconds:E,maxSeconds:M,setMaxSeconds:A});return Object(g.jsx)(g.Fragment,{children:n(q,L,F,R,(function(){o(""),d(void 0),f(void 0),x(void 0),C(void 0),E(void 0),A(void 0)}))})};function K(e,t){return fetch(e,t).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}))}var q=function(e){return{getCurrentUserChannel:function(){var t={method:"GET",headers:e?{Authorization:e}:void 0};return K("".concat(C,"/v2/users/current"),t)},getUserChannelFromUserName:function(e){return K("".concat(C,"/v2/channels/").concat(e),{method:"GET"})},getMeDetails:function(){var t={method:"GET",headers:e?{Authorization:e}:void 0};return K("".concat(C,"/v2/channels/me"),t)},getChannelItems:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,a=arguments.length>2?arguments[2]:void 0,c={method:"GET",headers:e?{Authorization:e}:void 0},r=L({limit:n,offset:a});return K("".concat(C,"/v2/store/").concat(t,"/items").concat(r),c)},saveChannelItem:function(t,n){if(!e)throw new Error("API call only allowed when not a guest");var a={method:"PUT",headers:{Authorization:e,"Content-Type":"application/json"},body:JSON.stringify(n)};return K("".concat(C,"/v2/store/").concat(t,"/items/").concat(n._id),a)},createChannelItem:function(t,n){if(!e)throw new Error("API call only allowed when not a guest");var a={method:"POST",headers:{Authorization:e,"Content-Type":"application/json"},body:JSON.stringify(n)};return K("".concat(C,"/v2/store/").concat(t,"/items"),a)},deleteChannelItem:function(t,n){if(!e)throw new Error("API call only allowed when not a guest");var a={method:"DELETE",headers:{Authorization:e}};return fetch("".concat(C,"/v2/store/").concat(t,"/items/").concat(n),a).then((function(){}))},getUploadedItems:function(t,n,a){if(!e)throw new Error("API call only allowed when not a guest");var c={method:"GET",headers:{Authorization:e}},r=L({limit:n,offset:a,type:"audio"});return K("".concat(C,"/v2/uploads/").concat(t).concat(r),c)},uploadFile:function(t,n,a){if(!e)throw new Error("API call only allowed when not a guest");var c=new FormData;c.append("file",n,a);var r={method:"POST",headers:{Authorization:e},body:c};return K("".concat(C,"/v2/uploads/").concat(t),r)}}},B=c.a.createContext(null);function H(e){var t=e.children,n=c.a.useState(),a=Object(m.a)(n,2),r=a[0],s=a[1],o=U("StreamElementsGuestUsername",null),i=Object(m.a)(o,2),l=i[0],u=i[1],d=U("StreamElementsJWT",null),b=Object(m.a)(d,2),j=b[0],v={user:r,setUser:s,token:j,setToken:b[1],guestUsername:l,setGuestUsername:u,APIService:j?q("Bearer ".concat(j)):l?q(void 0):null};return Object(g.jsx)(B.Provider,{value:v,children:t})}function Q(){return c.a.useContext(B)}n(211);var Y=function(){var e=Q(),t=e.user,n=e.setUser,c=e.APIService,r=e.token,s=e.setToken,o=e.guestUsername,i=e.setGuestUsername,d=Object(a.useState)([]),h=Object(m.a)(d,2),p=h[0],O=h[1],x=Object(a.useState)([]),N=Object(m.a)(x,2),w=N[0],C=N[1],k=Object(a.useState)(!1),S=Object(m.a)(k,2),I=S[0],E=S[1],P=Object(a.useCallback)((function(){return _.apply(this,arguments)}),[c,n,r,o]),A=Object(a.useCallback)((function(e){return F.apply(this,arguments)}),[c,o]),U=Object(a.useCallback)((function(e){return R.apply(this,arguments)}),[c]);return Object(a.useEffect)((function(){P()}),[]),Object(a.useEffect)((function(){(null===t||void 0===t?void 0:t._id)?(A(t._id),o||U(t._id)):O([])}),[null===t||void 0===t?void 0:t._id,A,U,o]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"home",children:[Object(g.jsx)(y,{allItems:p,user:t,loading:I,guestUsername:o,logout:function(){s(null),i(null)}}),Object(g.jsx)("div",{className:"content",children:Object(g.jsx)(z,{items:p,children:function(e,n,a,c,r){return Object(g.jsxs)(g.Fragment,{children:[e,Object(g.jsx)(D,{user:t,items:n,allItems:p,sort:a,setSort:c,resetFilters:r,guestUsername:o})]})}})})]}),Object(g.jsx)(l.b,{context:{items:p,files:w,setItem:function(e){var t=p.findIndex((function(t){return t._id===e._id}));if(t){var n=Object(j.a)(p);n[t]=e,O(n)}else O([].concat(Object(j.a)(p),[e]))},setFile:function(e){var t=w.findIndex((function(t){return t._id===e._id}));if(t){var n=Object(j.a)(w);n[t]=e,C(n)}else C([].concat(Object(j.a)(w),[e]))},reloadItems:function(){(null===t||void 0===t?void 0:t._id)&&(A(t._id),U(t._id))}}})]});function _(){return(_=Object(v.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=22;break}if(e.prev=1,E(!0),!r){e.next=9;break}return e.next=6,null===c||void 0===c?void 0:c.getMeDetails();case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,c.getUserChannelFromUserName(o||"");case 11:e.t0=e.sent;case 12:t=e.t0,n(t),e.next=19;break;case 16:e.prev=16,e.t1=e.catch(1),console.error(e.t1);case 19:return e.prev=19,E(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,16,19,22]])})))).apply(this,arguments)}function F(){return F=Object(v.a)(b.a.mark((function e(t){var n,a,r,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=22;break}return e.prev=1,E(!0),e.next=5,null===c||void 0===c?void 0:c.getChannelItems(t);case 5:return n=e.sent,a=n.filter((function(e){var t,n;return o?e.enabled&&(null===(t=e.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src):e})),r="DURATIONS-".concat(t),s=T(r,[]),e.next=11,Promise.all(a.map(function(){var e=Object(v.a)(b.a.mark((function e(t){var n,a,c,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=null===(n=s.find((function(e){var n,a;return e.url===(null===(n=t.alert)||void 0===n||null===(a=n.audio)||void 0===a?void 0:a.src)})))||void 0===n?void 0:n.duration)){e.next=3;break}return e.abrupt("return",Object(u.a)(Object(u.a)({},t),{},{duration:r}));case 3:return e.next=5,J((null===(a=t.alert)||void 0===a||null===(c=a.audio)||void 0===c?void 0:c.src)||"");case 5:return o=e.sent,e.abrupt("return",Object(u.a)(Object(u.a)({},t),{},{duration:o||void 0}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:i=e.sent,M(r,i.map((function(e){var t,n,a,c;return(null===(t=e.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src)?{url:null===(a=e.alert)||void 0===a||null===(c=a.audio)||void 0===c?void 0:c.src,duration:e.duration}:void 0})).filter((function(e){return e}))),O(i),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.error(e.t0);case 19:return e.prev=19,E(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,16,19,22]])}))),F.apply(this,arguments)}function R(){return(R=Object(v.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c||!t){e.next=15;break}return e.prev=1,E(!0),e.next=5,null===c||void 0===c?void 0:c.getUploadedItems(t,void 0);case 5:n=e.sent,C(n.uploads),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:return e.prev=12,E(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})))).apply(this,arguments)}function J(e){return V.apply(this,arguments)}function V(){return(V=Object(v.a)(b.a.mark((function e(t){var n,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=16;break}return e.prev=1,n=new f.a,e.next=5,fetch(t,{method:"GET"}).then((function(e){return e.arrayBuffer()}));case 5:return a=e.sent,e.next=8,n.decodeAudioData(a,(function(e){return e}));case 8:return c=e.sent,e.abrupt("return",c.duration);case 12:return e.prev=12,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",void 0);case 16:return e.abrupt("return",void 0);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}},X=n(102),Z=(n(212),function(){var e=Q(),t=e.token,n=e.setToken,c=e.guestUsername,r=e.setGuestUsername,s=Object(l.h)(),o=function(e){var t=R()(e);"?"===t.charAt(0)&&(t=t.slice(1));var n=t.split("&"),a={};return n.forEach((function(e){var t=e.split("=");t[1]&&(a[t[0]]=t[1])})),a}(Object(l.g)().search),i=Object(a.useState)(""),u=Object(m.a)(i,2),d=u[0],b=u[1],j=Object(a.useState)(""),v=Object(m.a)(j,2),f=v[0],h=v[1];return Object(a.useEffect)((function(){o.channel&&!t&&r(o.channel),t&&s("/")}),[]),Object(a.useEffect)((function(){c&&s("/")}),[c,s]),Object(g.jsxs)("div",{className:"login-page",children:[Object(g.jsx)(E,{titleItems:["Login"]}),Object(g.jsx)("h1",{className:"page-title",children:"StreamElements Sounds manager"}),Object(g.jsxs)("div",{className:"content-split",children:[Object(g.jsxs)("div",{className:"block guest-mode",children:[Object(g.jsx)("h2",{children:"Guest mode"}),Object(g.jsx)("p",{children:"View and listen to all your favourite stream sounds without logging in"}),Object(g.jsxs)("button",{className:"guest-button",type:"button",onClick:function(){return r("ONSCREEN")},children:[Object(g.jsxs)("div",{className:"image-username",children:[Object(g.jsx)("div",{className:"user-image",style:{backgroundImage:"url(https://static-cdn.jtvnw.net/jtv_user_pictures/3abf196b-0d2f-44f3-93b2-e5121219899f-profile_image-300x300.png)"}}),Object(g.jsx)("div",{className:"username",children:"ONSCREEN"})]}),Object(g.jsx)("i",{className:"icon fas fa-arrow-right"})]}),Object(g.jsxs)("form",{className:"guest-input",onSubmit:function(){return r(f)},children:[Object(g.jsx)("input",{type:"text",value:f,onChange:function(e){return h(e.target.value)},placeholder:"Twitch username"}),Object(g.jsx)("button",{type:"button",onClick:function(){return r(f)},children:"Continue as guest"})]})]}),Object(g.jsxs)("div",{className:"block login-block",children:[Object(g.jsx)("h2",{children:"Manage mode"}),Object(g.jsxs)("div",{className:"info-box warning",children:[Object(g.jsxs)("div",{className:"header",children:[Object(g.jsx)("i",{className:"fas fa-info-circle"}),Object(g.jsx)("span",{children:"Information"})]}),Object(g.jsxs)("div",{className:"content",children:[Object(g.jsx)("p",{children:"To edit sounds the tool needs your JWT (JSON web token)."}),Object(g.jsx)("p",{children:"You can find this by logging into StreamElements, clicking your image in the top right, then your username and lastly Channel Settings."}),Object(g.jsx)("p",{children:'Then toggle the "Show secrets" button, and copy the JWT in full inside the input field.'})]}),Object(g.jsx)("div",{className:"footer",children:Object(g.jsx)("span",{children:"Do not share this token!"})})]}),Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(d),b(""),s("/")},children:[Object(g.jsx)("input",{type:"password",value:d,onChange:function(e){return b(e.target.value)},placeholder:"JWT (JSON web token)"}),Object(g.jsxs)("div",{className:"buttons",children:[Object(g.jsx)("button",{type:"submit",children:"Login"}),Object(g.jsxs)("button",{className:"secondary",type:"button",onClick:function(){return window.open("https://streamelements.com/dashboard/account/channels","_blank")},children:[Object(g.jsx)("i",{className:"icon fas fa-external-link-square-alt"}),"StreamElements Channel Settings"]})]})]})]}),Object(g.jsxs)("div",{className:"copy",children:[Object(g.jsxs)("div",{className:"who",children:["\xa9 damon02 - ",Object(O.a)(new Date,"yyyy")]}),Object(g.jsxs)("div",{className:"version",children:["v",X.version]})]})]})]})}),$=n(232),ee=n(233),te=n(107),ne=function(e){var t=e.id,n=e.label,a=e.additionalLabel,c=e.type,r=e.subtitle,s=e.value,o=e.onChange,i=e.placeholder,l=e.allowsMin;return Object(g.jsxs)("div",{className:"item-wrapper",id:t,children:[(n||a)&&Object(g.jsxs)("label",{children:[n,a]}),"input large"===c?Object(g.jsx)("input",{className:"input large",value:s,onChange:function(e){return o(e.target.value)},placeholder:i}):"textarea"===c?Object(g.jsx)("textarea",{value:s,onChange:function(e){return o(e.target.value)},placeholder:i}):"input number"===c?Object(g.jsx)("input",{value:s,type:"number",onChange:function(e){var t=e.target.value?parseInt(e.target.value,10):0;o(t>999999999?999999999:!l&&t<0?0:t)},placeholder:i,min:l||0,max:999999999}):Object(g.jsx)("input",{value:s,onChange:function(e){return o(e.target.value)},placeholder:i}),r&&Object(g.jsx)("label",{className:"subtitle",children:r})]})},ae=function(e){var t=e.item,n=e.selectedFile,c=e.handleOnClick,r=a.useState(!1),s=Object(m.a)(r,2),o=s[0],i=s[1];return Object(g.jsxs)("tr",{className:"file-row".concat((null===n||void 0===n?void 0:n._id)===t._id?" active":""),onClick:function(){return c(t)},children:[Object(g.jsx)("td",{className:"play",children:Object(g.jsx)("div",{className:"play-button",role:"button",tabIndex:0,onKeyPress:function(e){e.preventDefault(),e.stopPropagation(),"ENTER"===e.key&&t.url&&l(t.url)},onClick:function(e){e.preventDefault(),e.stopPropagation(),t.url&&l(t.url)},children:Object(g.jsx)("i",{className:o?"fas fa-pause":"fas fa-play"})})}),Object(g.jsx)("td",{className:"sound-name",children:t.name}),Object(g.jsxs)("td",{className:"dateCreated center",children:[Object(g.jsx)("div",{children:t.createdAt&&Object(O.a)(new Date(t.createdAt),"dd-MM-yyyy")}),Object(g.jsx)("div",{children:t.createdAt&&Object(O.a)(new Date(t.createdAt),"HH:mm:ss")})]})]},t._id);function l(e){return u.apply(this,arguments)}function u(){return u=Object(v.a)(b.a.mark((function e(t){var n,a,c,r=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:1,(a=new Audio(t)).volume=n,i(!0),e.prev=4,e.next=7,a.play();case 7:c=a.duration,setTimeout((function(){return i(!1)}),1e3*c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),u.apply(this,arguments)}},ce=a.memo(ae),re=function(e){var t=e.files,n=e.selectedFile,r=e.setSelectedFile,s=e.fileInputRef,o=e.item,i=e.volume,l=Object(a.useState)(!1),u=Object(m.a)(l,2),d=u[0],b=u[1],j=Object(a.useState)(0),v=Object(m.a)(j,2),f=v[0],h=v[1],p=Object(a.useState)(!1),O=Object(m.a)(p,2),y=O[0],w=O[1],C=Object(a.useState)(""),k=Object(m.a)(C,2),S=k[0],I=k[1],E=Object(a.useState)(null),P=Object(m.a)(E,2),T=P[0],M=P[1],A=c.a.useRef(null),D=c.a.useCallback((function(e){A.current=e,A.current&&"new"!==n&&(null===n||void 0===n?void 0:n.url)&&(A.current.load(null===n||void 0===n?void 0:n.url),A.current.on("play",(function(){b(!0)})),A.current.on("pause",(function(){b(!1)})),A.current.on("finish",(function(){b(!1)})),A.current.on("seek",(function(){h(A.current.getCurrentTime())})),A.current.on("audioprocess",(function(){h(A.current.getCurrentTime())})))}),[n]),U=c.a.useRef(null);x(U,(function(){return w(!1)}));var _=c.a.useCallback((function(){A.current.playPause()}),[]);return Object(a.useEffect)((function(){A.current&&A.current.setVolume(i)}),[i]),Object(a.useEffect)((function(){A.current&&"new"!==n&&(null===n||void 0===n?void 0:n.url)&&A.current.load(null===n||void 0===n?void 0:n.url)}),[n]),Object(a.useEffect)((function(){S&&0!==S.length||M(null);var e=t.filter((function(e){return e.name.toUpperCase().includes(S.toUpperCase())}));M(G(e,"dateCreated"))}),[S,t]),Object(g.jsxs)("div",{className:"item-wrapper file",ref:U,children:[Object(g.jsxs)("div",{className:"inner-wrapper",children:[n&&"new"!==n?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("button",{className:"button small secondary",type:"button",onClick:function(){return r(void 0)},children:Object(g.jsx)("i",{className:"icon fas fa-times"})}),Object(g.jsxs)("div",{className:"file-tag",children:[Object(g.jsx)("button",{className:"play-button",type:"button",onClick:function(e){var t,n;e.preventDefault(),e.stopPropagation(),(null===o||void 0===o||null===(t=o.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src)&&_()},children:d?Object(g.jsx)("i",{className:"fas fa-pause"}):Object(g.jsx)("i",{className:"fas fa-play"})}),Object(g.jsxs)("div",{className:"detail-rows",children:[Object(g.jsxs)("div",{className:"name",children:[Object(g.jsx)("i",{className:"icon fas fa-file-audio"}),Object(g.jsx)("span",{className:"subtitle",children:null===n||void 0===n?void 0:n.name})]}),Object(g.jsxs)("div",{className:"duration",children:[Object(g.jsx)("i",{className:"icon fas fa-music"}),(null===o||void 0===o?void 0:o.duration)?"".concat(0!==f&&Math.round(10*f)/10!==Math.round(10*(null===o||void 0===o?void 0:o.duration))/10?"".concat(Math.round(10*f)/10,"s / "):"").concat(Math.round(10*o.duration)/10,"s"):Object(g.jsx)("i",{className:"fas fa-spin fa-spinner"})]})]}),n&&Object(g.jsx)("div",{className:"waveform",children:Object(g.jsx)(N.WaveSurfer,{onMount:D,ref:A,children:Object(g.jsx)(N.WaveForm,{id:"waveform-".concat(null===n||void 0===n?void 0:n._id),container:"waveform-".concat(null===n||void 0===n?void 0:n._id),p:!0,cursorColor:"#ff000000",waveColor:"#BDBABD",progressColor:"#FFFFFF",height:35,barWidth:1,barHeight:3,cursorWidth:1,hideScrollbar:!0})})})]})]}):Object(g.jsx)("div",{className:"file-tag drop",children:Object(g.jsx)("input",{type:"file",id:"sound",name:"sound",accept:"audio/mp3,audio/aac,audio/wav,audio/ogg",ref:s,onChange:function(){return r("new")}})}),Object(g.jsxs)("button",{className:"button secondary showAll",type:"button",onClick:function(){return w(!y)},children:[Object(g.jsx)("i",{className:"icon fas fa-".concat(y?"angle-up":"angle-down")}),Object(g.jsx)("span",{children:"All files"})]})]}),y&&Object(g.jsxs)("div",{className:"file-list",children:[Object(g.jsxs)("div",{className:"search-header",children:[Object(g.jsx)("input",{placeholder:"Search by sound name",value:S,onChange:function(e){return I(e.target.value)}}),Object(g.jsx)("span",{children:(null===T||void 0===T?void 0:T.length)?"".concat(T.length," results"):"Showing all ".concat(t.length," files")})]}),Object(g.jsx)("div",{className:"list",children:(T||t).map((function(e){return Object(g.jsx)(ce,{item:e,selectedFile:"new"===n?void 0:n,handleOnClick:function(e){return r(e)}},e._id)}))})]})]})},se=(n(225),function(e){var t=e.api,n=e.channelId,r=e.itemId,s=e.showPrompt,o=e.setShowPrompt,i=e.onDelete,l=Object(a.useState)(!1),d=Object(m.a)(l,2),j=d[0],f=d[1],O=Object(a.useState)(),y=Object(m.a)(O,2),N=y[0],w=y[1],C=Object(h.useSpring)({opacity:s?1:0,transform:s?"scale(1)":"scale(0)",config:{duration:250,easing:p.a}}),k=c.a.useRef(null);return x(k,(function(){return o(!1)})),Object(g.jsx)(h.animated.div,{className:"delete-background",style:Object(u.a)({},C),children:Object(g.jsxs)(h.animated.div,{className:"delete-inner",style:Object(u.a)({},C),ref:k,children:[N&&Object(g.jsx)("div",{className:"error",children:N}),Object(g.jsx)("div",{className:"are-you-sure",children:"Are you sure you want to delete this sound?"}),Object(g.jsxs)("div",{className:"buttons",children:[Object(g.jsx)("button",{className:"button-menu danger",type:"button",disabled:j,onClick:function(){return function(){return S.apply(this,arguments)}()},children:j?Object(g.jsx)("i",{className:"fas fa-spin fa-circle-notch"}):"Delete sound"}),Object(g.jsx)("button",{className:"button-menu secondary",type:"button",onClick:function(){return o(!1)},children:"No"})]})]})});function S(){return(S=Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&r){e.next=3;break}return w("Channel ID or Item ID is missing"),e.abrupt("return");case 3:return e.prev=3,f(!0),w(void 0),e.next=8,null===t||void 0===t?void 0:t.deleteChannelItem(n,r);case 8:i(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0),w("An unknown error occurred while trying to communicate to StreamElements :(");case 15:return e.prev=15,f(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,11,15,18]])})))).apply(this,arguments)}});n(226);var oe=function(){var e,t,n,r,s,o,i,d,j=Object(l.h)(),f=Q(),h=f.APIService,p=f.user,O=f.guestUsername,y=Object(l.j)().itemId,N=Object(l.i)(),w=N.items,C=N.files,k=N.setItem,S=N.reloadItems,I=Object(a.useState)(!1),P=Object(m.a)(I,2),T=P[0],M=P[1],D=Object(a.useState)(!1),U=Object(m.a)(D,2),_=U[0],F=U[1],R=w.find((function(e){return e._id===y})),J=(null===R||void 0===R?void 0:R._id)||"new",V=A("enabled-".concat(J),void 0===(null===R||void 0===R?void 0:R.enabled)||R.enabled),G=Object(m.a)(V,2),L=G[0],W=G[1],z=A("name-".concat(J),(null===R||void 0===R?void 0:R.name)||""),K=Object(m.a)(z,2),q=K[0],B=K[1],H=A("description-".concat(J),(null===R||void 0===R?void 0:R.description)||""),Y=Object(m.a)(H,2),X=Y[0],Z=Y[1],ae=A("cost-".concat(J),(null===R||void 0===R?void 0:R.cost)||10),ce=Object(m.a)(ae,2),oe=ce[0],ie=ce[1],le=A("quantity-".concat(J),(null===R||void 0===R?void 0:R.quantity.total)||-1),ue=Object(m.a)(le,2),de=ue[0],be=ue[1],je=A("globalCooldown-".concat(J),(null===R||void 0===R||null===(e=R.cooldown)||void 0===e?void 0:e.global)||0),ve=Object(m.a)(je,2),me=ve[0],fe=ve[1],he=A("userCooldown-".concat(J),(null===R||void 0===R||null===(t=R.cooldown)||void 0===t?void 0:t.user)||10),pe=Object(m.a)(he,2),Oe=pe[0],xe=pe[1],ge=A("categoryCooldownName-".concat(J),(null===R||void 0===R?void 0:R.categoryName)||""),ye=Object(m.a)(ge,2),Ne=ye[0],we=ye[1],Ce=A("categoryCooldownTime-".concat(J),(null===R||void 0===R||null===(n=R.cooldown)||void 0===n?void 0:n.category)||0),ke=Object(m.a)(Ce,2),Se=ke[0],Ie=ke[1],Ee=A("volume-".concat(J),(null===R||void 0===R||null===(r=R.alert)||void 0===r||null===(s=r.audio)||void 0===s?void 0:s.volume)||1),Pe=Object(m.a)(Ee,2),Te=Pe[0],Me=Pe[1],Ae=A("command-".concat(J),(null===R||void 0===R||null===(o=R.bot)||void 0===o?void 0:o.identifier)||""),De=Object(m.a)(Ae,2),Ue=De[0],_e=De[1],Fe=Object(a.useState)(),Re=Object(m.a)(Fe,2),Je=Re[0],Ve=Re[1],Ge=Object(a.useRef)(null),Le=A("redeemables-".concat(J),{website:!1,extension:!1,bot:!0,confirmation:!0}),We=Object(m.a)(Le,2),ze=We[0],Ke=We[1],qe=c.a.useRef(null);x(qe,_?function(){return{}}:He),Object(a.useEffect)((function(){O&&He()}),[]),Object(a.useEffect)((function(){var e,t,n,a,c,r,s;R&&(W(R.enabled),B(R.name),Z(R.description),ie(R.cost),be(R.quantity.total),fe((null===(e=R.cooldown)||void 0===e?void 0:e.global)||0),xe((null===(t=R.cooldown)||void 0===t?void 0:t.user)||0),we((null===R||void 0===R?void 0:R.categoryName)||""),Ie((null===R||void 0===R||null===(n=R.cooldown)||void 0===n?void 0:n.category)||0),Me((null===R||void 0===R||null===(a=R.alert)||void 0===a||null===(c=a.audio)||void 0===c?void 0:c.volume)||1),Ke({website:(null===R||void 0===R?void 0:R.sources.includes("website"))||!1,extension:(null===R||void 0===R?void 0:R.sources.includes("extension"))||!1,bot:(null===R||void 0===R?void 0:R.sources.includes("bot"))||!0,confirmation:(null===R||void 0===R||null===(r=R.bot)||void 0===r?void 0:r.sendResponse)||!0}),_e((null===(s=R.bot)||void 0===s?void 0:s.identifier)||""))}),[R]),Object(a.useEffect)((function(){var e=C.find((function(e){var t,n;return e.url===(null===R||void 0===R||null===(t=R.alert)||void 0===t||null===(n=t.audio)||void 0===n?void 0:n.src)}));Ve(e)}),[C,R]);var Be=function(){var e,t,n,a,c,r;return"new"!==Je&&(null===Je||void 0===Je?void 0:Je.url)!==(null===R||void 0===R||null===(e=R.alert)||void 0===e||null===(t=e.audio)||void 0===t?void 0:t.src)||L!==(null===R||void 0===R?void 0:R.enabled)&&void 0!==(null===R||void 0===R?void 0:R.enabled)||q!==(null===R||void 0===R?void 0:R.name)||X!==(null===R||void 0===R?void 0:R.description)||oe!==(null===R||void 0===R?void 0:R.cost)||de!==(null===R||void 0===R?void 0:R.quantity.total)||me!==(null===(n=R.cooldown)||void 0===n?void 0:n.global)||Oe!==R.cooldown.user||Ne!==R.categoryName||Se!==R.cooldown.category||Te!==(null===(a=R.alert)||void 0===a||null===(c=a.audio)||void 0===c?void 0:c.volume)||Ue!==(null===(r=R.bot)||void 0===r?void 0:r.identifier)}();return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(E,{titleItems:[q||("new"===J?"New sound":Ue||"Sound"),"Sounds",null===p||void 0===p?void 0:p.displayName]}),Object(g.jsx)(se,{api:h,channelId:null===p||void 0===p?void 0:p._id,itemId:J,showPrompt:_,setShowPrompt:F,onDelete:function(){return He()}}),Object(g.jsx)("div",{className:"item-details-wrapper",children:Object(g.jsxs)("div",{className:"floating-block",ref:qe,children:[Object(g.jsxs)("div",{className:"content left",children:[Object(g.jsx)(ne,{label:"Item name",type:"input large",subtitle:"This will be presented to the chat",value:q,onChange:function(e){return B(e)}}),Object(g.jsxs)("div",{className:"item-wrapper checkbox",onClick:function(){return W(!L)},onKeyPress:function(){return W(!L)},tabIndex:0,role:"button",children:[Object(g.jsx)("input",{type:"checkbox",checked:L,onClick:function(){return W(!L)}}),Object(g.jsx)("label",{children:"Enabled"})]}),Object(g.jsx)(ne,{label:"Description",type:"textarea",subtitle:"Only visible in StreamElements.",value:X,onChange:function(e){return Z(e)}}),Object(g.jsxs)("div",{className:"flex",children:[Object(g.jsx)(ne,{label:"Item cost",type:"input number",subtitle:"Cost of this item in points",value:oe,onChange:function(e){return ie(e)}}),Object(g.jsx)(ne,{label:"Quantity",type:"input number",subtitle:"-1 for unlimited amount",value:de,allowsMin:-1,onChange:function(e){return be(e)}})]}),Object(g.jsxs)("div",{className:"flex",children:[Object(g.jsx)(ne,{label:"Global cooldown",type:"input number",subtitle:"In seconds, (".concat(me?Object($.a)(Object(ee.a)({start:0,end:1e3*(me||.01)}),{format:["years","days","hours","minutes","seconds"]}):"?",")"),value:me,onChange:function(e){return fe(e)}}),Object(g.jsx)(ne,{label:"User cooldown",type:"input number",subtitle:"In seconds, (".concat(Oe?Object($.a)(Object(ee.a)({start:0,end:1e3*(Oe||0)}),{format:["years","days","hours","minutes","seconds"]}):"?",")"),value:Oe,onChange:function(e){return xe(e)}})]}),Object(g.jsxs)("div",{className:"flex item-wrapper",children:[Object(g.jsx)("label",{children:"Category cooldown"}),Object(g.jsx)("label",{className:"toptitle",children:"A user is blocked from purchasing items from the same category during the cool down period."}),Object(g.jsxs)("div",{className:"flex",children:[Object(g.jsx)(ne,{type:"input",placeholder:"Name",value:Ne,onChange:function(e){return we(e)}}),Object(g.jsx)(ne,{type:"input number",placeholder:"Time in seconds",value:Se,onChange:function(e){return Ie(e)},subtitle:"In seconds, (".concat(Se?Object($.a)(Object(ee.a)({start:0,end:1e3*(Se||0)}),{format:["years","days","hours","minutes","seconds"]}):"?",")")})]})]})]}),Object(g.jsxs)("div",{className:"content right",children:[Object(g.jsx)(re,{files:C,item:R,selectedFile:Je,setSelectedFile:Ve,volume:Te,fileInputRef:Ge}),Object(g.jsxs)("div",{className:"item-wrapper volume",children:[Object(g.jsxs)("label",{children:["Volume (",Math.round(100*(Te||0)),"%)"]}),Object(g.jsx)(te.a,{value:Te,onChange:function(e){return Me(e)},min:0,max:1,step:.01,handleStyle:{height:24,width:24,marginTop:-7,backgroundColor:"#6441a5",borderColor:"#9a64ff"},railStyle:{backgroundColor:"#282a36",height:10},trackStyle:{backgroundColor:"#9a64ff",height:10}})]}),Object(g.jsxs)("div",{className:"item-wrapper checkbox",onClick:function(){return Ke(Object(u.a)(Object(u.a)({},ze),{},{website:!ze.website}))},onKeyPress:function(){return Ke(Object(u.a)(Object(u.a)({},ze),{},{website:!ze.website}))},tabIndex:0,role:"button",children:[Object(g.jsx)("input",{type:"checkbox",checked:ze.website,onClick:function(){return Ke(Object(u.a)(Object(u.a)({},ze),{},{website:!ze.website}))}}),Object(g.jsx)("label",{children:"Redeemable via website"})]}),Object(g.jsxs)("div",{className:"item-wrapper checkbox",onClick:function(){return Ke(Object(u.a)(Object(u.a)({},ze),{},{extension:!ze.extension}))},onKeyPress:function(){return Ke(Object(u.a)(Object(u.a)({},ze),{},{extension:!ze.extension}))},tabIndex:0,role:"button",children:[Object(g.jsx)("input",{type:"checkbox",checked:ze.extension,onClick:function(){return Ke(Object(u.a)(Object(u.a)({},ze),{},{extension:!ze.extension}))}}),Object(g.jsx)("label",{children:"Redeemable via extension"})]}),Object(g.jsxs)("div",{className:"item-wrapper checkbox",onClick:function(){return Ke(Object(u.a)(Object(u.a)({},ze),{},{bot:!ze.bot}))},onKeyPress:function(){return Ke(Object(u.a)(Object(u.a)({},ze),{},{bot:!ze.bot}))},tabIndex:0,role:"button",children:[Object(g.jsx)("input",{type:"checkbox",checked:ze.bot,onClick:function(){return Ke(Object(u.a)(Object(u.a)({},ze),{},{bot:!ze.bot}))}}),Object(g.jsx)("label",{children:"Redeemable via chat"})]}),Object(g.jsxs)("div",{className:"item-wrapper checkbox",onClick:function(){return Ke(Object(u.a)(Object(u.a)({},ze),{},{confirmation:!ze.confirmation}))},onKeyPress:function(){return Ke(Object(u.a)(Object(u.a)({},ze),{},{confirmation:!ze.confirmation}))},tabIndex:0,role:"button",children:[Object(g.jsx)("input",{type:"checkbox",checked:ze.confirmation,onClick:function(){return Ke(Object(u.a)(Object(u.a)({},ze),{},{confirmation:!ze.confirmation}))}}),Object(g.jsx)("label",{children:"Send confirmation when redeeming via chat"})]}),Object(g.jsx)(ne,{type:"input",value:Ue,onChange:function(e){return _e(e)},label:"Item chat command",subtitle:'To play, type "!sound '.concat(Ue,'" in the chat')}),Object(g.jsxs)("div",{className:"buttons",children:[(null===R||void 0===R||null===(i=R.alert)||void 0===i||null===(d=i.audio)||void 0===d?void 0:d.src)&&Object(g.jsx)("button",{className:"button secondary",type:"button",disabled:T,onClick:function(){return He()},children:"Cancel changes"}),"new"===J?Object(g.jsx)("button",{className:"button primary",type:"button",disabled:void 0===Je,onClick:function(){return Qe()},children:T?Object(g.jsx)("i",{className:"fas fa-spin fa-spinner"}):"Upload new sound"}):Object(g.jsx)("button",{className:"button primary",type:"button",disabled:!Be,onClick:function(){return Qe()},children:T?Object(g.jsx)("i",{className:"fas fa-spin fa-spinner"}):"Change sound"})]}),"new"!==J&&Object(g.jsx)("div",{className:"buttons",children:Object(g.jsx)("button",{className:"button danger",type:"button",onClick:function(){return F(!0)},children:"Delete sound"})})]})]})})]});function He(){j("/")}function Qe(){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(v.a)(b.a.mark((function e(){var t,n,a,c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===Ge||void 0===Ge||null===(t=Ge.current)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0],!(p&&h&&r)){e.next=12;break}return e.prev=2,e.next=5,h.uploadFile(p._id,r);case 5:Xe(e.sent),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:if((null===R||void 0===R||null===(a=R.alert)||void 0===a||null===(c=a.audio)||void 0===c?void 0:c.src)||!Je||"new"===Je){e.next=17;break}return e.next=15,Xe(Je);case 15:e.next=19;break;case 17:return e.next=19,$e();case 19:"new"===J&&nt(),S();case 21:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Xe(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(v.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p&&h&&t)){e.next=17;break}return e.prev=1,M(!0),n=tt(void 0,t),e.next=6,h.createChannelItem(p._id,Object(u.a)(Object(u.a)({},n),{},{accessCodes:{keys:[],mode:"multi"},accessLevel:100,allowMessages:!1}));case 6:a=e.sent,k(a),He(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:return e.prev=14,M(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function $e(){return et.apply(this,arguments)}function et(){return(et=Object(v.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p&&h&&R)){e.next=17;break}return e.prev=1,M(!0),t=tt(R),e.next=6,null===h||void 0===h?void 0:h.saveChannelItem(p._id,t);case 6:n=e.sent,k(n),He(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:return e.prev=14,M(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function tt(e,t){var n=Object(u.a)(Object(u.a)({},e),{},{name:q,description:X,cost:oe,quantity:{total:de},cooldown:Object(u.a)(Object(u.a)({},null===e||void 0===e?void 0:e.cooldown),{},{category:Se,global:me,user:Oe}),categoryName:Ne,sources:[ze.bot?"bot":void 0,ze.extension?"extension":void 0,ze.website?"website":void 0].filter((function(e){return e})),alert:Object(u.a)(Object(u.a)({},null===e||void 0===e?void 0:e.alert),{},{enabled:!0,graphics:{duration:8,type:"image"},audio:{id:null===t||void 0===t?void 0:t._id,name:null===t||void 0===t?void 0:t.name,src:(null===t||void 0===t?void 0:t.url)?t.url:"new"!==Je?null===Je||void 0===Je?void 0:Je.url:void 0,type:"sound",volume:Te}}),bot:{sendResponse:ze.confirmation||!1,identifier:Ue},enabled:L,channel:null===p||void 0===p?void 0:p._id,subscriberOnly:!0,featured:(null===e||void 0===e?void 0:e.enabled)||!1,type:"effect",userInput:[],accessLevel:100});return delete n.duration,n}function nt(){B(""),Z(""),ie(10),be(-1),fe(0),xe(0),we(""),Ie(0),Me(1),Ke({website:!1,extension:!1,bot:!0,confirmation:!0}),_e("")}},ie=function(e){var t=e.children,n=Q(),a=Object(l.g)();return(null===n||void 0===n?void 0:n.token)||n.guestUsername?t:Object(g.jsx)(l.a,{to:"/login",state:{from:a}})};n(227);var le=function(){return Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)(l.e,{children:[Object(g.jsx)(l.c,{path:"/",element:Object(g.jsx)(ie,{children:Object(g.jsx)(Y,{})}),children:Object(g.jsx)(l.c,{path:"item/",element:Object(g.jsx)(oe,{}),children:Object(g.jsx)(l.c,{path:":itemId",element:Object(g.jsx)(oe,{})})})}),Object(g.jsx)(l.c,{index:!1,path:"login",element:Object(g.jsx)(Z,{})})]})})},ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,235)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};n(228),n(229);s.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(i.b,{children:Object(g.jsx)(o.a,{children:Object(g.jsx)(H,{children:Object(g.jsx)(le,{})})})})}),document.getElementById("root")),ue()}},[[230,1,2]]]);
//# sourceMappingURL=main.29a53384.chunk.js.map